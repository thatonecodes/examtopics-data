{"pageProps":{"questions":[{"id":"dZ3zYThhWAp8btHvvnrU","exam_id":48,"answer_ET":"B","answer":"B","answer_description":"","answer_images":[],"question_text":"You have 100 Azure virtual machines (VMs) with the system-assigned managed identity enabled.\n\nYou need to identify the value of the object ID attribute for each of the identities.\n\nWhich command should you use?","question_id":316,"unix_timestamp":1737576720,"isMC":true,"choices":{"A":"Get-AzureADUser","C":"Get-AzureADUserOwnedObject","D":"az ad signed-in-user list-owned-objects","B":"Get-AzResource"},"discussion":[{"content":"Selected Answer: B\nTo identify the value of the object ID attribute for each of the system-assigned managed identities on your Azure VMs, you should use the Get-AzResource command. This command allows you to retrieve the properties of a resource, including the identity information.\n\nHere's an example of how you can use it:\n\nGet-AzResource -ResourceGroupName <resource-group-name> -ResourceType \"Microsoft.Compute/virtualMachines\" | Select-Object -ExpandProperty Identity\nReplace <resource-group-name> with the actual name of your resource group. This will return the object ID of the system-assigned managed identity for each VM","poster":"BrownieP","timestamp":"1738573980.0","upvote_count":"1","comment_id":"1350802"}],"topic":"4","url":"https://www.examtopics.com/discussions/microsoft/view/155261-exam-az-204-topic-4-question-80-discussion/","question_images":[],"timestamp":"2025-01-22 21:12:00","answers_community":["B (100%)"]},{"id":"Vw6kBT49QoXkEjvfPgO9","url":"https://www.examtopics.com/discussions/microsoft/view/155850-exam-az-204-topic-4-question-81-discussion/","question_id":317,"answer_images":["https://img.examtopics.com/az-204/image571.png"],"unix_timestamp":1738574700,"discussion":[{"poster":"skysoftware","content":"1. ConfidentialClientApplication\n2. scopes","timestamp":"1741256760.0","comment_id":"1365843","upvote_count":"2"},{"upvote_count":"1","timestamp":"1738574700.0","content":"1. ConfidentialClientApplication\n2. scopes","comment_id":"1350805","poster":"BrownieP"}],"topic":"4","timestamp":"2025-02-03 10:25:00","answers_community":[],"question_text":"HOTSPOT\n-\n\nYou are developing a web application that makes calls to the Microsoft Graph API. You register the application in the Azure portal and upload a valid X509 certificate.\n\nYou create an appsettings.json file containing the certificate name, client identifier for the application, and the tenant identifier of the Microsoft Entra ID. You create a method named ReadCertificate to return the X509 certificate by name.\n\nYou need to implement code that acquires a token by using the certificate.\n\nHow should you complete the code segment? To answer, select the appropriate options in the answer area.\n\nNOTE: Each correct selection is worth one point.\n\n//IMG//","exam_id":48,"isMC":false,"question_images":["https://img.examtopics.com/az-204/image570.png"],"answer":"","answer_ET":"","answer_description":""},{"id":"eCMcYKZxvDT30Vv3x3zo","discussion":[{"timestamp":"1738575120.0","upvote_count":"2","poster":"BrownieP","comment_id":"1350810","content":"Selected Answer: B\nTo implement a permission classification in a Microsoft Entra tenant, you should select delegated permissions that require only user consent. This is because permission classifications in Microsoft Entra ID currently support classifying delegated permissions that do not require admin consent\nhttps://learn.microsoft.com/en-us/entra/identity/enterprise-apps/configure-permission-classifications?pivots=portal"}],"answer_description":"","timestamp":"2025-02-03 10:32:00","question_id":318,"topic":"4","answer":"B","exam_id":48,"question_text":"You develop applications that integrate with a Microsoft Entra tenant.\n\nYou plan to implement a permission classification in the tenant.\n\nYou need to select permissions to include in your classification.\n\nWhich permissions should you select?","isMC":true,"answers_community":["B (100%)"],"unix_timestamp":1738575120,"answer_images":[],"url":"https://www.examtopics.com/discussions/microsoft/view/155851-exam-az-204-topic-4-question-82-discussion/","answer_ET":"B","choices":{"A":"app-only access permissions that require admin consent","D":"delegated permissions that require admin consent","B":"delegated permissions that require only user consent","C":"app-only access permissions that require only user consent"},"question_images":[]},{"id":"f8rmkOqUrWyQQxe1mijD","answers_community":[],"discussion":[{"upvote_count":"2","comment_id":"1353548","poster":"dac15e0","timestamp":"1739035980.0","content":"I think the anwser is:\nCreate a system-assigned managed identity for the VM.\nModify the access policy on kv1.\nRetrieve an access token from the Azure Instance Metadata Service (IMDS) endpoint."},{"comment_id":"1350816","timestamp":"1738575660.0","upvote_count":"3","poster":"BrownieP","content":"the given answer is correct."}],"question_text":"DRAG DROP\n-\n\nYou have an Azure Virtual Machine (VM) named VM1 running Windows Server 2022 and an Azure Key Vault instance named kv1.\n\nYou are developing a .NET application named App1 that you plan to deploy to VM1.\n\nYou have the following requirements:\n\n• App1 will require access to kv1.\n• The identity used by App1 to access kv1 must be automatically deprovisioned when VM1 is deleted.\n\nYou need to identify the procedure that will meet the requirements.\n\nWhich three actions should you include in the procedure? To answer, move the appropriate actions from the list of actions to the answer area and arrange them in the correct order.\n\n//IMG//","answer_images":["https://img.examtopics.com/az-204/image573.png"],"unix_timestamp":1738575660,"url":"https://www.examtopics.com/discussions/microsoft/view/155852-exam-az-204-topic-4-question-83-discussion/","topic":"4","answer_ET":"","exam_id":48,"question_images":["https://img.examtopics.com/az-204/image572.png"],"answer":"","answer_description":"","isMC":false,"question_id":319,"timestamp":"2025-02-03 10:41:00"},{"id":"Ea28jHkAJCaJemRxEXFW","question_images":[],"answer_images":[],"answer":"A","topic":"4","answers_community":["A (74%)","C (26%)"],"question_text":"You have an application that includes an Azure Web app and several Azure Function apps. Application secrets including connection strings and certificates are stored in Azure Key Vault.\nSecrets must not be stored in the application or application runtime environment. Changes to Azure Active Directory (Azure AD) must be minimized.\nYou need to design the approach to loading application secrets.\nWhat should you do?","timestamp":"2021-03-01 10:56:00","isMC":true,"unix_timestamp":1614592560,"url":"https://www.examtopics.com/discussions/microsoft/view/45744-exam-az-204-topic-4-question-9-discussion/","choices":{"A":"Create a single user-assigned Managed Identity with permission to access Key Vault and configure each App Service to use that Managed Identity.","C":"Create a system assigned Managed Identity in each App Service with permission to access Key Vault.","B":"Create a single Azure AD Service Principal with permission to access Key Vault and use a client secret from within the App Services to access Key Vault.","D":"Create an Azure AD Service Principal with Permissions to access Key Vault for each App Service and use a certificate from within the App Services to access Key Vault."},"discussion":[{"content":"I think the answer is A. Create a single user-assigned Managed Identity with permission to access Key Vault and configure each App Service to use that Managed Identity.\nBecause we have more than one App (Web App and other Function Apps) , So we agree it is going to be a managed identity but should I create one for each app or one for all apps?\nIf I create system MI then there should be one for each App.\nIf I create user MI then I can re-use it for any App I want with minimum change to AD","upvote_count":"118","comment_id":"309939","comments":[{"content":"Yes exactly. The question emphasizes on having multiple resources having to access Key vault. So using User Assigned MI is more pragmatic.","poster":"Basu525","timestamp":"1615871280.0","comments":[{"comment_id":"393529","timestamp":"1624944720.0","content":"Well from security standpoint you could assign different secrets to different parts of application (if they are using system managed identity) soi if one component is compromised - not all secrets are available to hackers","upvote_count":"5","poster":"SlavMar"}],"upvote_count":"4","comment_id":"312009"},{"timestamp":"1615841040.0","comments":[{"poster":"vb3d","timestamp":"1616595300.0","comment_id":"319179","content":"I think that note in the link is only for the usage of key vault references, which is a new thing in key vaults. I think a user assigned identity should still have access to the key vault.","comments":[{"comment_id":"324370","content":"Yes, key vault reference is an App Configuration feature referencing a secret from key vault.","poster":"Zsolt72","upvote_count":"1","timestamp":"1617118860.0"},{"content":"That's true.\nhttps://kasunkodagoda.com/2019/06/09/using-user-assigned-managed-identity-to-access-azure-key-vault-from-azure-app-service/","upvote_count":"1","poster":"Tom87","timestamp":"1618067940.0","comment_id":"332644"}],"upvote_count":"4"},{"timestamp":"1616595420.0","comment_id":"319180","poster":"vb3d","upvote_count":"8","content":"I just tried this, I was able to give access to a user assigned managed identity to a key vault."}],"comment_id":"311754","upvote_count":"4","content":"User assigned cannot be used Look at the link provided.","poster":"midhy"},{"upvote_count":"6","comments":[{"content":"I don't read this on that page t.b.h.","poster":"PhilLI","comment_id":"501681","timestamp":"1639517160.0","upvote_count":"1"},{"content":"This is not true: see: https://kasunkodagoda.com/2019/06/09/using-user-assigned-managed-identity-to-access-azure-key-vault-from-azure-app-service/","upvote_count":"6","comment_id":"416678","poster":"zzt","timestamp":"1627540620.0"}],"poster":"vtomy","comment_id":"397303","content":"User assigned MI is not supported for keyvault.\nSystem assigned MI is correct.","timestamp":"1625287140.0"},{"comment_id":"367079","timestamp":"1622028060.0","upvote_count":"8","content":"https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview\nThe lifcycle of user-assigned managed identity is manually managed by the user and can be used (not assigned) to several services.\nThe lifecycle of the system-assigned managed identity is tightly coupled with the service, it's assigned to a service. When the service is deleted, the identity will also be gone.\n\nTo minimize changes to AD, user-assigned is more suitable.","poster":"ferut"},{"comment_id":"848984","timestamp":"1679634780.0","upvote_count":"7","content":"correct, in 2023Mar24, score: 904/1000","poster":"TonyMel"}],"poster":"YellowSky002","timestamp":"1615662960.0"},{"poster":"mlantonis","comments":[{"comment_id":"486021","upvote_count":"10","content":"Don't misguide people. In the same link you give, this statement exists \"Some apps need to reference secrets at creation time, when a system-assigned identity would not yet be available. In these cases, a user-assigned identity can be created and given access to the vault in advance.\"\n\nYour given reference: https://docs.microsoft.com/en-us/azure/app-service/app-service-key-vault-references","timestamp":"1637761500.0","poster":"altafpatel1984"},{"comment_id":"416677","content":"Not correct: see link https://kasunkodagoda.com/2019/06/09/using-user-assigned-managed-identity-to-access-azure-key-vault-from-azure-app-service/","timestamp":"1627540500.0","upvote_count":"5","poster":"zzt"},{"poster":"eX900","content":"Granting your app access to Key Vault\n2.Create a managed identity for your application.\n\"Key Vault references will use the app's system assigned identity by default, but you can specify a user-assigned identity.\"\n\nYour second reference: \nhttps://docs.microsoft.com/en-us/azure/app-service/app-service-key-vault-references.\n\nSo, the answer is : A","comment_id":"698836","upvote_count":"4","timestamp":"1666169100.0"},{"poster":"TakumaK","comment_id":"395856","content":"You are wrong. your second link OBVISOULY says\n\"Key Vault references will use the app's system assigned identity by default, but you can specify a user-assigned identity.\"","upvote_count":"19","timestamp":"1625138460.0"}],"content":"Correct Answer: C\n\nKey Vault references currently only support system-assigned managed identities. User-assigned identities cannot be used.\n\nReference:\nhttps://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview#managed-identity-types\nhttps://docs.microsoft.com/en-us/azure/app-service/app-service-key-vault-references","upvote_count":"41","timestamp":"1622377260.0","comment_id":"370195"},{"comment_id":"1294013","content":"Selected Answer: A\nUsing a user-assigned Managed Identity is a good approach in this scenario. Managed identities provide an identity for applications to use when connecting to resources that support Azure Active Directory (Azure AD) authentication.\n\nA user-assigned managed identity is created as a standalone Azure resource. After it's created, the identity can be assigned to one or more Azure service instances. The identity is managed by Azure AD and does not require a password.\n\nBy using a single user-assigned Managed Identity across all your App Services, you can manage access to the Key Vault centrally, minimizing changes to Azure AD.","poster":"Vichu_1607","upvote_count":"1","timestamp":"1728275700.0"},{"comment_id":"1263761","upvote_count":"1","timestamp":"1723354320.0","content":"Ans is C - Secrets must not be stored in the application or application runtime environment.","poster":"prabhjot"},{"timestamp":"1711534500.0","content":"Selected Answer: A\nKey vault references use the app's system-assigned identity by default, but you can specify a user-assigned identity.\nEven for KeyVault References - \"Key vault references use the app's system-assigned identity by default, but you can specify a user-assigned identity.\"","poster":"jobolesonihal","comment_id":"1183986","upvote_count":"1"},{"upvote_count":"1","timestamp":"1707282300.0","poster":"Zhenyuan_Zhang","comment_id":"1142960","content":"Selected Answer: A\nI think the answer is A.\nhttps://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/overview#management-identity-types%20https://docs.microsoft.com/en-us%20/azure/app-service/app-service-key-vault-references"},{"comment_id":"1050060","content":"there is a saying in my country: one fool throws a rock in the pond, and 10 good people do their best to pull it out. this is exactly how i feel looking at all of us trying to \"guess\" what \"minimizing AD changes\" realy means in this context...","upvote_count":"4","poster":"junkz","timestamp":"1697940240.0"},{"upvote_count":"2","comment_id":"980934","content":"I think in the past, you cannot use the user-assigned identity to access to the Azure Key-Vault. But it is possible now: \"Key vault references use the app's system-assigned identity by default, but you can specify a user-assigned identity.\"\n\nhttps://learn.microsoft.com/en-us/azure/app-service/app-service-key-vault-references?tabs=azure-cli\n\nSo I think the answer should be A.","poster":"drkpnsh","timestamp":"1692029160.0"},{"upvote_count":"1","comment_id":"963502","timestamp":"1690356840.0","poster":"Dianahu","content":"if I want to add an user-assigned managed identity I need to create it so I wouldnt say that it is minimum change to AD and it is not a good pattern to have the same identity for all of them"},{"upvote_count":"2","comment_id":"862404","content":"Managed identities are of the following two types:\n\nSystem-assigned -- this is activated directly on the Azure cloud service. For example, you can create a managed identity for your web app that will be automatically deleted once the web app instance is deleted\nUser-assigned -- this is a stand-alone Azure resource that is created independent of the actual service instance. You can assign this identifier to one or more Azure resources simultaneously. As an example, you can set this identity to both an Azure Web App and an Azure Function at the same time\n\n- https://www.loginradius.com/blog/engineering/guest-post/using-azure-key-vault-with-an-azure-web-app-in-c-sharp/","timestamp":"1680721200.0","poster":"AzSimuz"},{"timestamp":"1680091620.0","content":"Correct Answer: A\n\nSystem-assigned -- this is activated directly on the Azure cloud service. For example, you can create a managed identity for your web app that will be automatically deleted once the web app instance is deleted\n\n\nUser-assigned -- this is a stand-alone Azure resource that is created independent of the actual service instance. You can assign this identifier to one or more Azure resources simultaneously. As an example, you can set this identity to both an Azure Web App and an Azure Function at the same time","poster":"maqsoodshah","comment_id":"854363","upvote_count":"1"},{"poster":"JamieS","timestamp":"1678187940.0","comment_id":"831806","upvote_count":"3","content":"I would have thought it was system assigned identity, but it says we have multiple Azure Function apps, and one of the requirements is to minimise changes to AD.\n\nOnly the user identity has a one to many mapping (https://learn.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview#managed-identity-types)."},{"content":"Key Vault references will use the app's system assigned identity by default, but you can specify a user-assigned identity.\nUser-assigned managed identity Can be shared!\nThe same user-assigned managed identity can be associated with more than one Azure resource.\nSo A and C both works but less work with A in this case.","poster":"manopeydakon","upvote_count":"1","comment_id":"809283","timestamp":"1676449620.0"},{"upvote_count":"1","timestamp":"1674555660.0","content":"User assigned Identity\nhttps://thecodeblogger.com/2020/06/13/user-assigned-managed-identity-with-azure-key-vault/","poster":"Esward","comments":[{"content":"Also refer\nhttps://yourazurecoach.com/2022/02/04/use-app-service-key-vault-references-with-user-assigned-identities/","comments":[{"upvote_count":"1","timestamp":"1674555720.0","content":"https://stackoverflow.com/questions/55101525/how-can-i-give-access-to-key-vault-to-a-user-assigned-identity","comment_id":"786422","poster":"Esward"}],"comment_id":"786421","poster":"Esward","timestamp":"1674555720.0","upvote_count":"1"}],"comment_id":"786418"},{"comment_id":"782378","timestamp":"1674226680.0","upvote_count":"4","content":"Selected Answer: C\nC.\nBecause user assigned will take more codes and configurations for the key.\nSystem assigned for each app service more security and noneed to have any configuration and the same code","poster":"daothanhyen"},{"timestamp":"1673339160.0","comments":[{"content":"Option A, \"Create a single user-assigned Managed Identity with permission to access Key Vault and configure each App Service to use that Managed Identity\" also can be a good solution, But it can't provide fine-grained access control as all App Service using the same identity.\n\nOption B \"Create a single Azure AD Service Principal with permission to access Key Vault and use a client secret from within the App Services to access Key Vault\" would not be the recommended approach, as it would involve storing the client secret in the App Services, which is a violation of the requirement to avoid storing secrets in the application or runtime environment.\n\nOption D \"Create an Azure AD Service Principal with Permissions to access Key Vault for each App Service and use a certificate from within the App Services to access Key Vault\" is also a valid approach but it is more difficult to manage the certificate in each App Service and need more code to handle the certificate in the code.","comments":[{"comment_id":"823735","timestamp":"1677504780.0","content":"User-assigned Managed Identity is an additional resource. System-assigned is not","poster":"warchoon","upvote_count":"2"}],"timestamp":"1673339160.0","poster":"imanonion","comment_id":"771195","upvote_count":"1"}],"content":"Selected Answer: C\nBy creating a system-assigned Managed Identity for each App Service, you can avoid storing secrets in the application or runtime environment, as the Managed Identity provides a way for the App Service to authenticate to Key Vault without the need for hard-coded credentials. Additionally, using a separate Managed Identity for each App Service allows for fine-grained access control to the secrets stored in Key Vault, as you can assign permissions to specific identities rather than granting broad permissions to a single identity.","poster":"imanonion","comment_id":"771194","upvote_count":"1"},{"upvote_count":"3","content":"The correct answer is A.\nSource : https://learn.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/managed-identity-best-practice-recommendations#using-user-assigned-identities-to-reduce-administration\n\nRead the article but in summary \"When a user-assigned identity is associated with the four virtual machines, only two role assignments are required, compared to eight with system-assigned identities. If the virtual machines' identity requires more role assignments, they'll be granted to all the resources associated with this identity.\" \n\nThe key here is \"Changes to Azure Active Directory (Azure AD) must be minimized\" and the paragraph is called \"Using user-assigned identities to reduce administration\". \n\nSo A is the correct answer because of the \"change must be minimized\". C would work but it means you have much more changes.","timestamp":"1671055560.0","poster":"oceane0316","comment_id":"745488"},{"content":"Selected Answer: A\nA. Create a single user-assigned Managed Identity with permission to access Key Vault and configure each App Service to use that Managed Identity.","timestamp":"1668951720.0","poster":"OPT_001122","upvote_count":"2","comment_id":"722647"},{"upvote_count":"3","poster":"micro9000","timestamp":"1668219300.0","comments":[{"content":"Ask yourself please what kind of change in AD you are doing in C vs A. C is the most correct secure and straightforward answer. You don't need to touch AD at all.","comment_id":"723886","upvote_count":"1","timestamp":"1669062660.0","poster":"hubekpeter"}],"comment_id":"716436","content":"The answer should be A,\nwe have this requirements: Changes to Azure Active Directory (Azure AD) must be minimized.\nIf A, we only need to create single User Assigned MI, and allow that MI to access KV, then assign that MI to App Service and Function Apps"},{"content":"\" Changes to Azure Active Directory (Azure AD) must be minimized\" For what practical reasons? These questions doesn't make sense","poster":"gmishra88","comment_id":"687612","timestamp":"1665044880.0","upvote_count":"1"},{"upvote_count":"2","content":"Got this in 09/22 , went with the most voted answer, score 927.","comments":[{"content":"what do you answer?","comment_id":"675268","timestamp":"1663774800.0","poster":"VACAS","upvote_count":"1"}],"timestamp":"1662877740.0","poster":"serpevi","comment_id":"665865"},{"timestamp":"1662061020.0","upvote_count":"2","poster":"Dani_ac7","comment_id":"656614","content":"Selected Answer: C\nkey is --> Changes to Azure Active Directory (Azure AD) must be minimized."},{"timestamp":"1661643840.0","poster":"ghuna","upvote_count":"1","comment_id":"652763","content":"Selected Answer: C\nFOR AZURE BASED SERVICES, ALWAYS USE MANAGED IDENTITIES"},{"poster":"OlivierPaudex","upvote_count":"1","comment_id":"642284","content":"Both are working (as for 2022)\nYou can add a system-assigned managed identity to your app and than, add this to your keyvault.\nYou can also create a user-assigned managed identity and add your app to it. Finally, you have to add the user-ami to the keyvault.\n\nAs for the question, the system-ami would change the registration into the AAD, means that with an user-ami, you will be less intrusive\n\nI vote for A, user-assigned managed identity","timestamp":"1659604860.0"},{"upvote_count":"1","content":"Selected Answer: A\nCreate a single user-assigned Managed Identity with permission to access Key Vault and configure each App Service to use that Managed Identity.\n\nBecause we have more than one App (Web App and other Function Apps) , So we agree it is going to be a managed identity\n\nbut should I create one for each app or one for all apps?\n\nIf I create system MI then there should be one for each App.\n\nIf I create user MI then I can re-use it for any App I want with minimum change to AD","comment_id":"635069","timestamp":"1658474880.0","poster":"tushar1812"},{"upvote_count":"3","content":"Selected Answer: A\nA is correct answer. \n\nIn order to read secrets from Key Vault, you need to have a vault created and give your app permission to access it.\nCreate a key vault by following the Key Vault quickstart.\nCreate a managed identity for your application.\nKey Vault references will use the app's system assigned identity by default, but you can specify a user-assigned identity.\nCreate an access policy in Key Vault for the application identity you created earlier. Enable the \"Get\" secret permission on this policy. Do not configure the \"authorized application\" or applicationId settings, as this is not compatible with a managed identity.\n\nhttps://docs.microsoft.com/en-us/azure/app-service/app-service-key-vault-references?tabs=azure-cli#granting-your-app-access-to-key-vault","comment_id":"621421","timestamp":"1656040800.0","poster":"Eltooth"},{"comments":[{"comment_id":"622039","timestamp":"1656143280.0","poster":"imazmaster","content":"Create \"System-assigned managed identity\" don't have to change to Azure Active Directory (Azure AD) manually. A system assigned managed identity is restricted to one per resource and is tied to the lifecycle of this resource. \n\nI think the answer must be C.","upvote_count":"2"}],"upvote_count":"5","poster":"kjfdzkkbsm","content":"Selected Answer: A\nThe hint is here: \"Changes to Azure Active Directory (Azure AD) must be minimized.\"\nUser assigned creates one identity. System assigned would create several.","comment_id":"613411","timestamp":"1654707840.0"},{"poster":"Rockm0uld","timestamp":"1648219200.0","upvote_count":"1","content":"Selected Answer: A\nI'll go for A. User-assigned identity\nworks with apps and functions: https://docs.microsoft.com/en-us/azure/app-service/overview-managed-identity?tabs=portal%2Chttp","comment_id":"575075"},{"upvote_count":"1","content":"Selected Answer: C\nAnswer: C","poster":"SivajiTheBoss","comment_id":"564650","timestamp":"1646899500.0"},{"upvote_count":"1","content":"Based on the following sentence. \n\nSome apps need to reference secrets at creation time, when a system-assigned identity would not yet be available. In these cases, a user-assigned identity can be created and given access to the vault in advance.\n\nOption A is a correct answer. If I am wrong pls give the answer with proper reference.","poster":"Maniam","comment_id":"561133","timestamp":"1646447400.0"},{"comment_id":"541209","upvote_count":"7","timestamp":"1644085680.0","content":"Selected Answer: A\nUsed assigned MSI minimizes changes to AAD","poster":"asdasdasg2"},{"upvote_count":"9","poster":"Mev4953","content":"Got this in the exam 01/22","timestamp":"1642759320.0","comment_id":"529075"},{"poster":"leonidn","comments":[{"timestamp":"1655075520.0","comment_id":"615529","poster":"renzoku","content":"Hi, where says that \"multiple services access KeyVault\"?, I only read that your application has several Azure Function Apps, but don't mention anything about multiple resourses","upvote_count":"1"}],"comment_id":"517164","upvote_count":"3","timestamp":"1641356220.0","content":"Selected Answer: A\nSystem and User Assigned managed identities are possible options. But here is mentioned that multiple services access KeyVault. In this case, User Assigned managed identity is the preferable option."},{"upvote_count":"2","poster":"AzureXin","content":"C. Create a system assigned Managed Identity in each App Service with permission to access Key Vault.","comment_id":"497285","timestamp":"1639018560.0"},{"comment_id":"427044","poster":"AOE","upvote_count":"8","content":"Maybe MS doc has been updated, but it clearly states that by default, it will use the system managed identity, but you can use user managed identity. Check the link:\nhttps://docs.microsoft.com/en-us/azure/app-service/app-service-key-vault-references\n\nIn order to read secrets from Key Vault, you need to have a vault created and give your app permission to access it.\n\nCreate a key vault by following the Key Vault quickstart.\n\nCreate a managed identity for your application.\n\nKey Vault references will use the app's system assigned identity by default, but you can specify a user-assigned identity.\n\nCreate an access policy in Key Vault for the application identity you created earlier. Enable the \"Get\" secret permission on this policy. Do not configure the \"authorized application\" or applicationId settings, as this is not compatible with a managed identity.","timestamp":"1629316560.0"},{"comment_id":"422825","content":"A user assigned identity can definitely used for access key vault, just tested in azure portal.","upvote_count":"5","poster":"ning","timestamp":"1628607840.0"},{"upvote_count":"2","comment_id":"420673","poster":"AzureLearning","content":"Here since we want to minimize changes to Azure AD ,we can create one user-assigned managed identity and assign it to all of the Azure Web Apps and functions. We can then gives the required access to the managed identity to the resources in the key vault","timestamp":"1628236500.0"},{"content":"Its user assigned manage Identity is the answer.. \nSee the question \"Changes to Azure Active Directory (Azure AD) must be minimized.\" and System assigned creates profile in AD where as User assigned creates in resource inself.\nhttps://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview","comment_id":"404107","timestamp":"1626018780.0","poster":"somenkr","upvote_count":"4"},{"comment_id":"391914","content":"Create a single user-assigned Managed Identity with permission to access Key Vault and configure each App Service to use that Managed Identity. \nwe want to minimize changes to Azure AD ,we can create one user-assigned managed identity and assign it to all of the Azure Web Apps and functions. We can then give the required access to the managed identity to the resources in the key vault. \nAnswer is A","comments":[{"content":"Question is why one function should have access to connection string used by other function?","poster":"SlavMar","upvote_count":"1","timestamp":"1624944780.0","comment_id":"393533"}],"poster":"kondapaturi","upvote_count":"3","timestamp":"1624783920.0"},{"upvote_count":"3","comment_id":"391913","poster":"kondapaturi","content":"Create a single user-assigned Managed Identity with permission to access Key Vault and configure each App Service to use that Managed Identity. \nAnswer is A","timestamp":"1624783860.0"},{"poster":"hems4all","comments":[{"timestamp":"1625138520.0","comment_id":"395857","content":"\"Key Vault references will use the app's system assigned identity by default, but you can specify a user-assigned identity.\"","upvote_count":"1","poster":"TakumaK"}],"content":"Use Key Vault references for App Service and Azure Functions.\nKey Vault references currently only support system-assigned managed identities. User-assigned identities cannot be used.\n\nhttps://docs.microsoft.com/en-us/azure/app-service/app-service-key-vault-references","timestamp":"1622901360.0","upvote_count":"5","comment_id":"375203"},{"content":"Key Vault references currently only support system-assigned managed identities. User-assigned identities cannot be used.\n\nSo =>\n\nSystem-Assigned","poster":"UnknowMan","upvote_count":"3","timestamp":"1621582740.0","comment_id":"362787"},{"comment_id":"359270","content":"A. Create a single user-assigned Managed Identity with permission to access Key Vault and configure each App Service to use that Managed Identity.","upvote_count":"5","poster":"glam","timestamp":"1621228320.0"},{"content":"I think C is correct because key requirement is \"Changes to Azure Active Directory (Azure AD) must be minimized\". Note that system identities are automatically removed when the resource is deleted.\nSystem-assigned Some Azure services allow you to enable a managed identity directly on a service instance. When you enable a system-assigned managed identity an identity is created in Azure AD that is tied to the lifecycle of that service instance. So when the resource is deleted, Azure automatically deletes the identity for you. By design, only that Azure resource can use this identity to request tokens from Azure AD.\nhttps://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview","comment_id":"358221","poster":"AzureAz204Fan","upvote_count":"9","timestamp":"1621118040.0"},{"content":"While it is valid to use a single user-assigned Managed Identity, I believe, it's worth to think about the maintenance: What if you would like to change accessibilty for one of the application + there is no need to manually control policy in case of removing one of the application. I think, in such situations it better to stick to the approach \"less is more\"","upvote_count":"1","comment_id":"344100","timestamp":"1619541000.0","poster":"crepatata"},{"comment_id":"338649","content":"According to this blog post it's perfectly possible to use a user-assigned identity with key vault. hence the answer should be A.\nhttps://thecodeblogger.com/2020/06/13/user-assigned-managed-identity-with-azure-key-vault/","timestamp":"1618813620.0","poster":"sien","upvote_count":"2"},{"upvote_count":"3","timestamp":"1618053240.0","poster":"simonverma","content":"Answer should be A. As mentioned in question many resources, user-assigned can be used for one-to-many relationship.","comment_id":"332471"},{"poster":"jokergester","comment_id":"327024","timestamp":"1617401040.0","comments":[{"content":"yeah. I am guessing the question is asking about \"Key Vault references\". But hope someone will give clear explanation...","poster":"TakumaK","timestamp":"1621755120.0","comment_id":"364247","upvote_count":"1"}],"content":"As good as user-assigned is for this solution, it is not yet available for Key Vault.\n\nhttps://docs.microsoft.com/en-us/azure/app-service/app-service-key-vault-references#granting-your-app-access-to-key-vault\n\nTake a look as well to the list of azure resources supporting managed identities. As of the time of writing, there is no User Assigned identity indicated for Key Vault.\n\nhttps://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/services-support-managed-identities#azure-key-vault","upvote_count":"7"},{"timestamp":"1617011160.0","upvote_count":"7","comment_id":"323294","content":"Answer is correct: system-assigned, clearly stated in these steps: https://docs.microsoft.com/en-us/azure/app-service/app-service-key-vault-references","poster":"DG90"},{"timestamp":"1616742000.0","comment_id":"320870","poster":"HGSandhagen","content":"I agree with AssilAbdulrahim, answer A is correct. See: https://docs.microsoft.com/en-us/azure/app-service/overview-managed-identity","upvote_count":"1"},{"poster":"rdemontis","timestamp":"1616425440.0","comment_id":"317262","content":"You have to grant access App Services to Azure Key Vault avoiding modifications on AAD. So the only possibility is System-Assigned Managed Identity.","upvote_count":"2","comments":[{"comment_id":"338551","timestamp":"1618796400.0","poster":"jvyas","content":"I was thinking the same.","upvote_count":"1"},{"timestamp":"1621755000.0","upvote_count":"1","content":"Yeah. I am leaning to C from A even AssilAbdulrahim has more votes. But the question is not that clear for me. it could be either A or C based on how to understand the question...","comment_id":"364246","poster":"TakumaK"}]},{"upvote_count":"8","comment_id":"301261","timestamp":"1614592560.0","poster":"pieronegri","content":"Correct. Theoretically you could use a service principal, but it would be a bit more complex I guess and you could not use app settings to directly point to the keyvault artifacts although there could be some usecases in which accessing always from the same service principal might be useful."}],"answer_ET":"A","exam_id":48,"answer_description":"","question_id":320}],"exam":{"numberOfQuestions":452,"isBeta":false,"lastUpdated":"12 Apr 2025","isImplemented":true,"provider":"Microsoft","id":48,"isMCOnly":false,"name":"AZ-204"},"currentPage":64},"__N_SSP":true}