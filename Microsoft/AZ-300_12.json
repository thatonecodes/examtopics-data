{"pageProps":{"questions":[{"id":"ooH2tSGC1WO99GscKXxC","answer_description":"References:\nhttps://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview","url":"https://www.examtopics.com/discussions/microsoft/view/9841-exam-az-300-topic-1-question-6-discussion/","unix_timestamp":1575648780,"answer":"D","choices":{"D":"From the Azure portal, modify the value of the Managed Service Identity option for VM1.","A":"From the Azure portal, modify the Access control (IAM) settings of RG1.","B":"From the Azure portal, modify the Policies settings of RG1.","C":"From the Azure portal, modify the Access control (IAM) settings of VM1."},"isMC":true,"topic":"1","question_id":56,"discussion":[{"comment_id":"29810","poster":"Sedge","timestamp":"1576430880.0","comments":[{"upvote_count":"7","comment_id":"30190","timestamp":"1576532820.0","poster":"Amrinder101","content":"The ques says - You need to ensure that a service running on VM1 can manage the resources in RG1 by using the identity of VM1. \nSo the identity is already been setup for vm.","comments":[{"upvote_count":"16","content":"I agree with Sedge and think it is D because ....\nthe question says :\nVM1 runs services that WILL be used to deploy resources to RG1. **** (This suggests to me that the identity has not been set up yet - it is saying it will run the services not that it already can do)\nYou need to ensure that a service running on VM1 can manage the resources in RG1 by using the identity of VM1. *** (this is saying that you need to ensure that it can, that it needs to be done by using the identity, no mention of there already being anything done to enable the identity)\nUltimately though it comes down to semantics and it is frustrating when MS gives questions that this that could be interpreted in more than one way with arguably egual validity - would be much better if they were completely clear and we can just be tested on knowledge and not second guessing what the question writer was thinking.","poster":"PDR","comment_id":"38552","timestamp":"1578935400.0"}]},{"content":"I tend to agree with you.","poster":"2cool2touch","upvote_count":"2","comment_id":"34613","timestamp":"1577985600.0"},{"poster":"Centrifuge","timestamp":"1596809040.0","upvote_count":"2","comment_id":"152582","content":"Agreed -- but \"create\" is not the same thing as \"modify\"! Modify means it has already been created, and would imply that adding the permissions should be done in the Service Identity -- which is absolutely wrong! I have to agree with others that given the way the question is worded, A is the correct answer. But then, Microsoft does like to make really fuzzy questions like this."}],"content":"The question asks what should you do first. Sure, Access control (IAM) needs to be done, but not first. Before you can modify access, you need to create a service principle to manage that access for. The correct answer is indeed 'D' - you need to set this up with a Managed Service Identity first.\n\nHow a system-assigned managed identity works with an Azure VM:\n\n1. Azure Resource Manager receives a request to enable the system-assigned managed identity on a VM.\n\n2. Azure Resource Manager creates a service principal in Azure AD for the identity of the VM. The service principal is created in the Azure AD tenant that's trusted by the subscription.\n\n3. Azure Resource Manager configures the identity on the VM by updating the Azure Instance Metadata Service identity endpoint with the service principal client ID and certificate.\n\n4. After the VM has an identity, use the service principal information to grant the VM access to Azure resources. To call Azure Resource Manager, use role-based access control (RBAC) in Azure AD to assign the appropriate role to the VM service principal. To call Key Vault, grant your code access to the specific secret or key in Key Vault.","upvote_count":"44"},{"upvote_count":"9","timestamp":"1579558680.0","poster":"AS007","comment_id":"41113","content":"Its \"D\" \nReason - \"manage the resources in RG1 by using the identity of VM1\"\nIt never says that managed identity is enabled. \nProcess is : \n1. Enable Managed Identity on VM. \n2. Modify IAM. \n3. Enable Required Access"},{"poster":"azurecert2021","timestamp":"1610742360.0","comment_id":"268236","content":"given answer is correct.","upvote_count":"1"},{"comment_id":"181003","timestamp":"1600351680.0","poster":"MMohammad","content":"You can go to the Identity section of the virtual machine and enable the service identity for the virtual machine.","upvote_count":"1"},{"upvote_count":"2","content":"The Correct Answer Is: D","poster":"MMohammad","timestamp":"1600350660.0","comment_id":"180979"},{"timestamp":"1598479260.0","content":"Answer is D:\nBy default for any VM the managed identity option is set to OFF, you need to modify the status to ON that will create the identity for the VM in Azure AD.Later you can refer the identity while providing the access to resource through RBAC ( it's Authentication then Authorization).\nAzure portal ->VM->Settings(Identity)->system assigned -> status (ON).","comment_id":"167132","poster":"Raj2020","upvote_count":"3"},{"upvote_count":"2","content":"D is correct","poster":"JitheshT","timestamp":"1597792560.0","comment_id":"161144"},{"comment_id":"126010","poster":"DeveshSolanki","timestamp":"1593850920.0","upvote_count":"2","content":"D. From the Azure portal, modify the value of the Managed Service Identity option for VM1."},{"comment_id":"115489","poster":"Chokies","upvote_count":"1","content":"answer is D -- keyword is \"services inside the vm\"","timestamp":"1592738100.0"},{"comment_id":"103265","timestamp":"1591373460.0","upvote_count":"1","poster":"JK2","content":"AS077 is correct and therefore D is the correct answer."},{"comment_id":"83232","poster":"Pankaj7121","content":"I think answer is D","upvote_count":"1","timestamp":"1588536660.0"},{"content":"that is D","poster":"joilec435","upvote_count":"1","comment_id":"77035","timestamp":"1587398460.0"},{"content":"The question doesn't say that the Managed Identity is enabled. This is a prerequisite.","timestamp":"1586927100.0","comment_id":"74712","poster":"TYT","upvote_count":"1"},{"upvote_count":"1","timestamp":"1583996580.0","comment_id":"62858","poster":"Protonenpaule","content":"D is correct, which is a prerequisit to successfully implement https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/tutorial-linux-vm-access-arm"},{"upvote_count":"2","timestamp":"1583582820.0","comment_id":"60293","poster":"starnb","content":"The correct answer is D since the Managed Identities provide Service Principles without need to store Passwords in Key Vault, Config Files or Databases."},{"timestamp":"1581946560.0","upvote_count":"1","comment_id":"51662","content":"Andswer is D , 100%.","poster":"Samin"},{"comment_id":"36509","poster":"superbutt","timestamp":"1578436980.0","content":"A is correct","upvote_count":"2"},{"upvote_count":"2","content":"A is correct","poster":"Amrinder101","timestamp":"1576369440.0","comments":[{"content":"Answer is 'D', just tested it, you can't assign role assignment to RG without first setting up Managed Service Identity of VM","poster":"Len","upvote_count":"2","timestamp":"1594838040.0","comment_id":"135957"}],"comment_id":"29637"},{"upvote_count":"1","comment_id":"27269","comments":[{"timestamp":"1596808860.0","content":"Problem is the question did not provide an answer option of \"create Managed Service Identity\". Answer D says to \"modify the value\" -- which would imply that the Service Identity is already configured and just needs to be added to IAM. Am I missing something here?","comment_id":"152581","poster":"Centrifuge","upvote_count":"3"},{"timestamp":"1599517560.0","comment_id":"175437","upvote_count":"2","content":"D is ok","poster":"tartar"}],"timestamp":"1575648780.0","content":"I believe it's A. I just did it through Azure portal, RG, IAM, add role assignment choosing my VM1","poster":"Musk"}],"exam_id":50,"timestamp":"2019-12-06 17:13:00","answer_ET":"D","answer_images":[],"question_images":[],"question_text":"You have an Azure subscription named Subscription1 that contains an Azure virtual machine named VM1. VM1 is in a resource group named RG1.\nVM1 runs services that will be used to deploy resources to RG1.\nYou need to ensure that a service running on VM1 can manage the resources in RG1 by using the identity of VM1.\nWhat should you do first?","answers_community":[]},{"id":"sixAyKONW8HiTm6DJQpJ","question_images":["https://www.examtopics.com/assets/media/exam-media/02758/0019100001.png","https://www.examtopics.com/assets/media/exam-media/02758/0019200001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0019300001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0019400001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0019500001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0019600001.jpg"],"discussion":[{"timestamp":"1572953280.0","comment_id":"19318","comments":[{"poster":"MaheshBeeravelli","timestamp":"1573993440.0","content":"Yes Stadard SSD must be chosen for IOPS and reduce cost as all types support disk size 32,767 GiB so there won't be a problem with 15TB.\nhttps://docs.microsoft.com/en-us/azure/virtual-machines/windows/disks-types","comments":[{"comments":[{"upvote_count":"6","timestamp":"1574792940.0","comments":[{"timestamp":"1594574040.0","content":"don't think it's good to run all time disk iops with its max performance( 2k IOPS). so ssd is better.","comment_id":"133094","poster":"nabylion","upvote_count":"4"}],"poster":"MarcoZ","content":"you mean S70 Standard HDD, it supports up to 16TB","comment_id":"24670"}],"content":"I guess, Standard HDD should be selected instead of SSD. As mahesh mentioned 32767 is supported by standard HDD S80. It has a max of 2000 IOPS","upvote_count":"2","poster":"[Removed]","comment_id":"23145","timestamp":"1574281860.0"}],"upvote_count":"5","comment_id":"22171"}],"content":"\"The data disk must be able to provide at least 2,000 IOPS\" - Standard HDD (S70) has max IOPS of 2000. Standard SSD (E70) should be chosen","upvote_count":"23","poster":"cloudnoob19"},{"content":"1. Create a VM with Ubuntu image\n 2. For the O/S disk, use a Standard HDD (minimizing costs)\n 3. For the data disk, use a Standard SSD and size of 16384 GiB (E70) as you must provide \"at least 2,000 IOPS\" and 15TB data. Note: The Standard HDD provides a max of 2,000 IOPS which doesn't meet the \"at least\" requirement.\nExpand Advanced and ensure that \"Use managed disks\" is enabled (should this be disabled to meet minimize costs requirement?)","upvote_count":"13","comments":[{"comment_id":"109145","poster":"NKnab","content":"Managed disk is cheaper as per azure","timestamp":"1592016960.0","upvote_count":"1"}],"comment_id":"51750","timestamp":"1581958980.0","poster":"SilentH"},{"poster":"rs_s","content":"can someone confirm if the given answer is correct please? or is there a different answer?","timestamp":"1600795800.0","upvote_count":"1","comment_id":"184628"},{"poster":"nexus2020","comment_id":"177190","upvote_count":"1","content":"1TB = 1024 GB, so 15TB = 15 * 1024 GB = 15360 GB","timestamp":"1599752520.0"},{"content":"What would be right size ?","upvote_count":"1","timestamp":"1596230100.0","comment_id":"148267","poster":"uhclstud"},{"content":"Hello guys, does the VM size you select in the first tab affect this? or is it strictly dependent on the disk size?","timestamp":"1594902060.0","poster":"Harvard","upvote_count":"1","comments":[{"content":"Yes it has affect on the overall perfor,ance of the disks as well. Below you can find a Q&A section that is related with this:\n\"What are the recommended VM sizes for larger disk sizes (>4 TiB) for Standard SSD and Standard HDD disks to achieve optimized disk IOPS and Bandwidth?\n\nTo achieve the disk throughput of Standard SSD and Standard HDD large disk sizes (>4 TiB) beyond 500 IOPS and 60 MiB/s, we recommend you deploy a new VM from one of the following VM sizes to optimize your performance: B-series, DSv2-series, Dsv3-Series, ESv3-Series, Fs-series, Fsv2-series, M-series, GS-series, NCv2-series, NCv3-series, or Ls-series VMs. Attaching large disks to existing VMs or VMs that are not using the recommended sizes above may experience lower performance.\"\n\nAlso VM size menu gives you the max IOPS so in my opinion both VM size and Disk size has to meet the IOPS requirement.","timestamp":"1595341920.0","upvote_count":"1","comment_id":"140366","poster":"ercank"}],"comment_id":"136451"},{"comments":[{"content":"and this questions wants to have 2000 as a minimum but realistically it wants more so Standard HDD is no the option. E70 is the correct disk option","poster":"macco455","timestamp":"1597340700.0","upvote_count":"1","comment_id":"157536"}],"poster":"ArulLivingston","comment_id":"100704","upvote_count":"2","content":"Standard HDD supports upto 2000 IOPS https://docs.microsoft.com/en-us/azure/virtual-machines/windows/disks-types","timestamp":"1591089240.0"},{"content":"Question is only create VM not specific environments.\nStandard HDD S70 = US$655.36\nStandard SDD E70 = US$1,228.80\nas per cost S70 disk is right.","comments":[{"content":"-> The data disks must be able to provide at least 2.000 IOPS\n\"at least\" E70 is correct","poster":"vladex","upvote_count":"2","timestamp":"1595868060.0","comment_id":"145147"}],"upvote_count":"4","timestamp":"1590899760.0","poster":"kondapaturi","comment_id":"99123"},{"timestamp":"1589394960.0","upvote_count":"2","poster":"mohamadakl","content":"To Minimize the cost Standard HDD : Max IOPS 2,000\nhttps://docs.microsoft.com/en-us/azure/virtual-machines/windows/disks-types","comments":[{"content":"Did you not read the question ?\nIt says \"at least 2,000 IOPS\" which is the absolute maximum throughput for standard HDD's. You have to use standard SSD's if you want to \"at least\" or \"minimum\" get 2,000 IOPS","comment_id":"90506","timestamp":"1589712540.0","poster":"PatMan","upvote_count":"3","comments":[{"comment_id":"116364","timestamp":"1592826060.0","content":"But one can use 2xS60 in striping configuration. The size of Data volume/disk would be 16T and the number of iops shoud be 2x1300.","poster":"jadi11","upvote_count":"1"}]}],"comment_id":"88422"},{"timestamp":"1588746240.0","content":"Standard SSD E70 should be the right choice","upvote_count":"1","comment_id":"84450","poster":"huyhoang8344"},{"poster":"TYT","timestamp":"1587693120.0","comment_id":"78905","upvote_count":"6","content":"Go to the VM, Disks, Add a new disk:\nWe have to select Standard because of costs - Now: Standard SSD v Standard HDD\nBoth are cost efficient. The closest options are SSD: E70 ( 4000 IOPS, 16384 GiB close to 15TB), HDD (Max IOPS: 2000, 16384 GiB close to 15TB).\n \nTwo things to note: HDD is preferred for Dev/Test although it doesn't say in the question. SSD is preferred to provide consistent performance at lower costs.\nThe Q says At least 2000 IOPS - so if you select HDD, you need to go for S80 because of IOPS which might actually increase the costs, plus you are paying for twice of 15 TB for nothing. IOPS will be ATMOST 2000 - not ideal.\n\nThe best and close option would be to select SSD - Standard - E70. IMO."},{"poster":"satgo","content":"Disk size in GiB. So need to convert to TB. 1 TB = 931.32257461548 GiB, 15 TB = 13969.838619232 GiB.","comment_id":"72434","timestamp":"1586366580.0","upvote_count":"1"},{"comments":[{"upvote_count":"2","timestamp":"1585807680.0","comment_id":"70354","content":"You should use a disk with at least 2000iops, so the answer is NO, Standard E70 should be the right answer, 16Gb space, 4000IOPS","poster":"manhattan"}],"timestamp":"1585542540.0","content":"for the VM Size, Can I Use \"Standard A1 v2\" since it is the cheapest ?","comment_id":"69432","upvote_count":"1","poster":"LoveAZ"},{"timestamp":"1582937880.0","upvote_count":"1","poster":"Mher","comment_id":"56680","content":"Standard SSD sizes E70 Up to 4,000 iops- dated 11/04/2019"},{"comment_id":"48039","upvote_count":"11","content":"They want a \"data\" disk of 15TB, not an OS disk. Why can't you choose your VM image and add \"Data disks\" on the disks tab). I think this is correct.\nOn Disks tab click on Create and attach a new disk, name your new data disk, assign the size by clicking \"change size\" and choose an account type of Standard HDD to minimize cost, 16384 GiB as the size with Max IOPS of 2000.","timestamp":"1581188220.0","poster":"FailureIsnotAnOption"},{"upvote_count":"1","comment_id":"44898","timestamp":"1580402280.0","poster":"VRD13","content":"Price of E70 - $1,228.80\nPrice of P70 - $1,638.40\nSo E70 drive if it have to be single!\nAnother solution could be Storage Pool using 2x S60 drives, what will costs you only 2x $262.14 = $524.28 and give up to 2600 iops (in pool) since each disk will do 1300 iops."},{"upvote_count":"8","poster":"Ekramy_Elnaggar","comment_id":"29571","timestamp":"1576332180.0","content":"Update: numbers changed , so we have the following new limits :\nStandard HDD: Up to [ 32K GiB , 500 MiB/s , 2K IOPS ]\nStandard SSD: Up to [ 32K GiB , 750 MiB/s , 6K IOPS ]\nPremium SSD: Up to [ 32K GiB , 900 MiB/s , 20K IOPS ]\nUltra Disk: Up to [ 65K GiB , 2K MiB/s , 160K IOPS ]\n\nRef: https://docs.microsoft.com/en-us/azure/virtual-machines/windows/disks-types"},{"comments":[{"poster":"Cloudcrawler","content":"I gues the requirement is to get a SLA of 200IOPS in a managed disk, you ned to use Premium Disks. Std SSD dont provide SLA on IOPS","comment_id":"164399","timestamp":"1598186280.0","upvote_count":"1"}],"upvote_count":"2","comment_id":"29568","poster":"Ekramy_Elnaggar","timestamp":"1576331220.0","content":"Standard HDD: up to 1.3K IOPS\nStandard SSD: up to 2K IOPS\nPremium SSD: up to 16K IOPS\n\nso in order to minimize the costs and also achieve the 2K IOPS >> Standard SSD"},{"content":"The Q mention about at least 2000 of IOPS so i would say that Standard HDD is not the right one since has max. 2000 of IOPS. I would go with Standard SSD.","comments":[{"timestamp":"1575793380.0","upvote_count":"2","comment_id":"27794","content":"If S70 meets the minimum IOPS, it is the right choice because it’s cheaper than SSD.","poster":"Musk"},{"timestamp":"1591706820.0","comment_id":"105983","poster":"jayrush","content":"yea you have a point here, if the word was at most 2000 of IOPS then i would say Std HDD. But since it is at least 2k IOPS then Std SSD is most suited as it can be lower than 2K IOPS.","upvote_count":"1"}],"timestamp":"1575015660.0","upvote_count":"7","poster":"Adrian1405","comment_id":"25164"},{"timestamp":"1571982300.0","poster":"mm2","upvote_count":"3","content":"disk should be managed. when the size which allows the proper IOPS is selected for system disk choose standard hdd as there is statement \"reduce costs\". for 15TB disk you need to check which disk tipe standard hdd, standard/premium ssd is >= 2k IOPS (and choose the cheapest)","comment_id":"17317"}],"isMC":false,"answer_images":[],"question_id":57,"answers_community":[],"topic":"1","unix_timestamp":1571982300,"exam_id":50,"answer_description":"Step 1: Open the Azure portal.\nStep 2: On the left menu, select All resources. You can sort the resources by Type to easily find your images.\nStep 3: Select the image you want to use from the list. The image Overview page opens.\nStep 4: Select Create VM from the menu.\nStep 5: Enter the virtual machine information. Select VM1004a as the name for the first Virtual machine.The user name and password entered here will be used to log in to the virtual machine. When complete, select OK. You can create the new VM in an existing resource group, or choose Create new to create a new resource group to store the VM.\nStep 6: Select a size for the VM. To see more sizes, select View all or change the Supported disk type filter.To support 15 TB of data you would need a Premium disk.\nStep 7: Under Settings, make changes as necessary and select OK.\nStep 8: On the summary page, you should see your image name listed as a Private image. Select Ok to start the virtual machine deployment.\nReferences:\nhttps://docs.microsoft.com/en-us/azure/virtual-machines/windows/create-vm-generalized-managed","timestamp":"2019-10-25 07:45:00","answer":"See solution below.","question_text":"SIMULATION -\nClick to expand each objective. To connect to the Azure portal, type https://portal.azure.com in the browser address bar.\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\nWhen you are finished performing all the tasks, click the \"˜Next' button.\nNote that you cannot return to the lab once you click the \"˜Next' button. Scoring occur in the background while you complete the rest of the exam.\n\nOverview -\nThe following section of the exam is a lab. In this section, you will perform a set of tasks in a live environment. While most functionality will be available to you as it would be in a live environment, some functionality (e.g., copy and paste, ability to navigate to external websites) will not be possible by design.\nScoring is based on the outcome of performing the tasks stated in the lab. In other words, it doesn't matter how you accomplish the task, if you successfully perform it, you will earn credit for that task.\nLabs are not timed separately, and this exam may have more than one lab that you must complete. You can use as much time as you would like to complete each lab. But, you should manage your time appropriately to ensure that you are able to complete the lab(s) and all other sections of the exam in the time provided.\nPlease note that once you submit your work by clicking the Next button within a lab, you will NOT be able to return to the lab.\n\nTo start the lab -\nYou may start the lab by clicking the Next button.\nYou need to deploy an Azure virtual machine named VM1004a based on an Ubuntu Server image, and then to configure VM1004a to meet the following requirements:\n- The virtual machines must contain data disks that can store at least 15 TB of data\n- The data disk must be able to provide at least 2,000 IOPS\n- Storage costs must be minimized\nWhat should you do from the Azure portal?","answer_ET":"See solution below.","url":"https://www.examtopics.com/discussions/microsoft/view/7187-exam-az-300-topic-1-question-60-discussion/"},{"id":"pJsS9lN2F7P7bOcwKaPo","topic":"1","question_id":58,"answer_images":[],"answers_community":[],"question_text":"SIMULATION -\nClick to expand each objective. To connect to the Azure portal, type https://portal.azure.com in the browser address bar.\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\nWhen you are finished performing all the tasks, click the \"˜Next' button.\nNote that you cannot return to the lab once you click the \"˜Next' button. Scoring occur in the background while you complete the rest of the exam.\n\nOverview -\nThe following section of the exam is a lab. In this section, you will perform a set of tasks in a live environment. While most functionality will be available to you as it would be in a live environment, some functionality (e.g., copy and paste, ability to navigate to external websites) will not be possible by design.\nScoring is based on the outcome of performing the tasks stated in the lab. In other words, it doesn't matter how you accomplish the task, if you successfully perform it, you will earn credit for that task.\nLabs are not timed separately, and this exam may have more than one lab that you must complete. You can use as much time as you would like to complete each lab. But, you should manage your time appropriately to ensure that you are able to complete the lab(s) and all other sections of the exam in the time provided.\nPlease note that once you submit your work by clicking the Next button within a lab, you will NOT be able to return to the lab.\n\nTo start the lab -\nYou may start the lab by clicking the Next button.\nYou plan to create 100 Azure virtual machines on each of the following three virtual networks:\n- VNET1005a\n- VNET1005b\n- VNET1005c\nAll the network traffic between the three virtual networks will be routed through VNET1005a.\nYou need to create the virtual networks, and then to ensure that all the Azure virtual machines can connect to other virtual machines by using their private IP address. The solutions must NOT require any virtual gateways and must minimize the number of peerings.\nWhat should you do from the Azure portal before you configuring IP routing?","discussion":[{"comments":[{"comments":[{"comments":[{"content":"You need to create the virtual networks, and then to ensure that all the Azure virtual machines can connect to other virtual machines by using their private IP address.","poster":"Strifelife","upvote_count":"1","timestamp":"1581447900.0","comment_id":"49232"}],"poster":"GreyHawken","content":"Don't think it matters they are not transitive. \"All the network traffic between the three virtual networks will be routed through VNET1005a.\" C and B should never need to talk to each other aka no need for peerings between them.","comment_id":"48084","upvote_count":"8","timestamp":"1581202860.0"},{"upvote_count":"1","poster":"keithtemplin","comment_id":"83241","content":"I thought that too however it states all traffic must go through VNET1005a","timestamp":"1588537740.0"}],"upvote_count":"6","poster":"dfrye","content":"Peerings are NOT transitive, so I believe we need to create peerings between all vnets. \n\"solution must minimize the number of peerings\" is here just to trick the student I think","comment_id":"47816","timestamp":"1581108240.0"},{"comments":[{"poster":"jonnybugaloo","upvote_count":"1","comment_id":"109745","timestamp":"1592089260.0","content":"Correct. IP routing directing traffic from B to C will be possible when we create some NVA, which is not a step for this question."}],"content":"Thank you Ekramy_Elnaggar! This is the correct answer.\nAccording to the requirements, we should create a classic HUB-and-SPOKE topology with NVA as a router. Since the question is \"What should you do before you configuring IP routing\", then all we need is just to create 3 VNets, configure peering B <-> A <-> C, and allow forwarded traffic on peerings A->B and A->C","poster":"Andy001","comment_id":"49828","upvote_count":"11","timestamp":"1581568500.0"},{"comment_id":"128991","timestamp":"1594128120.0","upvote_count":"2","content":"Related to this question, it should be enough, but after that, you should \n- Enable IP Forwarding on vNic that belongs to VM that will be at VNET1005a, to act as a router.\n- Create a route table with UDR for spoke vnets.\n- Create a Firewall Rule that allows icmpv4 on all VMs.","poster":"jmprbridge"},{"comment_id":"133113","content":"Agree with Ekramy_Elnaggar.","poster":"praveen97","timestamp":"1594575300.0","upvote_count":"1"}],"poster":"Ekramy_Elnaggar","comment_id":"29581","upvote_count":"110","timestamp":"1576335000.0","content":"The question said: \"before you configuring IP routing\" , so it should be as follows:\n1- Create the 3 VNETs ( if not done already )\n2- Create VNet Peering between VNET1005a & VNET1005b ( 2-way )\n3- on VNET1005b Peering, enable \"Allow forwarded traffic from VNET1005a toVNET1005b\"\n4- Create VNet Peering between VNET1005a & VNET1005c ( 2-way )\n5- on VNET1005c Peering, enable \"Allow forwarded traffic from VNET1005a to VNET1005c\""},{"poster":"Benkyoujin","timestamp":"1576154220.0","content":"Peer with the hub and allow forwarded traffic and add UDRs. No gateway settings as the question explicitly says no VPN. Right?","comment_id":"29040","upvote_count":"6"},{"content":"Guys, I have been able to prove this in lab this is possible.\n1. 2 way peering between a-c and a-b with fwd enabled on both sides.\n2. VMA working as NVA with IP FWD in enabled both in azure and at OS.\n3. Route table with two routes with below details.\na. Address Prefix Adress space of VNETC(traffic B 2 C)\nNext hop virtual appliance\nnext hop address ip of NVA VM in VNETA\nb. same as (a) for traffic from C to B\n4. on Subnets in B and C choose this route table.\nThat is it, it works. Let me know if you find issues.","upvote_count":"1","timestamp":"1601575020.0","comment_id":"191110","poster":"Himanshu27"},{"upvote_count":"1","comment_id":"180130","timestamp":"1600222500.0","poster":"samhouston","content":"vnet peering is non transitive unless you install a FW in a hub or any VA which can route the traffic. This is known feature/limitation of the vnet peering."},{"upvote_count":"1","poster":"Bart78","content":"create 3 VNETS but create the peering from C & B to A with Allow forwarded traffic from enabled on both peerings This will make sure traffic forwarded into the A subnet will be forwarded to C or B . Creating the peering from the A subnet won't allow you to create that forwarding because the peering is created from the wrong direction.","comment_id":"179758","timestamp":"1600158780.0"},{"poster":"nabylion","content":"The gateway transit setting requires there to be a gateway in one virtual network in the peering... so use peering, and don't consider transit as question asks to not create gateway...","comment_id":"169591","timestamp":"1598737380.0","upvote_count":"1"},{"timestamp":"1597177380.0","content":"I believe 2 peerings only is the correct answer. No need to \"allow forwarded traffic\" because the forwarded traffic is not originated inside the vnet where the traffic is coming from. Router will do the routing task forwarding traffic from B to C and viceversa","upvote_count":"1","poster":"trazanet","comment_id":"155829"},{"upvote_count":"1","comment_id":"152647","poster":"ercank","content":"I setup the whole architecture including routing tables but without 3 Peerings it is not working. When 3 peerings avaible I am testing NVA with traceroute and it is actually routing the traffic over NVA but when I disable the peering between VNET1005b&c it is failing to complete the loop.\n2 peerings between VNET1005a to *b and *c looks enough but practically it is not working. May be the problem is at traceroute, it may not be correct tool. Do you have any suggestion how to test this setup with 2 peerings to see if it actually works or not?","comments":[{"comment_id":"152725","upvote_count":"3","poster":"ercank","timestamp":"1596831420.0","content":"sorry guys for the incovenience but I redeployed the same setup this time it worked. So prevously shared below answer is correct:\n1- Create the 3 VNETs ( if not done already )\n2- Create VNet Peering between VNET1005a & VNET1005b ( 2-way )\n3- on VNET1005b Peering, enable \"Allow forwarded traffic from VNET1005a toVNET1005b\"\n4- Create VNet Peering between VNET1005a & VNET1005c ( 2-way )\n5- on VNET1005c Peering, enable \"Allow forwarded traffic from VNET1005a to VNET1005c\""}],"timestamp":"1596820020.0"},{"timestamp":"1596159360.0","upvote_count":"2","poster":"bamboo","content":"1- Create the 3 VNETs ( if not done already )\n2- Create VNet Peering between VNET1005a & VNET1005b ( 2-way )\n3- on VNET1005b Peering, enable \"Allow forwarded traffic from VNET1005a toVNET1005b\"\n4- Create VNet Peering between VNET1005a & VNET1005c ( 2-way )\n5- on VNET1005c Peering, enable \"Allow forwarded traffic from VNET1005a to VNET1005c\"","comment_id":"147752"},{"content":"Either 6 peerings (3 pairs), or a hub and spoke config with 4 peerings and a NVA deployed in the Hub VNet","poster":"X_L","timestamp":"1594399020.0","comment_id":"131610","upvote_count":"1"},{"poster":"SumanCert","content":"Connection Monitor allows you to monitor connectivity and latency between a VM and another network resource.\nPacket Capture enables you to capture all traffic on a VM in your virtual network.\n\nRef: https://docs.microsoft.com/en-us/azure/network-watcher/frequently-asked-questions","comment_id":"127359","timestamp":"1594000680.0","upvote_count":"1"},{"upvote_count":"1","poster":"JCase","timestamp":"1591894140.0","comment_id":"107949","content":"Read this, it's this very question \"Allow forwarded Traffic\" topic here: https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-manage-peering"},{"comment_id":"103786","timestamp":"1591449660.0","content":"I tried it out. \nI' ve setup 3 Vnets including peerings a><b* and a><c* including forward traffic a>b and a>c \nafter that I deployed a vm into each vnet.\n*(e.g. a><b means \"a to b\" and \"b to a\") \n\nResult:\nVnet1 + subnet: 10.1.0.0, with a vm1 ip 10.1.0.4 \nVnet2 + subnet: 10.2.0.0, with a vm2 ip 10.2.0.4\nVnet3 + subnet: 10.3.0.0, with a vm3 ip 10.3.0.4\n\nThan went to vm2 Blade > Settings Connect > Link \"Test your Connection\" > Tab Outbound and tried to connect to vm3 (10.3.0.4) via port 22.\n\nConnection Error: \"Network connectivity blocked by security group rule: DefaultRule_DenyAllOutBound\". Follow the link below the error. \n\nThere I switch to the NSG of Vnet2 and added an outbound rule: port: \"any\" source: \"virtual network\" to \"any\".\n\nAfter that tried to reconnect and the request went through. \n==> Conclusion: No user defined routing tables (UDR) nor Virtual Appliance with forwarding were required.\n\nTry it you self.","upvote_count":"1","poster":"denkes"},{"comment_id":"103784","poster":"denkes","timestamp":"1591449540.0","upvote_count":"4","comments":[{"poster":"ercank","content":"I did myself as well. Test your connection indeed throws the same error you got but it is meaningless. Even I create a new rule to overwrite it but again it failed as it supposed to be. Anyway I agree with above comments that 2 peerings with traffic forwarding reuquired before NVA stage but NVA is a must to accomplish this routing to happen.","upvote_count":"1","timestamp":"1595362800.0","comment_id":"140587"}],"content":"I tried it out. \nI' ve setup 3 Vnets including peerings a><b* and a><c* including forward traffic a>b and a>c \nafter that I deployed a vm into each vnet.\n*(e.g. a><b means \"a to b\" and \"b to a\") \n\nResult:\nVnet1 + subnet: 10.1.0.0, with a vm1 ip 10.1.0.4 \nVnet2 + subnet: 10.2.0.0, with a vm2 ip 10.2.0.4\nVnet3 + subnet: 10.3.0.0, with a vm3 ip 10.3.0.4\n\nThan went to vm2 Blade > Settings Connect > Link \"Test your Connection\" > Tab Outbound and tried to connect to vm3 (10.3.0.4) via port 22.\n\nConnection Error: \"Network connectivity blocked by security group rule: DefaultRule_DenyAllOutBound\". Follow the link below the error. \n\nThere I switch to the NSG of Vnet2 and added an outbound rule: port: \"any\" source: \"virtual network\" to \"any\".\n\nAfter that tried to reconnect and the request went through. \n==> Conclusion: No user defined routing tables (UDR) nor Virtual Appliance with forwarding were required.\n\nTry it you self."},{"timestamp":"1591018200.0","poster":"daniel840829","comments":[{"content":"Rule 1 and 2 are nor clear, please give more steps","comment_id":"102503","upvote_count":"1","poster":"kondapaturi","timestamp":"1591289160.0"}],"upvote_count":"2","content":"b&a c&a 2 peerings both need to enable forwarded traffic\ncreate route table\nRule 1: dest:VNET1005b ip range, next hop:VNET, vnet:VNET1005a \nRule 2: dest:VNET1005c ip range, next hop:VNET, vnet:VNET1005a\napply this route table to b and c","comment_id":"100031"},{"upvote_count":"2","content":"in Addition to Sun_mon instruction you will need to add a VM in VNET1005a and enable IP-Forwarding on it's NIC, since this VM will Acct as a router","timestamp":"1590578880.0","poster":"samco","comment_id":"96745"},{"content":"Assumptions: VNETS already present.\n\n1. Create Peering between A <-> B\n2. Make sure to allow VNET access as enabled A to B and B to A\n3. As traffic needs to flow through A, you have to allow forwarded traffic from A to B.\n\nRepeat the same steps to create peering between A <-> C\n\nYou don't need any peering between B <-> C because traffic can flow through A. However, creating a Peering between B <-> C doesn't harm as far as I know.\n\nIf the assumption is wrong that VNETs exist, create three VNETs with non-overlapping addresses and create subnets.","timestamp":"1587693900.0","comment_id":"78910","comments":[{"upvote_count":"8","poster":"Sun_mon","content":"The question said: \"before you configuring IP routing\" , so it should be as follows:\n1- Create the 3 VNETs ( if not done already )\n2- Create VNet Peering between VNET1005a & VNET1005b ( 2-way )\n3- on VNET1005b Peering, enable \"Allow forwarded traffic from VNET1005a toVNET1005b\"\n4- Create VNet Peering between VNET1005a & VNET1005c ( 2-way )\n5- on VNET1005c Peering, enable \"Allow forwarded traffic from VNET1005a to VNET1005c\"","timestamp":"1588155060.0","comment_id":"81203"}],"upvote_count":"1","poster":"TYT"},{"poster":"djchinzz","content":"You're on the right path mate. This all needs to be ARM; when you peer VNET A and B, all you need to do is select \"Allow virtual network access from VNET A/B = Enabled\" for the peering between A and B and B and A. Then, for the peering between B and A only, select \"Allow forwarded traffic from VNETA = Enabled\".\n\nYou don't need any peering between B and C.\nAllow forwarded traffic means that traffic not originating from VNET A (so VNET C) is allowed to come into VNET B.\n\nRepeat the same process between B and C. Then you'll have a hub and spoke design. Traffic from B will get to C via A. Because you're not traversing any traffic to ExpressRoute or a VPN or a classic VNET, you don't need any gateway.","upvote_count":"2","comment_id":"76336","timestamp":"1587291240.0"},{"comment_id":"75388","upvote_count":"1","content":"Deploy VNET A, B and C. Create Vnet peerings A<->B and B<->C and viceversa. Allow \"Forwarded Traffic\" in each peerings.","timestamp":"1587058020.0","poster":"milind8451","comments":[{"comment_id":"75794","upvote_count":"2","timestamp":"1587139800.0","content":"You need to create AB and AC.","poster":"TYT"}]},{"poster":"manhattan","content":"In my opinion, two peering are enough, just activate the forwarding on both sides \"Configure forwarded traffic settings= This setting allows forwarded traffic from one Net to another net\"","timestamp":"1585840980.0","comment_id":"70464","upvote_count":"1"},{"comment_id":"68424","content":"If you require connectivity between spokes, consider deploying Azure Firewall or an NVA for routing in the hub, and using UDRs in the spoke to forward traffic to the hub. The deployment steps below include an optional step that sets up this configuration.\n\nRef: https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/hybrid-networking/hub-spoke","timestamp":"1585248480.0","poster":"azstudent101","upvote_count":"2"},{"poster":"silverdeath","comment_id":"67795","timestamp":"1585055700.0","upvote_count":"1","content":"spoke and hub topology, create the 3 Vnets, enable peering between spokes and hub and enable the ip forwarding in the hub, that's all before configuring the IP forwarding"},{"timestamp":"1584189900.0","poster":"braddo94","comments":[{"timestamp":"1593989940.0","comment_id":"127273","poster":"Test_Taker","content":"I tend to agree with this as peerings have entries in the route tables.\nBut it did say we should use the minimum number of peerings... guess zero is a minimum lol\nThe question is trying to be too tricky....","upvote_count":"1"}],"content":"question states 'What should you do from the Azure portal before you configure IP routing?' so potentially creating the 3 x VNET's is enough?","comment_id":"63855","upvote_count":"1"},{"poster":"Daren","timestamp":"1584037320.0","content":"I think we should create 2 peering (from hub to each spoke), Allow forwarded Traffic on each peering, create a VM in the hub which will act as a router, then create UDR on each spoke to force the traffic to that VM(router) in Hub.","comment_id":"63205","upvote_count":"1"},{"upvote_count":"2","poster":"heftjustice","content":"This is not possible via \"forwarded traffic\" you need NVA for that. Best is to use VNG for large no of spokes or peer directly if the spokes are less.","timestamp":"1582579560.0","comment_id":"54717"},{"timestamp":"1575963540.0","poster":"chris46","upvote_count":"3","content":"Create a peer set to both other vnets from VNET1005a. Allow Gateway Transit","comment_id":"28496"},{"poster":"Oz","content":"I have better reference for hub and spoke VNET topology:\nhttps://docs.microsoft.com/en-us/azure/architecture/reference-architectures/hybrid-networking/hub-spoke?toc=%2fazure%2fvirtual-network%2ftoc.json\nIt has more generic topology for hybrid on-premises network with hub and 2 spokes.\nHowever, it has setting \"allow forwarded traffic\" set for all peering connections to allow traffic flow from spoke to spoke via hub.","upvote_count":"3","timestamp":"1571679240.0","comment_id":"16479","comments":[{"poster":"mm2","comment_id":"17318","upvote_count":"5","content":"not sure if without GW you are able to achieve this. I was unlucky with allow forwarded traffic","timestamp":"1571982360.0"},{"comments":[{"timestamp":"1575798540.0","upvote_count":"1","comment_id":"27800","poster":"Musk","content":"Unlucky too"}],"content":"I’ll try it","comment_id":"27795","timestamp":"1575793620.0","poster":"Musk","upvote_count":"1"},{"poster":"manu202020","timestamp":"1598359320.0","content":"NA in this scenario","comment_id":"165977","upvote_count":"1"}]},{"comments":[{"poster":"epomatti","timestamp":"1592679720.0","content":"The SO link is correct, it is impossible to create such configuration.\nI guess for the answer we create the peerings and go with it... question is incorrect.","upvote_count":"1","comment_id":"114950"}],"content":"This explanation might be useful: https://stackoverflow.com/questions/55582611/create-3-vnets-where-all-traffic-is-routed-through-one-vnet-hub-and-spoke","comment_id":"12288","timestamp":"1569242220.0","upvote_count":"1","poster":"NS"}],"answer_ET":"See solution below.","question_images":["https://www.examtopics.com/assets/media/exam-media/02758/0019900001.png","https://www.examtopics.com/assets/media/exam-media/02758/0020000001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0020100001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0020200001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0020300001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0020400001.jpg"],"isMC":false,"url":"https://www.examtopics.com/discussions/microsoft/view/5605-exam-az-300-topic-1-question-61-discussion/","timestamp":"2019-09-23 14:37:00","answer":"See solution below.","unix_timestamp":1569242220,"answer_description":"Step 1: Click Create a resource in the portal.\nStep 2: Enter Virtual network in the Search the Marketplace box at the top of the New pane that appears. Click Virtual network when it appears in the search results.\nStep 3: Select Classic in the Select a deployment model box in the Virtual Network pane that appears, then click Create.\nStep 4: Enter the following values on the Create virtual network (classic) pane and then click Create:\n\nName: VNET1005a -\n\nAddress space: 10.0.0.0/16 -\n\nSubnet name: subnet0 -\n\nResource group: Create new -\nSubnet address range: 10.0.0.0/24\nSubscription and location: Select your subscription and location.\nStep 5: Repeat steps 3-5 for VNET1005b (10.1.0.0/16, 10.1.0.0/24), and for VNET1005c 10.2.0.0/16, 10.2.0.0/24).\nReferences:\nhttps://docs.microsoft.com/en-us/azure/virtual-network/create-virtual-network-classic","exam_id":50},{"id":"XdxaqyH3Sbs6UNlIlqhC","answers_community":[],"discussion":[{"comment_id":"34889","content":"As its mentioned VNET1007 can register their name in an internal DNS zone \n\n$vnet = Get-AzVirtualNetwork -Name \"VNET1007\"\n$zone = New-AzPrivateDnsZone -Name \"corp8548984.com\" -ResourceGroupName $vnet.ResourceGroupName\n\n$link = New-AzPrivateDnsVirtualNetworkLink -ZoneName corp8548984.com `\n -ResourceGroupName $vnet.ResourceGroupName -Name \"mylink\" `\n -VirtualNetworkId $vnet.id -EnableRegistration","comments":[{"poster":"tundervirld","comment_id":"136461","upvote_count":"3","timestamp":"1594902900.0","content":"I agree to Mathew, I test it in a lab and works:\n\n#Get Vnet VNET1007 \n$vnet = Get-AzVirtualNetwork -Name VNET1007\n\n#Install Module Private DNS\nInstall-Module -Name Az.PrivateDns -force\n\n#Create DNS Private Zone\n$privatednszone = New-AzPrivateDnsZone -Name my-dns-private-zone.int -ResourceGroupName rg-test-dns-private-westus2\n\n#Create DNS Private Zone Link to Vnet\n$privatednszonelink = New-AzPrivateDnsVirtualNetworkLink `\n-ZoneName $privatednszone.name `\n-ResourceGroupName $vn.ResourceGroupName `\n-Name $($privatednszone.name+\"link\") `\n-VirtualNetworkId $vnet.id -EnableRegistration\n\nYou can create 2 VM to test, this is the best link to read:\nhttps://docs.microsoft.com/en-us/azure/dns/private-dns-getstarted-powershell"}],"timestamp":"1578045900.0","poster":"Mathew","upvote_count":"15"},{"timestamp":"1576337340.0","comments":[{"comment_id":"34168","content":"or easier to do it like this :\n\n$vnet = Get-AzVirtualNetwork -Name \"VNET1007\"\n\nNew-AzDnsZone -Name \"corp8548984.com\" -ResourceGroupName \"myCloudShell\" -ZoneType Private -RegistrationVirtualNetworkId $vnet.Id","poster":"Ekramy_Elnaggar","timestamp":"1577870520.0","upvote_count":"31"}],"comment_id":"29586","upvote_count":"11","poster":"Ekramy_Elnaggar","content":"Commands were changed, correct answer should be:\n\n\n1- Get-AzVirtualNetwork -Name \"VNET1007\" >> and Copy the VNET ID\n\n2- New-AzDnsZone -Name \"corp8548984.com\" -ResourceGroupName \"mycloudshell\" -ZoneType Private -RegistrationVirtualNetworkId \"/subscriptions/fbdcff9e-af3d-43e8-b691-41d0ba60b51d/resourceGroups/mycloudshell/providers/Microsoft.Network/virtualNetworks/vnet1007\""},{"upvote_count":"2","timestamp":"1601578620.0","comment_id":"191141","poster":"Himanshu27","content":"New-AzPrivateDnsZone -Name corp854898427.com -ResourceGroupName myshellrg\nNew-AzPrivateDnsVirtualNetworkLink -ZoneName corp854898427.com -ResourceGroupName myshellrg -Name \"mylink\" -VirtualNetworkId \"/subscriptions/cda5ed3e-8a23-4c11-998f-ed489e0ba982/resourceGroups/myshellrg/providers/Microsoft.Network/virtualNetworks/VNET1007\" -EnableRegistration"},{"upvote_count":"1","timestamp":"1597641420.0","poster":"koumelas","comment_id":"159639","content":"This one was ok with me:\n\n1.\nNew-AzPrivateDnsZone -name corp8548984.com -ResourceGroupName myresourcegroup\n2.\nNew-AzPrivateDnsVirtualNetworkLink -ZoneName corp8548984.com -Name mylink -ResourceGroupName myresourcegroup -VirtualNetworkId /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/myresourcegroup/providers/Microsoft.Network/virtualNetworks/vnet1007"},{"upvote_count":"1","comment_id":"145606","timestamp":"1595928960.0","poster":"prabhjot","content":"agree with NithinRao all you need is one change $vnet = and not $vnet -"},{"upvote_count":"2","comment_id":"138977","poster":"NithinRao","timestamp":"1595198400.0","content":"$vnet - Get-AzVirtualNetwork -Name VNet007\n$zone = New-AzPrivateDnsZone -Name private.contoso.com -ResourceGroupName MyAzureResourceGroup\n\n$link = New-AzPrivateDnsVirtualNetworkLink -ZoneName private.contoso.com `\n -ResourceGroupName MyAzureResourceGroup -Name \"mylink\" `\n -VirtualNetworkId $vnet.id -EnableRegistration"},{"poster":"jmprbridge","content":"Well . . . I follow your recomendations and doesn't work. Below you will find the steps that I did on real Lab and work fine:\n\n1-. Create a Resource Group (Delete-RG). \n2-. Create 2 VNETs (vnet01 and vnet02), with two subnets.\n3 -. From Cloud Shell:\n #Create DNS Private Zone: \n a-. New-AzPrivateDnsZone -Name \"myCloudDomain.com\" -ResourceGroupName \"Delete-RG\"\n #Save in a variable vnet02 information:\n b-. $vnet = New-AzVirtualNetwork -Name \"vnet02\"\n #Configure Private DNS Zone as question requirements:\n c-. New-AzPrivateDnsVirtualNetworkLink -ZoneName \"myCloudDomain.com\" -ResourceGroupName \"Delete-RG\" -Name \"myCloudLink\" -VirtualNetworkId $vnet.Id -EnableRegistration\n\nAfter that, I created a VM at vnet02, and it was registered at myCloudDomain.com Private DNS Zone with no problem.","comment_id":"134011","upvote_count":"2","timestamp":"1594651140.0"},{"upvote_count":"1","timestamp":"1593835140.0","comment_id":"125927","poster":"Shunya","content":"First Create a Virtual Network VNET1007 using Azure portal. You can create the Private DNS and Linking in Azure portal without going to PowerShell. Simply follow the steps in this link: https://docs.microsoft.com/en-us/azure/dns/private-dns-getstarted-portal\n\nIf you want to do it through PowerShell goto PS using your portal, then execute below commands\n1. $vnet = Get-AzVirtualNetwork -Name \"VNET1007\" (this step is to get your Virtual Network Details)\n2. New-AzPrivateDnsZone -Name \"corp8548984.com\" -ResourceGroupName \"putYourResourceGroupNameHere\" (this is where you created a new Private DNS)\n3. New-AzPrivateDnsVirtualNetworkLink -ZoneName \"corp8548984.com\" `\n -ResourceGroupName \"putYourResourceGroupNameHere\" -Name \"putNameOfYourChoice\" `\n -VirtualNetworkId $vnet.id -EnableRegistration (this is how you linked the Virtual Network and Private DNS)\n(Reference:https://docs.microsoft.com/en-us/azure/dns/private-dns-getstarted-powershell)"},{"comments":[{"upvote_count":"1","comment_id":"104041","poster":"denkes","timestamp":"1591468380.0","content":"@zell: Thank you very much! \nWhen executing step 3) a name needs to be speficied. \nthe 3rd command: \"new-azprivatednsvirtualnetworklink -resourcegroupname .....\" should also include \"-name mydnslinkhere\"."}],"content":"Hi all,\nThis is what i have during my labbing:\n1) Create the new DNS zone using the following command:\n\nnew-azprivatednszone -resourcegroupname \"RESOURCE-GROUP-NAME-HERE\" -name \"FQDN-PRIVATE-DNS-ZONE-HERE.com\" \n\n2) use a variable to get the existing VNET ID:\n\n$vnet = get-azvirtualnetwork -name \"VNET-NAME-HERE\"\n\n3) Create a virtual network link to the private DNS zone and enable auto registraiton of resources within that vnet to automatically register to that private dns zone:\n\nnew-azprivatednsvirtualnetworklink -resourcegroupname \"RESOURCE-GROUP-NAME-HERE\" -zonename \"FQDN PRIVATE ZONE HERE.com\" -enableregistration -virtualnetworkid $vnet.id","poster":"zell","timestamp":"1590948780.0","comment_id":"99494","upvote_count":"4"},{"comment_id":"99075","poster":"quokka","upvote_count":"1","timestamp":"1590885420.0","content":"Didn't seem like I need to force install a module, but simply:\nNew-AzPrivateDnsZone -ResourceGroupName \"mycloudshell\" -Name \"corp8548984.com\"\nSweet!"},{"poster":"gbryant1","content":"You have to install the Module first.\nNew-AzDnsZone: Creation of private DNS zones using this API is no longer allowed. Please use privatednszones resource instead of dnszones resource. Refer to https://aka.ms/privatednsmigration for details.\n\nInstall-Module -Name Az.PrivateDns -force\n\nNew-AzPrivateDnsZone -Name corp8548984.com -ResourceGroupName mycloudshell\n\nKeep it simple","upvote_count":"2","comment_id":"95605","timestamp":"1590432480.0"},{"content":"New-AzDnsZone\nNew-AzDnsZone: Creation of private DNS zones using this API is no longer allowed. Please use privatednszones resource instead of dnszones resource. Refer to https://aka.ms/privatednsmigration for details.\n\nthe new command\nstep1 : $vnet = Get-AzVirtualNetwork -ResourceGroupName \"learn\" -Name \"vnet1\"\nstep2: New-AzPrivateDnsZone -Name \"corp.com\" -ResourceGroupName \"learn\"\nstep3: New-AzPrivateDnsVirtualNetworkLink -ResourceGroupName \"learn\" -ZoneName \"corp.com\" -Name \"dplii\" -VirtualNetworkId $vnet.Id -EnableRegistration","poster":"mohamadakl","upvote_count":"1","timestamp":"1589397120.0","comment_id":"88440"},{"comment_id":"86075","content":"Here is what I just did in my lab using the new commands:\n\nInstall-Module -Name Az.PrivateDns -force\n\n$vnet = Get-AzVirtualNetwork -Name VNET1007\n\n$zone = New-AzPrivateDnsZone -Name az30062.int -ResourceGroupName az-300-62\n\n$link = New-AzPrivateDnsVirtualNetworkLink -ZoneName az30062.int `\n -ResourceGroupName az-300-62 -Name \"az30062.int-link\" `\n -VirtualNetworkId $vnet.id -EnableRegistration\n\nInstall-Module -Name Az.PrivateDns -force\n\n$vnet = Get-AzVirtualNetwork -Name VNET1007\n\n\n$zone = New-AzPrivateDnsZone -Name az20062.int -ResourceGroupName az-300-62\n\n$link = New-AzPrivateDnsVirtualNetworkLink -ZoneName az30062.int `\n -ResourceGroupName az-300-62 -Name \"az20062.int-link\" `\n -VirtualNetworkId $vnet.id -EnableRegistration","timestamp":"1589031900.0","upvote_count":"1","poster":"keithtemplin","comments":[{"comment_id":"86079","timestamp":"1589032260.0","content":"Sorry Double Pasted, Here arethe commands:\n\nInstall-Module -Name Az.PrivateDns -force\n\n$vnet = Get-AzVirtualNetwork -Name VNET1007\n\n$zone = New-AzPrivateDnsZone -Name az30062.int -ResourceGroupName az-300-62\n\n$link = New-AzPrivateDnsVirtualNetworkLink -ZoneName az30062.int `\n-ResourceGroupName az-300-62 -Name \"az30062.int-link\" `\n-VirtualNetworkId $vnet.id -EnableRegistration","upvote_count":"1","poster":"keithtemplin"}]},{"poster":"Gjferweb","comment_id":"83897","timestamp":"1588643700.0","upvote_count":"1","content":"Solution commands being deprecated:\nNew-AzDnsZone: Creation of private DNS zones using this API is no longer allowed. Please use privatednszones resource instead of dnszones resource. Refer to https://aka.ms/privatednsmigration for details."},{"timestamp":"1588631100.0","poster":"kumar123","upvote_count":"1","content":"New-AzPrivateDnsZone -Name \"corp8548984.com\" -ResourceGroupName \"RG1\" - This will do.","comment_id":"83840"},{"content":"If anyone wondering how to remember these commands, just learn to use --help command in Azure shell. You will get all commands and examples listed.","comment_id":"82711","upvote_count":"5","timestamp":"1588444560.0","poster":"milind8451","comments":[{"content":"Thanks for the clue. Was really puzzled on how to remember","poster":"NKnab","timestamp":"1592028360.0","upvote_count":"1","comment_id":"109195"}]},{"content":"$ResVirtualNetwork = Get-AzVirtualNetwork -Name \"VNET1005a\" -ResourceGroupName \"user-hjqgbfnkfrfa\"\nNew-AzDnsZone -Name \"corp8548984.com\" -ResourceGroupName \"user-hjqgbfnkfrfa\" -ZoneType Private -RegistrationVirtualNetworkId $ResVirtualNetwork.id","poster":"SilNilanjan","upvote_count":"3","comment_id":"69489","timestamp":"1585563420.0"},{"upvote_count":"2","content":"az network dns zone create -g <RGName> -n corp8548984.com --zone-type Private --registration-vnets VNET1007","timestamp":"1583574120.0","poster":"qr","comment_id":"60242"},{"comment_id":"47817","timestamp":"1581108420.0","content":"Private DNS can be created via GUI now. In the past that wasn't the case. I think this task is no longer relevant","poster":"dfrye","upvote_count":"2","comments":[{"timestamp":"1581863220.0","comment_id":"51258","upvote_count":"1","content":"Oddly enough. If you try to do the powershell codes above and the Private DNS using the portal. You get different results. For some reason the powershell codes create a dns entry in DNS zones while the portal creates a dns entry in the Private DNS zones. So i wouldnt say that the portal does it the same way as the powershell codes do.","poster":"Myk"}]},{"poster":"Karls","content":"This work:\n1) az network vnet create --name VNET1007 -g RG1 --location eastus --address-prefixes 10.3.0.0/16 --subnet-name subnet01 --subnet-prefixes 10.3.0.0/24\n2) az network vnet list --output table\n3) az network private-dns zone create --name corporxxxx.com -g RG1\n4) az network private-dns link vnet create -g RG1 -n myVnetLink --zone-name corporxxxx.com -v VNET1007 -e\n5) az network private-dns zone list","comment_id":"42684","upvote_count":"1","timestamp":"1579987500.0"},{"poster":"Kevin1991","content":"New updated cmd for creating a Private DNS zone by specifying virtual network IDs\n--------------\nNew-AzDnsZone -Name \"corp8548984.com\" -ResourceGroupName \"mycloudshell\" -ZoneType Private -ResolutionVirtualNetworkId \"/subscriptions/fbdcff9e-af3d-43e8-b691-41d0ba60b51d/resourceGroups/mycloudshell/providers/Microsoft.Network/virtualNetworks/vnet1007\"\n-------------\nhttps://docs.microsoft.com/en-us/powershell/module/az.dns/new-azdnszone?view=azps-3.2.0&viewFallbackFrom=azps-1.5.0","comment_id":"30532","timestamp":"1576647780.0","upvote_count":"3"},{"content":"what it means by Powershell(Linux) ? Bash ?","timestamp":"1576336020.0","upvote_count":"2","poster":"Ekramy_Elnaggar","comment_id":"29583","comments":[{"comment_id":"132297","content":"The Azure Powershell is running on Linux, I guess.","timestamp":"1594493040.0","upvote_count":"1","poster":"ExamWynner"}]},{"comment_id":"26299","upvote_count":"4","comments":[{"upvote_count":"1","timestamp":"1587465360.0","comment_id":"77398","poster":"Mvii","content":"Correct."},{"upvote_count":"2","timestamp":"1594700760.0","poster":"tahabhai","content":"didn't find a way to link New-AzPrivateDnsZone to the vnet","comment_id":"134557"}],"timestamp":"1575390900.0","content":"I think we should use New-AzPrivateDnsZone\n- \"Private DNS\" because of \"internal DNS\" is requested.\nAnd then link this private DNS to the Vnet.\nhttps://docs.microsoft.com/en-us/azure/dns/private-dns-getstarted-powershell","poster":"Cern77"},{"poster":"Isu","upvote_count":"2","content":"I guess \"-RegistrationVirtualNetworkId\" switch should be replaced by \"-ResolutionVirtualNetworkId\"","comment_id":"24493","timestamp":"1574748060.0"}],"answer":"See solution below.","url":"https://www.examtopics.com/discussions/microsoft/view/9130-exam-az-300-topic-1-question-62-discussion/","answer_ET":"See solution below.","isMC":false,"answer_images":["https://www.examtopics.com/assets/media/exam-media/02758/0021300001.png","https://www.examtopics.com/assets/media/exam-media/02758/0021400001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0021400002.png","https://www.examtopics.com/assets/media/exam-media/02758/0021500001.png"],"unix_timestamp":1574748060,"timestamp":"2019-11-26 07:01:00","question_id":59,"question_images":["https://www.examtopics.com/assets/media/exam-media/02758/0020700001.png","https://www.examtopics.com/assets/media/exam-media/02758/0020800001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0020900001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0021000001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0021100001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0021200001.jpg"],"answer_description":"Step 1: Launch Cloud Shell from the top navigation of the Azure portal.\n\n\nStep 2: Select PowerShell -\n\nWhen you start the Azure Cloud Shell for the first time, you will be prompted to create a storage account in order to associate a new Azure File Share to persist files across sessions.\nStep 3: Click Show Advanced settings.\n\nStep 4: Enter corp8548984n1 in the Storage account text box and File1 share text box. Click Create storage.\n\nStep 5: Enter the following command at the powershell command prompt:\nNew-AzDnsZone -Name \"corp8548984.com\"\n-ResourceGroupName \"mycloudshell\"\n-ZoneType Private\n-RegistrationVirtualNetworkId VNET1007\nNote: A DNS zone is created by using the New-AzDnsZone cmdlet with a value of Private for the ZoneType parameter.\nReferences:\nhttps://docs.microsoft.com/en-us/azure/dns/private-dns-getstarted-powershell https://docs.microsoft.com/en-us/azure/cloud-shell/quickstart-powershell https://docs.microsoft.com/en-us/powershell/module/az.dns/new-azdnszone?view=azps-1.5.0","question_text":"SIMULATION -\nClick to expand each objective. To connect to the Azure portal, type https://portal.azure.com in the browser address bar.\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\nWhen you are finished performing all the tasks, click the \"˜Next' button.\nNote that you cannot return to the lab once you click the \"˜Next' button. Scoring occur in the background while you complete the rest of the exam.\n\nOverview -\nThe following section of the exam is a lab. In this section, you will perform a set of tasks in a live environment. While most functionality will be available to you as it would be in a live environment, some functionality (e.g., copy and paste, ability to navigate to external websites) will not be possible by design.\nScoring is based on the outcome of performing the tasks stated in the lab. In other words, it doesn't matter how you accomplish the task, if you successfully perform it, you will earn credit for that task.\nLabs are not timed separately, and this exam may have more than one lab that you must complete. You can use as much time as you would like to complete each lab. But, you should manage your time appropriately to ensure that you are able to complete the lab(s) and all other sections of the exam in the time provided.\nPlease note that once you submit your work by clicking the Next button within a lab, you will NOT be able to return to the lab.\n\nTo start the lab -\nYou may start the lab by clicking the Next button.\nYou plan to deploy several Azure virtual machines and to connect them to a virtual network named VNET1007.\nYou need to ensure that future virtual machines on VNET1007 can register their name in an internal DNS zone named corp8548984.com. The zone must NOT be hosted on a virtual machine.\nWhat should you do from Azure Cloud Shell?\nTo complete this task, start Azure Cloud Shell and select PowerShell (Linux), Click Show Advanced settings, and then enter corp8548984n1 in the\nStorage account text box and File1 share text box. Click Create storage, and then complete the task.","topic":"1","exam_id":50},{"id":"PvlnYr4wPl7729gcHqk4","topic":"1","question_text":"SIMULATION -\nClick to expand each objective. To connect to the Azure portal, type https://portal.azure.com in the browser address bar.\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\n//IMG//\n\nWhen you are finished performing all the tasks, click the \"˜Next' button.\nNote that you cannot return to the lab once you click the \"˜Next' button. Scoring occur in the background while you complete the rest of the exam.\n\nOverview -\nThe following section of the exam is a lab. In this section, you will perform a set of tasks in a live environment. While most functionality will be available to you as it would be in a live environment, some functionality (e.g., copy and paste, ability to navigate to external websites) will not be possible by design.\nScoring is based on the outcome of performing the tasks stated in the lab. In other words, it doesn't matter how you accomplish the task, if you successfully perform it, you will earn credit for that task.\nLabs are not timed separately, and this exam may have more than one lab that you must complete. You can use as much time as you would like to complete each lab. But, you should manage your time appropriately to ensure that you are able to complete the lab(s) and all other sections of the exam in the time provided.\nPlease note that once you submit your work by clicking the Next button within a lab, you will NOT be able to return to the lab.\n\nTo start the lab -\nYou may start the lab by clicking the Next button.\nAnother administrator reports that she is unable to configure a web app named corplod8548987n3 to prevent all connections from an IP address of 11.0.0.11.\nYou need to modify corplod8548987n3 to successfully prevent the connections from the IP address. The solution must minimize Azure-related costs.\nWhat should you do from the Azure portal?","url":"https://www.examtopics.com/discussions/microsoft/view/6917-exam-az-300-topic-1-question-63-discussion/","answer_description":"Step 1:\nFind and select application corplod8548987n3:\n1. In the Azure portal, on the left navigation panel, click Azure Active Directory.\n2. In the Azure Active Directory blade, click Enterprise applications.\nStep 2:\nTo add an IP restriction rule to your app, use the menu to open Network>IP Restrictions and click on Configure IP Restrictions\n\nStep 3:\n\nClick Add rule -\nYou can click on [+] Add to add a new IP restriction rule. Once you add a rule, it will become effective immediately.\n\nStep 4:\nAdd name, IP address of 11.0.0.11, select Deny, and click Add Rule\n\nReferences:\nhttps://docs.microsoft.com/en-us/azure/app-service/app-service-ip-restrictions","answer":"See explanation below.","isMC":false,"timestamp":"2019-10-22 00:32:00","question_images":["https://www.examtopics.com/assets/media/exam-media/02758/0021600001.png","https://www.examtopics.com/assets/media/exam-media/02758/0021700001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0021800001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0021900001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0022000001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0022100001.jpg"],"answer_images":["https://www.examtopics.com/assets/media/exam-media/02758/0022300001.png","https://www.examtopics.com/assets/media/exam-media/02758/0022400001.jpg","https://www.examtopics.com/assets/media/exam-media/02758/0022500001.png"],"discussion":[{"poster":"Ekramy_Elnaggar","comments":[{"content":"Funny how the graphic now changes from IP restrictions(as shown in the original dump answer) to Access Restrictions. But yes you are correct that is now the current graphic.","timestamp":"1581863940.0","upvote_count":"1","poster":"Myk","comment_id":"51265"}],"upvote_count":"17","content":"App > Networking > Access Restrictions > Add Deny rule","comment_id":"29588","timestamp":"1576338300.0"},{"upvote_count":"15","timestamp":"1581959880.0","poster":"SilentH","comments":[{"content":"Very good point...!","comment_id":"59151","timestamp":"1583378760.0","poster":"Happiman","upvote_count":"5"},{"comment_id":"71325","content":"I don't think it is a firewall with implicit \"deny all\" rule at the end","poster":"manhattan","timestamp":"1586066520.0","upvote_count":"2"},{"content":"Very good point SilentH. Yes, we need to add 2 rules. one is to deny and other is to allow.","upvote_count":"1","comment_id":"133286","timestamp":"1594592580.0","poster":"praveen97"},{"content":"this isn't working allow 0.0.0.0/0 seems to be overriding deny 11.0.0.11/32 rule. even this ip can hit the app url when 0.0.0.0/0 rule is added. when removed all ips are restricted.","comment_id":"191209","upvote_count":"1","timestamp":"1601585940.0","poster":"Himanshu27"}],"comment_id":"51757","content":"After you add the Deny rule for 11.0.0.11 (rule 100), I believe you need to add another rule to allow all other IP address with a CIDR of 0.0.0.0/0. I made this second rule with a priority of 110."},{"poster":"milind8451","upvote_count":"3","comment_id":"82716","timestamp":"1588444980.0","content":"Go to APp service -> Networking -> Access restrictions -> \"Add Rule\"\nIt needs IP address block (CIDR), so just mention IP address here, it will itself convert to 11.0.0.11/32."},{"comment_id":"78919","content":"Based on the new changes, you have to go to App Services, Go to the App, Networking, Access Restrictions: Add a rule to deny traffic from the specific IP address. You have to explicitly add a new rule to allow the traffic from other address by adding a \"Allow All' rule at 0.0.0.0 as satgo (credits) mentioned (great point). Because when you add a deny rule, Azure will add one more rule by default with a priority of a huge number, so you have to add a Allow All rule with less priority.","upvote_count":"7","poster":"TYT","timestamp":"1587695580.0"},{"poster":"satgo","comment_id":"73489","upvote_count":"7","timestamp":"1586647380.0","content":"https://docs.microsoft.com/en-us/azure/app-service/app-service-ip-restrictions#blocking-a-single-ip-address\n\nNeed to add 0.0.0.0 AllowAll"},{"poster":"Protonenpaule","comment_id":"68639","timestamp":"1585326060.0","content":"https://docs.microsoft.com/en-us/azure/app-service/app-service-ip-restrictions#blocking-a-single-ip-address","upvote_count":"10"},{"comments":[{"poster":"bhendi","comment_id":"85578","upvote_count":"1","content":"This is correct, I did it in lab.","timestamp":"1588921800.0"}],"comment_id":"26454","upvote_count":"4","poster":"JatinA","content":"Just to add, when you add 11.0.0.11, it automatically converts it into 11.0.0.11/32 CIDR. Here, 32 means only one IP address.","timestamp":"1575430080.0"},{"poster":"Cern77","comment_id":"26303","timestamp":"1575391740.0","content":"And ... here it is : \"prevent all connections from an IP address of 11.0.0.11\"\nThen, set a deny rule on the correspondent IP ...","upvote_count":"5"},{"poster":"Oz","timestamp":"1571697120.0","comment_id":"16531","content":"Step 1. From Azure portal, type App Services. Find web app name and click on it.\nStep2. Scroll down to Networking from the menu to the left.","upvote_count":"6"}],"exam_id":50,"answers_community":[],"question_id":60,"unix_timestamp":1571697120,"answer_ET":"See explanation below."}],"exam":{"provider":"Microsoft","id":50,"lastUpdated":"12 Apr 2025","isMCOnly":false,"isImplemented":true,"isBeta":false,"numberOfQuestions":241,"name":"AZ-300"},"currentPage":12},"__N_SSP":true}