{"pageProps":{"questions":[{"id":"0mrNpvh1ErSYaFbWdgoY","question_images":[],"question_id":61,"exam_id":48,"answer":"D","unix_timestamp":1617378120,"topic":"16","choices":{"B":"az ams live-output","A":"az webapp log","C":"az monitor activity-log","D":"az container attach"},"answer_images":[],"timestamp":"2021-04-02 17:42:00","url":"https://www.examtopics.com/discussions/microsoft/view/48828-exam-az-204-topic-16-question-2-discussion/","answers_community":["D (82%)","C (18%)"],"question_text":"You need to investigate the http server log output to resolve the issue with the ContentUploadService.\nWhich command should you use first?","answer_ET":"D","isMC":true,"discussion":[{"comments":[{"comment_id":"481638","upvote_count":"3","content":"C it's correct see link https://docs.microsoft.com/en-us/azure/app-service/troubleshoot-http-502-http-503","timestamp":"1637325360.0","poster":"maukaba"},{"comment_id":"331979","comments":[{"comment_id":"334394","upvote_count":"2","content":"It is. Note the type in the ContentUploadService log.","timestamp":"1618286400.0","poster":"clarionprogrammer"},{"upvote_count":"1","comment_id":"434667","content":"az container attach only gives STDOUT and STDERR, not web server log ...\nweb server log can have option to see STDOUT / STDERR as well as all other possible log files","poster":"ning","timestamp":"1630247160.0"},{"upvote_count":"2","content":"It is , Read the question again.","timestamp":"1626071640.0","poster":"somenkr","comment_id":"404427"},{"timestamp":"1621414680.0","content":"The ContentAnalysisService is deployed with Azure Container Instances from a private Azure Container Registry named contosoimages.","comments":[{"upvote_count":"3","content":"The question is about the Content*Upload*Service, not the Content*Analysis*Service. The upload service is a container according to the CS## source code","poster":"DV007","timestamp":"1643051580.0","comment_id":"531525"}],"comment_id":"361198","poster":"SnakePlissken","upvote_count":"9"}],"upvote_count":"3","content":"It's not deployed to a container. This is a regular webapp so A, az webapp log is the correct answer.","poster":"Zidimirite","timestamp":"1617976320.0"},{"content":"On my exam 2022-12-26.\nChose：D","comment_id":"758031","upvote_count":"3","timestamp":"1672104180.0","poster":"KingChuang"},{"timestamp":"1618567020.0","upvote_count":"12","content":"Correct. If one will take a look at \"CS09\" line, it's clear that \"ContentUploadService\" is a container, so the first step should be \"az container attach\"","comment_id":"336911","comments":[{"poster":"maukaba","comments":[{"poster":"1CY1","content":"Also, this is probably what MS wants you to say. \n-> Ans : C","timestamp":"1721434980.0","comment_id":"1251472","upvote_count":"1"}],"comment_id":"481643","upvote_count":"1","timestamp":"1637325720.0","content":"A web app can be deployed both as source code and as a docker container.\nC it's correct see link https://docs.microsoft.com/en-us/azure/app-service/troubleshoot-http-502-http-503"}],"poster":"ray01"}],"content":"Answer is az container attach\n\nRef: https://docs.microsoft.com/en-us/azure/container-instances/container-instances-get-logs","comment_id":"329734","timestamp":"1617721740.0","poster":"Whirly","upvote_count":"60"},{"timestamp":"1618415940.0","content":"It is not A. \"az webapp log\" by itself is not a command. It would need to be \"az webapp log tail\" or \"az webapp log download\".\nhttps://docs.microsoft.com/en-us/cli/azure/webapp/log?view=azure-cli-latest","comment_id":"335627","poster":"clarionprogrammer","upvote_count":"14"},{"upvote_count":"1","poster":"Rhashik","content":"Selected Answer: C\nC is the first step","timestamp":"1721991240.0","comment_id":"1255674"},{"poster":"DamianSawula","upvote_count":"1","comment_id":"1212457","content":"Selected Answer: D\nOn my exam 2024-05-16, answered D, 887/1000","timestamp":"1715869200.0"},{"upvote_count":"1","timestamp":"1710314160.0","poster":"james2033","comment_id":"1172331","content":"az container attach --resource-group myResourceGroup --name mycontainer\n\nhttps://learn.microsoft.com/en-us/azure/container-instances/container-instances-quickstart#attach-output-streams"},{"timestamp":"1690623000.0","upvote_count":"1","content":"got this question on 29/06/2023","comment_id":"966280","poster":"BaoNguyen2411"},{"content":"Had this question today: 2023-07-26","upvote_count":"1","timestamp":"1690337940.0","comment_id":"963249","poster":"NightshadeRC"},{"timestamp":"1687276380.0","upvote_count":"3","content":"Selected Answer: C\nAnother wonderfully obtuse question. I'm not going to disagree that ContentUploadService is hosted in a container but I think MS wants answer C.","comment_id":"928564","poster":"JH81"},{"comment_id":"864575","poster":"adilkhan","content":"A is the right answer. ContentUploadService has nothing to do with the CONTAINER!","timestamp":"1680945660.0","upvote_count":"1"},{"timestamp":"1676945940.0","content":"D - Scenario: The ContentAnalysisService is deployed with Azure Container Instances from a private Azure Container Registry named AmyImages. The solution will use eight CPU cores.\n\nWhen you have a misbehaving container in Azure Container Instances, start by viewing its logs with az container logs, and stream its standard out and standard error with az container attach.\n\nhttps://docs.microsoft.com/en-us/azure/container-instances/container-instances-get-logs","poster":"uffuchsi","upvote_count":"3","comment_id":"816119"},{"poster":"AlexeyG","content":"Got this in 16/02/2023","upvote_count":"1","comment_id":"810363","timestamp":"1676532720.0"},{"upvote_count":"3","content":"Selected Answer: D\nhttps://learn.microsoft.com/en-us/azure/container-instances/container-instances-get-logs","poster":"hubekpeter","timestamp":"1669550760.0","comment_id":"728177"},{"timestamp":"1668705600.0","comment_id":"720687","upvote_count":"2","content":"Selected Answer: D\naz container attach","poster":"OPT_001122"},{"timestamp":"1668520800.0","content":"Did my exam on 15th November 2022. This test case and question was on it.","poster":"TheExamMaster2020","upvote_count":"1","comment_id":"718818"},{"content":"Without knowing what Microsoft thinks it is difficult to answer this question. \n* az monitor activity-log alert create can be used to create an alert. If you follow the page then that is the first step. Monitor the service health and for that create alerts. Thi tool can be used for that. https://learn.microsoft.com/en-us/azure/app-service/troubleshoot-http-502-http-503 \n* az container attach : To get the current log output, but that is not a good option to debug this issue. \n\nI will bet on az monitor activity-log. And I'm changing my original answer from the first iteration of looking at the options","upvote_count":"2","comment_id":"689173","comments":[{"timestamp":"1665222660.0","poster":"gmishra88","comment_id":"689174","upvote_count":"1","content":"az monitor activity-log alert create -n {AlertName} -g {ResourceGroup} \\\n --condition category=ServiceHealth and level=Error"},{"content":"az container attach can be used in the second step of collect data (observer and monitor, collect data and mitigate) to get the log stream.","upvote_count":"1","comment_id":"689175","poster":"gmishra88","timestamp":"1665222840.0"},{"poster":"gmishra88","timestamp":"1665222960.0","upvote_count":"1","content":"But it asks which you will use first then I guess Microsoft wants me to follow that step exactly like a machine and reading their manuals as soon as I face an issue. So it is definitely alerts in the first step; Observe and monitor. This is a horrible question to ask what I will do first. I will go get a coffee first, microsoft","comment_id":"689176"}],"poster":"gmishra88","timestamp":"1665222600.0"},{"content":"Selected Answer: D\nD is correct answer. \naz container attach","poster":"Eltooth","timestamp":"1656149640.0","comment_id":"622072","upvote_count":"5"},{"poster":"heisenberg33","upvote_count":"3","content":"Selected Answer: D\nContentUploadService is a container, see line CS06-CS09. Ref: https://docs.microsoft.com/en-us/azure/container-instances/container-instances-get-logs#attach-output-streams","comment_id":"548369","timestamp":"1644996420.0"},{"content":"Selected Answer: D\nConentCotainerService is hosted in container services. Hense, the correct answer is az container attach.\nhttps://docs.microsoft.com/en-us/azure/container-instances/container-instances-get-logs#attach-output-streams","comment_id":"535218","timestamp":"1643435580.0","poster":"leonidn","upvote_count":"4"},{"poster":"lugospod","upvote_count":"1","comment_id":"524889","content":"My two cents...\nBased on info on 502 and 503 on page https://docs.microsoft.com/en-us/azure/app-service/troubleshoot-http-502-http-503\nIt is possible that the root cause is \"our\" app or unavailability of Azure service \n\nFor Azure services: Microsoft Azure publicizes each time there is a service interruption or performance degradation. Which leads to answer C\nFor your own applications: A or D. A has no info which command it is using. If using DOWNLOAD it will give us some history info. If using TAIL it will give us real time info similar to D.\nSo if this happens occasionally, there is a small chance that it will happen right when we are watching so I would rather go and check the history info - A.\n\nNow between A and C - both are correct because the problem could be caused by Azure also since it is occasionally occuring.\n\nSo we need more info to decide if the problem is A or C.","timestamp":"1642332600.0"},{"poster":"ning","timestamp":"1629717000.0","content":"A is correct, application level log ... \n az container attach is redirect of STD input, output and error ...","comment_id":"429902","upvote_count":"2"},{"comment_id":"416583","upvote_count":"5","timestamp":"1627528140.0","content":"C. seems to be Correct, because consider condition:\n- An alert must be raised if the ContentUploadService uses more than 80 percent of available CPU cores.\nand\nCOMMANDS\naz monitor activity-log alert - Manage activity log alerts.","poster":"sea_runner","comments":[{"comments":[{"timestamp":"1664547660.0","poster":"gmishra88","upvote_count":"1","comment_id":"683651","content":"good idea, but az monitor activity-log does not give any metrics. But that page should have been what the question creator had in mind. But apparently there is another obscure Microsoft page"}],"poster":"maukaba","comment_id":"481619","timestamp":"1637323800.0","content":"C it's correct see link https://docs.microsoft.com/en-us/azure/app-service/troubleshoot-http-502-http-503","upvote_count":"1"}]},{"content":"\"The ContentAnalysisService is deployed with Azure Container Instances from a private Azure Container Registry named contosoimages\" - this is wrong because the manifest file below is concerning the ContentUploadService (which is a Linux container).|\nThen, it is mentioned that the ContentAnalysisService is an Azure function (which returns a number expressing the likelihood for a content to be inappropriate). \nTherefore, from my point of view, the correct answer is D.","poster":"nychollas","comment_id":"384068","timestamp":"1623922080.0","upvote_count":"3"},{"comment_id":"367354","timestamp":"1622050260.0","content":"My choice is --> \n[A] az webapp log : can be further use to show and download logs\nhttps://docs.microsoft.com/en-us/cli/azure/webapp/log?view=azure-cli-latest\n\n[B] az ams live-output : manage live outputs for Az Media Service\nhttps://docs.microsoft.com/en-us/cli/azure/monitor/activity-log?view=azure-cli-latest\n\n[C] az monitor activity-log : manage activity log\nhttps://docs.microsoft.com/en-us/cli/azure/monitor/activity-log?view=azure-cli-latest\nWhat is activity log? If you familiar with Events on Windows, than activity is something like that.\nhttps://docs.microsoft.com/en-us/azure/azure-monitor/essentials/activity-log\n\n[D] az container attach : Attach local standard output and error streams to a container in a container group.\nhttps://docs.microsoft.com/en-us/cli/azure/container?view=azure-cli-latest#az_container_attach\n\nWe're looking at logs at application level, which the application writes, we want to know what's behind the 502 error.","poster":"ferut","upvote_count":"2","comments":[{"comments":[{"content":"A (like D) has no historical information (unless it has been configured before).\nSince we don't know if this has been done, you won't get the data from previous incidents.\n\nThus only C remains.\nRemember: This is only the first step.\nThe second step should be to find the right point to gather more detailed information.","comment_id":"559301","poster":"ReniRechner","upvote_count":"3","timestamp":"1646212740.0"},{"content":"It is really interesting how each comment go one step deep. Maybe this is not a question for a certification exam. Because this is an error that happens once in a while probably it is right that the historical information needs to be seen. It may not happen when az webapp log tail is done (but download yes).\nBut are we expected to think so deep in an exam setting?","upvote_count":"1","poster":"gmishra88","comment_id":"683657","timestamp":"1664548200.0"}],"upvote_count":"8","comment_id":"367358","poster":"ferut","content":"My choice is --> A\nThis is the explanation:\nB --> the application log and the error we're looking for doesn't have to do with Az Media Service. It's not B\nC --> activity log, is a level too high. We won't find the application log on the container's activities. We need to look at something like ..Exception thrown ... with the call stacks. It's not C\nD --> attaching the container, will spit out the log as it happens. We need some logs for things that already happen. This is handy if you want to monitor the container with your pair balls of eye. It's not D\n\nA is the most suitable answer.","timestamp":"1622050560.0"}]},{"comments":[{"poster":"Pomphard","timestamp":"1618138980.0","comment_id":"333228","comments":[{"poster":"SnakePlissken","upvote_count":"2","timestamp":"1621414620.0","content":"\"The ContentAnalysisService is deployed with Azure Container Instances from a private Azure Container Registry named contosoimages.\"","comment_id":"361197"}],"upvote_count":"1","content":"It doesn't say it's deployed to aci anywhere."}],"upvote_count":"2","comment_id":"327939","content":"The service is deploy to aci so the answer is d.","poster":"aperez1979","timestamp":"1617536940.0"},{"comments":[],"upvote_count":"2","comment_id":"327357","content":"A should be the answer as this refers to webapp logs\nC is for subscription level events - activity log","poster":"jokergester","timestamp":"1617454140.0"},{"upvote_count":"3","timestamp":"1617378120.0","comment_id":"326781","poster":"Beitran","content":"Shouldn't it be az webapp log tail --provider http ?"}],"answer_description":""},{"id":"ymJAa1UTu1ssDvq1cQhK","answer_ET":"A","answer_description":"Azure Functions offers built-in integration with Azure Application Insights to monitor functions.\nThe following areas of Application Insights can be helpful when evaluating the behavior, performance, and errors in your functions:\nLive Metrics: View metrics data as it's created in near real-time.\n\nFailures -\n\nPerformance -\n\nMetrics -\nReference:\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-monitoring","discussion":[{"comments":[{"poster":"satyadharma","content":"not a good option :- \"If you enable Applications Insights during development, you might hit this limit during testing. Azure provides portal and email notifications when you're approaching your daily limit. If you miss those alerts and hit the limit, new logs won't appear in Application Insights queries. Be aware of the limit to avoid unnecessary troubleshooting time\n\"","upvote_count":"3","comment_id":"461720","timestamp":"1634157900.0"}],"poster":"Deep007","content":"Given answer is correct.\nLive Metrics Stream: \nwhen your function app is connected to Application Insights, you can view log data and other metrics in near real time in the Azure portal using Live Metrics Stream. Open below link for this statement.\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-monitoring","upvote_count":"33","comment_id":"265281","timestamp":"1610423340.0"},{"poster":"27close","content":"Live Metrics Stream: when your function app is connected to Application Insights, you can view log data and other metrics in near real time in the Azure portal using Live Metrics Stream. Use this method when monitoring functions running on multiple-instances or on Linux in a Consumption plan. This method uses sampled data.. Answer is A\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-monitoring","timestamp":"1605728700.0","comment_id":"222213","upvote_count":"14"},{"poster":"overhill","comment_id":"1317018","timestamp":"1732448340.0","content":"Selected Answer: C\nby using Microsoft.Extensions.Logging to log locally we:\n1) Minimize Storage costs on Azure\n2) prevent Application Insights to reach limits\n3) We can see the logs locally, we don't need to query anything or go to azure portal","upvote_count":"1"},{"poster":"overhill","upvote_count":"1","comments":[{"timestamp":"1737713400.0","upvote_count":"1","comment_id":"1346053","content":"Question states that you should investigate in development environment which is in Azure. This is written in section 'Function app' of the case study.","poster":"Regex37"},{"comment_id":"1317014","upvote_count":"1","content":"Also there is this:\n\"Data storage costs must be minimized.\"\nwhich means that if you can not throw data to azure from logs while you are developing you minimize costs.\n\nThis adding code to log locally from the Microsoft.Extensions.Logging is the way to go","timestamp":"1732448220.0","poster":"overhill"},{"content":"this is to prevent reaching limits in application insights","poster":"overhill","upvote_count":"1","timestamp":"1732447860.0","comment_id":"1317013"}],"comment_id":"1317012","content":"IF you are developing locally then you will log stuff in your local machine.\nI would go with C) add code to log things locally","timestamp":"1732447860.0"},{"poster":"1CY1","content":"Selected Answer: A\nGoing with A as much because I suspect this is what MS would want as an answer.","comment_id":"1237902","timestamp":"1719468600.0","upvote_count":"1"},{"timestamp":"1681540500.0","poster":"surprise0011","upvote_count":"2","comment_id":"870698","content":"I believe D is might be an option now also\nhttps://learn.microsoft.com/en-us/azure/azure-functions/functions-monitor-log-analytics?tabs=csharp"},{"timestamp":"1668705660.0","content":"Selected Answer: A\nConnect Live Metrics Stream from Application Insights to the Azure Function app and filter the metrics.","upvote_count":"1","comment_id":"720690","poster":"OPT_001122"},{"content":"If it is a timeout I might not go check the metrics but of course it depends on what I expect. I might want to see the application logs. But I wonder how can one question be so confusing and totally dependent on the person checking the issue and his knowledge on the application. It totally depends, Microsoft","comment_id":"684243","comments":[{"content":"It has to be about Metrics because that is mentioned as one of the first steps in one of the obscure microsoft pages","timestamp":"1665241140.0","upvote_count":"2","comment_id":"689452","poster":"gmishra88"}],"timestamp":"1664631840.0","upvote_count":"2","poster":"gmishra88"},{"comment_id":"429898","timestamp":"1629716400.0","content":"Should not B happen before A happen? I would think correct answer is B then A ...\n\nIf there is no log analytics, nor application insights connected, how can live stream happens?","upvote_count":"4","comments":[{"content":"Current environment:\n“The solution uses Application Insights, Azure Monitor, and Azure Key Vault.”\n\nA is correct","comment_id":"476780","poster":"DefaultName2","timestamp":"1636704120.0","upvote_count":"1"}],"poster":"ning"},{"comments":[{"content":"\"when your function app is connected to Application Insights, you can view log data and other metrics in near real time in the Azure portal using Live Metrics Stream. \" If there are no application insights, there cannot be any Live Steaming for A","poster":"ning","timestamp":"1629717660.0","comment_id":"429908","upvote_count":"1"},{"poster":"hstml","content":"Why do they not log to AppInsights in a development environment? https://docs.microsoft.com/en-us/azure/azure-functions/functions-monitoring","timestamp":"1631883780.0","upvote_count":"3","comment_id":"446624"}],"poster":"Zidimirite","timestamp":"1617540660.0","comment_id":"327977","content":"I thought: Why not B? But then realised it is in a development environment and those generally don't log to AppInsights. So A is indeed correct.","upvote_count":"3"},{"upvote_count":"6","comment_id":"321727","poster":"idrisfl","timestamp":"1616837760.0","content":"The question specifically says \"in a development environment\". Live Metrics Stream is recommended for production applications. I would go for D.\nhttps://docs.microsoft.com/en-us/azure/azure-monitor/app/live-stream"},{"timestamp":"1610321340.0","content":"shouldn't be D as mentioned in Issues section it's 400 error\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-diagnostics","comment_id":"264337","poster":"rajwit","upvote_count":"5"},{"timestamp":"1610283180.0","comments":[{"content":"Streaming Logs\nWhile developing an application, you often want to see what's being written to the logs in near real time when running in Azure.\n\nThere are two ways to view a stream of the log data being generated by your function executions.\n\nBuilt-in log streaming: the App Service platform lets you view a stream of your application log files. This stream is equivalent to the output seen when you debug your functions during local development and when you use the Test tab in the portal. All log-based information is displayed. For more information, see Stream logs. This streaming method supports only a single instance, and can't be used with an app running on Linux in a Consumption plan.\n\nLive Metrics Stream: when your function app is connected to Application Insights, you can view log data and other metrics in near real time in the Azure portal using Live Metrics Stream. Use this method when monitoring functions running on multiple-instances or on Linux in a Consumption plan. This method uses sampled data.\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-monitoring","timestamp":"1610423400.0","upvote_count":"4","poster":"Deep007","comment_id":"265283"}],"comment_id":"263944","upvote_count":"12","poster":"[Removed]","content":"I think the answer should be (D) - Add new diagnostics settings.\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-monitor-log-analytics?tabs=csharp\n\"From the Monitoring section of your function app in the Azure portal, select Diagnostic settings, and then select Add diagnostic setting.\"\n\nLive Metrics is used for monitoring a live system and should not be necessary in a development environment, because there are not that many events to use the \"big canon\".\nhttps://docs.microsoft.com/en-us/azure/azure-monitor/app/live-stream"},{"content":"I do not understand the explanation: CONNECT Live Metrics Stream from Application Insights TO THE AZURE FUNCTION app and filter the metrics... Functions have InSights integrated by default. I presume, I should check collected data somehow. But not connect anything... ?","poster":"JVTM","comment_id":"220313","upvote_count":"5","timestamp":"1605530040.0"}],"answers_community":["A (67%)","C (33%)"],"unix_timestamp":1605530040,"question_id":62,"isMC":true,"exam_id":48,"url":"https://www.examtopics.com/discussions/microsoft/view/37097-exam-az-204-topic-17-question-1-discussion/","topic":"17","question_images":[],"timestamp":"2020-11-16 13:34:00","answer_images":[],"choices":{"A":"Connect Live Metrics Stream from Application Insights to the Azure Function app and filter the metrics.","B":"Create a new Azure Log Analytics workspace and instrument the Azure Function app with Application Insights.","D":"Add a new diagnostic setting to the Azure Function app to send logs to Log Analytics.","C":"Update the Azure Function app with extension methods from Microsoft.Extensions.Logging to log events by using the log instance."},"answer":"A","question_text":"You need to investigate the Azure Function app error message in the development environment.\nWhat should you do?"},{"id":"jSK8Ocg0IszetLBFzimb","question_images":["https://www.examtopics.com/assets/media/exam-media/04273/0042900001.png"],"topic":"17","answer_ET":"","answers_community":[],"exam_id":48,"answer_description":"","answer":"","timestamp":"2021-03-12 20:58:00","unix_timestamp":1615579080,"isMC":false,"url":"https://www.examtopics.com/discussions/microsoft/view/46762-exam-az-204-topic-17-question-2-discussion/","answer_images":["https://img.examtopics.com/az-204/image626.png"],"question_text":"HOTSPOT -\nYou need to configure security and compliance for the corporate website files.\nWhich Azure Blob storage settings should you use? To answer, select the appropriate options in the answer area.\nNOTE: Each correct selection is worth one point.\nHot Area:\n//IMG//","discussion":[{"upvote_count":"107","content":"shared access signature (SAS) token\nchange feed","timestamp":"1618582680.0","poster":"clarionprogrammer","comment_id":"337059","comments":[{"content":"received 2023-04-17 went with above, score 926","comment_id":"872512","upvote_count":"8","timestamp":"1681722360.0","poster":"surprise0011"}]},{"comment_id":"371970","comments":[{"content":"Answer : C) SAS, B) change feed.\nGoing to go with SAS. \nThere still does not seem to be access to blob storage even in Premium with managed identity.\nAt least I cannot find it.","comment_id":"1237916","upvote_count":"1","poster":"1CY1","timestamp":"1719469740.0"},{"content":"Professor is back :)))","comment_id":"475014","upvote_count":"9","poster":"huhezculynvhzaljgs","timestamp":"1636483920.0"},{"poster":"edengoforit","comment_id":"530274","timestamp":"1642915800.0","content":"File access must restrict access by IP, protocol, and Azure AD rights.\n\n\nAuditing of the file updates and transfers must be enabled to comply with General Data Protection Regulation (GDPR). The file updates must be read-only, stored in the order in which they occurred, include only create, update, delete, and copy operations, and be retained for compliance reasons.","upvote_count":"1"}],"upvote_count":"62","timestamp":"1622559000.0","poster":"mlantonis","content":"Box 1: shared access signature (SAS) token\nAccording to the diagram, blob storage is accessed from Azure CDN. Azure CDN doesn't support authentication with managed identity. If you want to grant limited access to private storage containers, you can use the Shared Access Signature (SAS) feature of your Azure storage account. Also, using a managed identity you can't restrict access by IP as requested.\n\nBox 2: change feed\nThe purpose of the change feed is to provide transaction logs of all the changes that occur to the blobs and the blob metadata in your storage account.\nThe file updates must be read-only, stored in the order in which they occurred, include only create, update, delete, and copy operations, and be retained for compliance reasons.\n\nReference:\nhttps://docs.microsoft.com/en-us/azure/cdn/cdn-sas-storage-support\nhttps://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-change-feed?tabs=azure-portal"},{"upvote_count":"2","timestamp":"1723439100.0","poster":"4b6d959","comment_id":"1264484","content":"Got this case City Power and Lights on my exam 9th Aug 2024. Went with highly voted answer, Scored:871\n- shared access signature (SAS) token\n- change feed"},{"timestamp":"1688912820.0","upvote_count":"2","poster":"applepie","comment_id":"947325","content":"An example of Access storage blobs using an Azure CDN custom domain \nIt's using SAS. \nhttps://learn.microsoft.com/en-us/azure/cdn/cdn-storage-custom-domain-https"},{"comment_id":"907815","timestamp":"1685169960.0","poster":"Vmwarevirtual","content":"Appeared the exam I toke at 27-5-2023\nI chose SAS and change feed \n\nhttps://docs.microsoft.com/en-us/azure/cdn/cdn-sas-storage-support\nhttps://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-change-feed?tabs=azure-portal","upvote_count":"1"},{"comment_id":"896111","upvote_count":"2","poster":"aragones","timestamp":"1683913680.0","content":"Got this 2023-05-12.\nMake sure to prepare VanArsdel Inc Canada study case"},{"comment_id":"747667","content":"Got this on Dec 16th, 2022. Scored 921 and answered SAS token and change feed.","poster":"st0rmtrooperx","upvote_count":"6","timestamp":"1671230100.0"},{"upvote_count":"3","comment_id":"720692","poster":"OPT_001122","content":"SAS\nchange feed","timestamp":"1668705780.0"},{"content":"RBAC and change feed.\nwhy RBAC? Triggering keywords for me are \"Azure AD\" and \"restrict File Access\". It seems that some kind of authorization is set for groups.","upvote_count":"2","comment_id":"701549","poster":"coffecold","timestamp":"1666445160.0"},{"poster":"Eltooth","content":"SAS token\nchange feed","timestamp":"1656163140.0","comment_id":"622140","upvote_count":"3"},{"upvote_count":"1","comment_id":"563158","content":"shared access signature (SAS) token\nchange feed","poster":"AzureDJ","timestamp":"1646735280.0"},{"timestamp":"1645733520.0","upvote_count":"3","comment_id":"555531","content":"Answer: SAS/Change Feed\n\nFrom problem description:\n\"Security -\nFile access must restrict access by IP, protocol, and Azure AD rights.\"\n\nThe keyword here is IP. \n\nFrom https://docs.microsoft.com/en-us/azure/cdn/cdn-sas-storage-support\n\"With a SAS, you can define various parameters of access to a blob, such as start and expiry times, permissions (read/write), and IP ranges. \"\n\nSAS is from AD so you get the AD rights.\n\nFor Change Feed see: https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-change-feed?tabs=azure-portal","poster":"kozchris"},{"timestamp":"1643436000.0","upvote_count":"2","poster":"leonidn","content":"Agree on RBAC.\nChange feed\n\nThe change feed provides ordered, guaranteed, durable, immutable, read-only log of these changes. https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-change-feed?tabs=azure-portal","comment_id":"535221"},{"timestamp":"1628616720.0","upvote_count":"7","poster":"cool_tool","comments":[{"upvote_count":"1","timestamp":"1629819060.0","poster":"ning","comment_id":"430871","content":"Correct, file access is AD User based rights. IP and Protocol, can be configured separately"}],"content":"RBAC\nchange feed","comment_id":"422901"},{"upvote_count":"4","poster":"Kuna_Lambo","timestamp":"1615579080.0","content":"managed identity\nchange feed","comments":[{"comment_id":"310633","upvote_count":"10","timestamp":"1615736040.0","comments":[{"content":"Thanks, I think you are right.","upvote_count":"1","timestamp":"1616146620.0","poster":"Kuna_Lambo","comment_id":"314715"},{"content":"See the arrow -- Flow is from Storage to CDN.\nDiagram does not show, how Storage is populated.\nNo one will populate storage via CDN","timestamp":"1626374940.0","comment_id":"407388","upvote_count":"2","poster":"jay158"},{"content":"Exactly, and using a managed identity you can't restrict access by IP as requested. User delegation SAS is the right choice in this case (you need AAD integration) and change feed is the service designed for file audits.\nhttps://docs.microsoft.com/en-us/rest/api/storageservices/create-user-delegation-sas\nhttps://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-change-feed?tabs=azure-portal","comments":[{"poster":"kwaazaar","content":"But RBAC is supported on file shares too. It needs Azure AD Domain Services, I think.","timestamp":"1617870000.0","comment_id":"330998","upvote_count":"1"}],"upvote_count":"16","timestamp":"1616571360.0","comment_id":"318881","poster":"rdemontis"}],"content":"According to the diagram, blob storage is accessed from Azure CDN. Azure CDN doesn't support authentication with managed identity. I think the correct answer is Shared Access Token. https://docs.microsoft.com/en-us/azure/cdn/cdn-sas-storage-support","poster":"inputoutput"}],"comment_id":"309117"}],"question_id":63},{"id":"sa9xG2Fub8IcFL3PX2Aj","answer_ET":"C","timestamp":"2021-03-24 14:20:00","topic":"18","question_images":[],"unix_timestamp":1616592000,"question_id":64,"isMC":true,"answer":"C","exam_id":48,"question_text":"You need to correct the RequestUserApproval Function app error.\nWhat should you do?","answer_description":"","url":"https://www.examtopics.com/discussions/microsoft/view/48078-exam-az-204-topic-18-question-1-discussion/","answer_images":[],"choices":{"B":"Configure the Function app to use an App Service hosting plan. Enable the Always On setting of the hosting plan.","D":"Update the functionTimeout property of the host.json project file to 15 minutes.","A":"Update line RA13 to use the async keyword and return an HttpRequest object value.","C":"Update the function to be stateful by using Durable Functions to process the request payload."},"answers_community":["C (100%)"],"discussion":[{"content":"Answer is correct. In addition you can see this pattern in microosoft documentation and it's known as Human Interaction.\nhttps://docs.microsoft.com/en-us/azure/azure-functions/durable/durable-functions-overview?tabs=csharp#human","poster":"rdemontis","comments":[{"poster":"surprise0011","upvote_count":"3","content":"received 2023-04-17 went with given answer, score 926","comment_id":"872511","timestamp":"1681722300.0"}],"upvote_count":"36","comment_id":"319130","timestamp":"1616592000.0"},{"timestamp":"1623181020.0","upvote_count":"11","content":"http trigger timeout is maxed to 230 seconds, so the only available option is to change to a durable one","poster":"nflappo89","comment_id":"377760","comments":[{"poster":"maukaba","content":"\"Regardless of the function app timeout setting, 230 seconds is the maximum amount of time that an HTTP triggered function can take to respond to a request. This is because of the default idle timeout of Azure Load Balancer. For longer processing times, consider using the Durable Functions async pattern or defer the actual work and return an immediate response.\" REF: https://docs.microsoft.com/en-us/azure/azure-functions/functions-scale","upvote_count":"2","timestamp":"1637604240.0","comment_id":"484442"}]},{"comment_id":"1312914","poster":"68bcf10","content":"when considering GDPR compliance for Azure Storage, you should generally prefer using Azure RBAC (Role-Based Access Control) over SAS (Shared Access Signature) to manage access to your data","upvote_count":"1","timestamp":"1731725640.0"},{"content":"Selected Answer: C\nA: Wrong : excluding async keyword results in a compile time error, not runtime.\nB: Wrong : enabling always on would relate to timeout not bad request.\nD: Wrong : functionTimeout property would relate to timeout not bad request.\nC: Correct : Durable function.","upvote_count":"1","poster":"1CY1","timestamp":"1719533220.0","comment_id":"1238431"},{"content":"How did it get this error message: 'Timeout value of 00:10:00 exceeded by function: RequestUserApproval'? If the max timeout for HTTP trigger is 230 seconds...","upvote_count":"3","poster":"oskx2","comment_id":"1188295","comments":[{"poster":"Jay456","upvote_count":"1","comment_id":"1320103","timestamp":"1732949700.0","content":"I am wondering the exact same thing. It makes me doubt all my core beliefs."}],"timestamp":"1712089440.0"},{"comment_id":"720696","timestamp":"1668705900.0","content":"Selected Answer: C\nDurable Function.","upvote_count":"2","poster":"OPT_001122"},{"timestamp":"1656150180.0","content":"Selected Answer: C\nC is correct answer.\nDurable Function.","comment_id":"622078","poster":"Eltooth","upvote_count":"4"},{"comment_id":"414747","timestamp":"1627308420.0","poster":"MrXBasit","upvote_count":"3","content":"Answer is 100% correct"},{"timestamp":"1622373360.0","comments":[{"upvote_count":"1","content":"Maximum timeout you can set is 10 min in consumption plan. Unless you go to premium which is unlimited:\nhttps://docs.microsoft.com/en-us/azure/azure-functions/functions-scale","timestamp":"1637604060.0","poster":"maukaba","comment_id":"484438"},{"content":"\"if you have a long running function switch to Durable Functions\" - actually, that is one of the features of DF. Modifying the function app timeout will do nothing. There is a hard limit of 230 seconds of timeout. Anything larger than that, use DF, state or no state.","upvote_count":"2","comment_id":"619239","timestamp":"1655726160.0","poster":"xRiot007"}],"comment_id":"370126","content":"I think here the answer is just to increase the functionTimeout.\n\nDurable Functions are used when you want to introduce a state, it is not just \"if you have a long running function switch to Durable Functions\".\n\nAnother argument against Durable Functions is that architectural change seem to be out of scope for this case study.\n\nAnother argument is that function can run for up to 30 mins.","poster":"farich","upvote_count":"3"}]},{"id":"KMT9bNi5m7QK10vQCOm6","topic":"19","timestamp":"2021-04-03 14:51:00","question_images":["https://www.examtopics.com/assets/media/exam-media/04273/0043700001.png"],"answer_ET":"","answer":"","exam_id":48,"answers_community":[],"url":"https://www.examtopics.com/discussions/microsoft/view/48932-exam-az-204-topic-19-question-1-discussion/","question_text":"DRAG DROP -\nYou need to implement the Log policy.\nHow should you complete the Azure Event Grid subscription? To answer, drag the appropriate JSON segments to the correct locations. Each JSON segment may be used once, more than once, or not at all. You may need to drag the split bar between panes to view content.\nNOTE: Each correct selection is worth one point.\nSelect and Place:\n//IMG//","answer_description":"Box 1:WebHook -\nScenario: If an anomaly is detected, an Azure Function that emails administrators is called by using an HTTP WebHook. endpointType: The type of endpoint for the subscription (webhook/HTTP, Event Hub, or queue).\n\nBox 2: SubjectBeginsWith -\nBox 3: Microsoft.Storage.BlobCreated\n\nScenario: Log Policy -\nAll Azure App Service Web Apps must write logs to Azure Blob storage. All log files should be saved to a container named logdrop. Logs must remain in the container for 15 days.\n\nExample subscription schema -\n{\n\"properties\": {\n\"destination\": {\n\"endpointType\": \"webhook\",\n\"properties\": {\n\"endpointUrl\": \"https://example.azurewebsites.net/api/HttpTriggerCSharp1?code=VXbGWce53l48Mt8wuotr0GPmyJ/nDT4hgdFj9DpBiRt38qqnnm5OFg==\"\n}\n},\n\"filter\": {\n\"includedEventTypes\": [ \"Microsoft.Storage.BlobCreated\", \"Microsoft.Storage.BlobDeleted\" ],\n\"subjectBeginsWith\": \"blobServices/default/containers/mycontainer/log\",\n[1]\n\"isSubjectCaseSensitive \": \"true\"\n}\n}\n}\nReference:\nhttps://docs.microsoft.com/en-us/azure/event-grid/subscription-creation-schema","isMC":false,"unix_timestamp":1617454260,"answer_images":["https://www.examtopics.com/assets/media/exam-media/04273/0043700002.png"],"question_id":65,"discussion":[{"upvote_count":"28","comment_id":"334819","comments":[{"poster":"gmishra88","timestamp":"1664701560.0","upvote_count":"3","comment_id":"684722","comments":[{"comment_id":"1238429","timestamp":"1719532260.0","upvote_count":"1","comments":[{"upvote_count":"1","poster":"Jay456","content":"Yeah, but this is sending an event for every log file that is created.","timestamp":"1732950180.0","comment_id":"1320106"},{"upvote_count":"1","timestamp":"1719532320.0","comment_id":"1238430","content":"Also, what was your alternative?","poster":"1CY1"}],"poster":"1CY1","content":"If an anomaly is detected, an Azure Function that emails administrators is called by using an HTTP WebHook."}],"content":"You mean to say that documentation link has eventType as \"Webhook\" as an example. But isn't that an example? Where is the reference to say it is a webhook? The question itself is not clear"}],"timestamp":"1618333140.0","content":"Looks correct based on the provided reference.\nhttps://docs.microsoft.com/en-us/azure/event-grid/subscription-creation-schema","poster":"clarionprogrammer"},{"comments":[{"poster":"OPT_001122","comment_id":"740812","upvote_count":"2","timestamp":"1670665200.0","content":"Thanks again for this great help!!"},{"content":"Dude, you are awesome, Seems like you have provided this for all case study questions. Thanks a ton!","timestamp":"1690050960.0","upvote_count":"3","poster":"ks321","comment_id":"959776"}],"timestamp":"1666946280.0","comment_id":"706280","upvote_count":"22","content":"To prevent reading the cases multiple times:\nPlease see the spots below where you can find the questions (page/topic/question/subject)\nProseware, Inc.\n53 19 1 ARM for Azure Event Grid subscription, enable + filter logging\n53 19 2 use Application Insights for scaling\n53 19 3 code : telemetry filter/ telemetry processor\n53 19 4 code : telemetry initializer\n55 25 1 code : if-then condition on properties of incomming event from GRID\n56 25 2 code : class for login event, properties needed\n56 25 3 code : programatically update application settings for blob\n56 26 1 azure function delay : always on and tier","poster":"coffecold"},{"comment_id":"1071597","timestamp":"1700063100.0","content":"By googling the case study i found more text that fits more appropriately:\n\nPolicies\nLog policy\nAll Azure App Service Web Apps must write logs to Azure Blob storage. All log files should be saved to a container named logdrop. Logs must remain in the container for 15 days.","poster":"bluetopp","comments":[{"timestamp":"1703753040.0","content":"this text is already in...","comment_id":"1107572","poster":"bp_a_user","upvote_count":"2"}],"upvote_count":"1"},{"poster":"gmishra88","comment_id":"689211","content":"It looks correct purely based on options and there is no need to read the big scenario. But I wonder why it is reacting on logdrop container events. That's where the service itself is writing log files to. Won't it create an endless loop?","upvote_count":"3","comments":[{"content":"\"All Azure App Service Web Apps must write logs to Azure Blob storage\"\n-There are n (production) Web apps that write logs to a blob storage. \n-On that blob storage an event grid is put to trigger the event when blobs are written.\n-From that event a function is triggered, doing great thing with policies.","timestamp":"1667803440.0","poster":"coffecold","upvote_count":"2","comment_id":"712852"},{"comments":[{"poster":"acjdev514","upvote_count":"1","content":"hahaha gmishra88","comment_id":"1020021","timestamp":"1695912720.0"}],"timestamp":"1665227040.0","content":"marvelous microsoftiness, probably this is for the subscription for the anomaly detection service and not the policy service where they expliclty mentioned event grid to confuse you. Once you pass this exam, the certification can be used when applying for a job at CSI new york. For finding clues where they do not exist.","upvote_count":"12","poster":"gmishra88","comment_id":"689213"}],"timestamp":"1665226860.0"},{"poster":"edengoforit","timestamp":"1642918380.0","upvote_count":"3","content":"What is a webhook and how do you use it?\nWebhooks are automated messages sent from apps when something happens. They have a message—or payload—and are sent to a unique URL—essentially the app's phone number or address. Webhooks are almost always faster than polling, and require less work on your end. They're much like SMS notifications.","comment_id":"530292"},{"comments":[{"poster":"coffecold","comment_id":"702015","upvote_count":"1","content":"It's in the text:\n\"You develop and deploy a stateful ASP.NET Core 2.1 web application named Policy service to an Azure App Service Web App. The application reacts to events from Azure Event Grid and performs policy actions based on those events\"\nThe controller of \"Policy service\" is given in the code EventGridController.cs. \n\nSo the subscription in Grid triggers a webhook to the Policy service and executes the 'Process' controller function there .","timestamp":"1666513920.0"}],"poster":"gfiorini","comment_id":"482542","upvote_count":"5","content":"The question is really worded poorly. The subscription is for events that are inserted into the container and a webhook is invoked when a log file is created in the storage container. I assume that the webhook point to a function (?) that analyze the log with a machine learning model and THEN if there is an anomaly call an azure function to notify adminstrator via mail. Am I missing something ?","timestamp":"1637412780.0"},{"timestamp":"1629109500.0","upvote_count":"3","content":"> an Azure Function that emails administrators is called by using an HTTP WebHook\n\nThe question is about the EventGrid subscription, not how another Function is called. How do they fit together?","poster":"mc0re","comments":[{"upvote_count":"1","poster":"MiraA","comment_id":"458518","comments":[{"upvote_count":"1","poster":"MiraA","timestamp":"1633581660.0","content":"Endpoint properties based on the \"destination\" type:\nhttps://docs.microsoft.com/en-us/azure/templates/microsoft.eventgrid/eventsubscriptions?tabs=json#endpointproperties-object","comment_id":"458519"}],"content":"I am missing \"properties\" section within \"destination\" key to define either \"endpointUrl\" or \"resourceId\".\n\nhttps://docs.microsoft.com/en-us/azure/event-grid/subscription-creation-schema#example-subscription-schema\nhttps://docs.microsoft.com/en-us/azure/event-grid/handler-event-hubs#event-hub","timestamp":"1633581480.0"}],"comment_id":"425724"},{"timestamp":"1621702560.0","poster":"UnknowMan","content":"Correct !","upvote_count":"2","comment_id":"363815"},{"content":"Correct !","poster":"UnknowMan","comment_id":"363530","upvote_count":"2","timestamp":"1621673220.0"},{"content":"https://docs.microsoft.com/en-us/azure/templates/microsoft.eventgrid/eventsubscriptions?tabs=json#template-format","poster":"jokergester","timestamp":"1617454260.0","upvote_count":"1","comment_id":"327360"}]}],"exam":{"isBeta":false,"numberOfQuestions":452,"id":48,"name":"AZ-204","isImplemented":true,"provider":"Microsoft","lastUpdated":"12 Apr 2025","isMCOnly":false},"currentPage":13},"__N_SSP":true}