{"pageProps":{"questions":[{"id":"8fhjfeKea9UDwU32sFwL","answers_community":[],"url":"https://www.examtopics.com/discussions/microsoft/view/38454-exam-az-104-topic-5-question-96-discussion/","question_images":["https://www.examtopics.com/assets/media/exam-media/04223/0049800002.png","https://www.examtopics.com/assets/media/exam-media/04223/0049900001.png","https://www.examtopics.com/assets/media/exam-media/04223/0049900002.png","https://www.examtopics.com/assets/media/exam-media/04223/0049900003.png","https://www.examtopics.com/assets/media/exam-media/04223/0049900004.jpg"],"timestamp":"2020-12-02 12:29:00","answer_description":"Box 1: Yes -\nThe inbound security rule for NSG1 allows TCP port 1433 from 10.10.2.0/24 (or Subnet2 where VM2 and VM3 are located) to 10.10.1.0/24 (or Subnet1 where\nVM1 is located) while the inbound security rule for NSG2 blocks TCP port 1433 from 10.10.2.5 (or VM2) to 10.10.1.5 (or VM1). However, the NSG1 rule has a higher priority (or lower value) than the NSG2 rule.\n\nBox 2: Yes -\nNo rule explicitly blocks communication from VM1. The default rules, which allow communication, are thus applied.\n\nBox 3: Yes -\nNo rule explicitly blocks communication between VM2 and VM3 which are both on Subnet2. The default rules, which allow communication, are thus applied.\nReference:\nhttps://docs.microsoft.com/en-us/azure/virtual-network/security-overview","answer_images":["https://www.examtopics.com/assets/media/exam-media/04223/0050000001.jpg"],"question_id":536,"answer":"","topic":"5","discussion":[{"timestamp":"1606908540.0","poster":"JohnAvlakiotis","comments":[{"comment_id":"245381","poster":"rusll","comments":[{"comment_id":"938598","upvote_count":"2","timestamp":"1688078280.0","content":"Pour le trafic entrant les regles NSG attachees au Reseau sont prioritaires","poster":"Patesso"}],"timestamp":"1608110520.0","upvote_count":"5","content":"I agree, mixing the rules would create a problem : in case we have two rules with the same priority, how would we decide ..."},{"timestamp":"1608227520.0","content":"The NSG2 blocks INBOUND requests, not OUTBOUND, hence VM2 can reach VM1.","comment_id":"246716","upvote_count":"11","poster":"rcdumps","comments":[{"poster":"JamesDC","upvote_count":"22","comments":[{"upvote_count":"1","content":"What you're saying is that for traffic between different subnets within a VNET, inbound rules block outbound connections - is there any source to document this? For now I am not convinced and would go for YYY...","poster":"Batiste2023","timestamp":"1699798080.0","comment_id":"1068568"}],"comment_id":"281642","content":"Oh Dear!... do you understand VM2 and VM is on different subnets and both NSGs are applicable on subnet1 resources... so, there's no concept of outbound rule... Agree with Jhon, NSG1 is on subnet and NSG2 is on NIC, even VM2 can enter to the sunbet1 but NSG2 will block while going to VM1.","timestamp":"1612244340.0"},{"poster":"tita_tovenaar","timestamp":"1625935920.0","upvote_count":"5","comment_id":"403448","content":"thought so too but it is wrong. Look at the destination addresses.\nBasically you can imagine that NSG1 covers subnet 1 and NSG2 covers VM1 specifically. Tricky question, but answer is No. VM3 could RDP into VM1, if that makes it more clear."},{"poster":"klexams","content":"NSG2 is on VM1 so it block inbound to VM1.","comment_id":"701264","upvote_count":"3","timestamp":"1666403040.0"}]},{"upvote_count":"2","comment_id":"635344","poster":"Bhuw","content":"Think you're correct\nhttps://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works#inbound-traffic","timestamp":"1658516400.0"},{"timestamp":"1702846800.0","upvote_count":"1","comments":[{"comments":[{"content":"typo NSG2 (remove subnet) at VM level","poster":"bhadrisn","upvote_count":"1","timestamp":"1703047200.0","comment_id":"1101219"},{"content":"You are right, I misread. Thank you","poster":"Indy429","comment_id":"1102715","upvote_count":"3","timestamp":"1703174760.0"}],"content":"@Indy, NSG1 is at subnet level and NSG2 is at VM level, so, when the traffic flows, NSG1 subnet is evaluated first and then if passed, NSG2 subnet at VM level is evaluated. Here, the number priority doesnt come into picture. So, correct answer is No, Yes, Yes","upvote_count":"8","timestamp":"1703047140.0","poster":"bhadrisn","comment_id":"1101218"}],"comment_id":"1099218","content":"This is wrong. \"A number between 100 and 4096. Rules are processed in priority order, with lower numbers processed before higher numbers, because lower numbers have higher priority. Once traffic matches a rule, processing stops. As a result, any rules that exist with lower priorities (higher numbers) that have the same attributes as rules with higher priorities aren't processed.\nAzure default security rules are given the highest number with the lowest priority to ensure that custom rules are always processed first.\"\nSo it should be Yes - Yes - Yes.\nSource: https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview","poster":"Indy429"},{"comment_id":"771899","timestamp":"1673393940.0","content":"This is a bit confusing but remember, NSGs attached at the subnet level get priority. Since NSG1 is attached to VNET1- Subnet1, it takes priority over NSG2, which is attached to VM1(this would have to be attached to the NIC).","upvote_count":"4","comments":[{"timestamp":"1673394060.0","content":"NSG1 also has a lower priority (101) as well so it would take priority based on the rule priority.","comment_id":"771901","upvote_count":"1","poster":"darthfodio","comments":[{"comments":[{"poster":"MOSES3009","content":"I will add that this is for incoming traffic, for outgoing is the reverse order.","comment_id":"1069318","timestamp":"1699880400.0","upvote_count":"2"}],"upvote_count":"1","timestamp":"1699278960.0","comment_id":"1063896","poster":"01111010","content":"We can't compare NSG priorities from different groups. There's a hierarchy:\n1. VNET NSG is evaluated\n2. Subnet NSG is next\n3. NIC/IP NSG follows"}]},{"comment_id":"773332","upvote_count":"13","content":"Subnet attached NSGs don't have priority over NIC attached NSGs. It depends of whether he traffic is inbound or outbound -\nhttps://learn.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works","poster":"BJack","timestamp":"1673517240.0"}],"poster":"darthfodio"},{"timestamp":"1691297220.0","comment_id":"973529","poster":"RickySmith","upvote_count":"6","comments":[{"timestamp":"1695132480.0","comment_id":"1011408","upvote_count":"1","content":"I agree, referencing the example in the link you posted it says:\n\"To allow port 80 to the virtual machine, both NSG1 and NSG2 must have a rule that allows port 80 from the internet.\"\n\nSo in this case we are not talking about priority, we just have rules evaluated BEFORE or AFTER. That means, if the rules were inverted and traffic was blocked from NSG1, then what was written in the rules of NSG2 wouldn't evene matter because the traffic wouldn't have reached the NIC.","poster":"kl8585"}],"content":"With reference to https://learn.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works#inbound-traffic\nThe rules are applied first at the Vnet level and then if allowed at the vnet level, only then at the vm/nic level.\nHence, NYY"}],"upvote_count":"327","comment_id":"232908","content":"I believe it should be No, Yes, Yes. The NSG2 on the NIC of VM1 blocks the request that passes through NSG1 which is attached on the subnet. There is no priority bypass between NSGs. Traffic is filtered independently between NSGs."},{"comment_id":"249188","timestamp":"1608543720.0","upvote_count":"193","comments":[{"poster":"monus","upvote_count":"2","comment_id":"448192","timestamp":"1632138480.0","content":"yes, NSG at subnet as well as VM has to be open in order to allow traffic"},{"timestamp":"1646642940.0","comment_id":"562475","content":"but by default tcp3389 blocked in nsg for vm3 right..","comments":[{"content":"from internet, not vnet","poster":"lebeyic620","upvote_count":"1","comment_id":"1191039","timestamp":"1712504820.0"}],"upvote_count":"2","poster":"subramani2018"},{"timestamp":"1632385500.0","comment_id":"450048","content":"Your answer is correct. NYY. Just a small correction. For traffic from VM1 two network security groups apply but both have the default rule AllowVnetOutbound so the outbound traffic to VM2 is allowed. For VM2 no network security group applies so the inbound traffic is allowed as well.","poster":"MrJR","upvote_count":"4"},{"upvote_count":"9","comment_id":"254836","poster":"RogerDingo","timestamp":"1609255680.0","content":"thanks for confirming.. i came to the same conclusion as you."},{"comment_id":"445464","upvote_count":"4","content":"Here explanation priority Subnet over NIC: https://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works","timestamp":"1631739180.0","poster":"LeomHD"}],"content":"1. NO - VM1 has the NSG1 on Subnet1, which allows traffic over port 1433 between Subnet2 and Subnet1. BUT NSG2 also applied on NIC level for VM1 that blocks the traffic on port 1433. Hence No traffic allowed. Answer is NO.\n\n2. YES - For VM2 there are no NSGs applied neither on subnet or NIC level hence all traffic is allowed.\n\n3. YES - For VM3 there are no NSGs applied neither on subnet or NIC level hence all traffic is allowed.","poster":"aaa112"},{"timestamp":"1727440380.0","comment_id":"1290024","upvote_count":"1","poster":"[Removed]","content":"WRONG\n\nNo\nYes\nYes\n\nthere is no NSG applied on VM2 & VM3"},{"poster":"joolitan","content":"- VM2 can connect to TCP port 1433 services on VM1 = No (VM1 use NSG2, inbound block regardless of priority)\n- VM1 can connect to TCP port 1433 services on VM2 = Yes (VM2 no NSG. So, all allowed)\n- VM2 can connect to TCP port 1433 services on VM3 = Yes (VM3 no NSG. So, all allowed)","upvote_count":"2","comment_id":"1288954","timestamp":"1727260260.0"},{"comment_id":"1244546","poster":"adilkhan","timestamp":"1720468320.0","upvote_count":"1","content":"N,Y,Y IS CORRECT"},{"timestamp":"1713173640.0","content":"Solution is NO NO YES . Explanation:\nNO vm2 traffic is blocked by the rule priority 125 from NSG2 at subnet1 when it reach subnet1 before reaching vm1 \nNO vm1 traffic is blocked by the default deny all rule from NSG2 at subnet1 \nYES no NSG present so traffic is allowed by default\n\nThe key here, whenever you push traffic , it goes throug all the steps, outgoing vm > nic > subnet , incoming subnet > nic > vm","upvote_count":"1","comment_id":"1195938","comments":[{"poster":"ashtonez","comment_id":"1195940","content":"Also let me add, that there are no NSG taking precedence over other NSG, you just need to go through all the NSG at every resource (subnet, vm or whatever)","upvote_count":"1","timestamp":"1713173760.0"}],"poster":"ashtonez"},{"timestamp":"1711080000.0","poster":"bobothewiseman","content":"N Y Y\nNSG rules applied at the VM level take precedence over rules applied at the subnet level. If there are conflicting rules, the VM-level rule will be applied.","upvote_count":"1","comment_id":"1179837"},{"timestamp":"1710487980.0","comment_id":"1174106","upvote_count":"1","content":"No\nYes\nYes","poster":"tashakori"},{"comment_id":"1170245","poster":"TSKARAN","upvote_count":"1","content":"Always, we need to take too many assumptions here, the windows built-in firewall, already configured. Windows server is already running the services in the port, TCP/1433","timestamp":"1710066840.0"},{"timestamp":"1707124560.0","comment_id":"1140853","upvote_count":"1","poster":"belyo","content":"as TCP is bi-directional is am wondering is it NO-NO-YES\nVM2 would never be able to confirm anything to VM1 on that blocked tcp port..."},{"content":"I see a lot of people saying that Q1 should be No, but look at the Priorities. Priority 101 is higher than Priority 125 and will thereby be override by 101, so following that logic, it should be:\nYes\nYes\nYes","comment_id":"1099213","timestamp":"1702846320.0","upvote_count":"1","poster":"Indy429","comments":[{"upvote_count":"2","poster":"itismadu","timestamp":"1726848120.0","comment_id":"1286947","content":"priority does not span across NSGs. Each Network Security Group (NSG) operates independently when evaluating its own set of rules. The priority of the rules is only relevant within the same NSG, not across different NSG"},{"poster":"bobothewiseman","content":"because we are right and you are wrong. it should be NYY\nNSG1 and NSG2 are different set of rules. so priority is not a question on this scenario","timestamp":"1712108160.0","upvote_count":"1","comment_id":"1188405"}]},{"content":"1. VM2 to VM1. VM1 is in subnet 1 that has NSG1 associated. This NSG allow inbound TCP 1433. Vm1 has NSG2 associated, which denies traffic from VM2 specifically. Priority doesn’t have anything to do with traffic evaluation because they’re different rules. Then answer No.\n\n2. VM1 to VM2. VM2 is in subnet2 that has no subnet NSG associated, and no VM NSG. VM1 and VM2 are in different subnets in the same VNET, or same address space. Then traffic is allowed. Answer Yes. \nhttps://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview\n\n3. VM2 to VM3. VM2 and VM3 are in the same subnet AND no defined NSGs that deny traffic. Answer Yes. \n\nhttps://learn.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works","upvote_count":"4","timestamp":"1700862840.0","comment_id":"1079616","poster":"josola"},{"comment_id":"1066903","upvote_count":"1","poster":"ziggy1117","content":"N - Y - Y\nIntra-Subnet traffic\nIt's important to note that security rules in an NSG associated to a subnet can affect connectivity between VMs within it. By default, virtual machines in the same subnet can communicate based on a default NSG rule allowing intra-subnet traffic. If you add a rule to NSG1 that denies all inbound and outbound traffic, VM1 and VM2 won't be able to communicate with each other.\n\nhttps://learn.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works\n\nIn our example, its explicit in the NSG NIC rule that VM2 cannot connect to VM1 in the said port","timestamp":"1699583940.0"},{"content":"No, yes, and yes.","timestamp":"1699193340.0","poster":"Ahkhan","upvote_count":"1","comment_id":"1062962"},{"poster":"DWILK","upvote_count":"1","content":"so even though they are applied to different VM's the NSG1 has priority? NO","timestamp":"1698147120.0","comment_id":"1052770"},{"content":"For Inbound traffic, -> Subnet -> NI, NSG rules are evaluated in this sequence.\nFor Outbound traffic, NI-> Subnet -> Vnet , NSG rules are evaluated in this sequence.\nIf there is any explicit deny ( with high priority within that NSG) at any level, traffic will be blocked. So the answer is NYY.","poster":"sumaju","timestamp":"1695886860.0","upvote_count":"1","comment_id":"1019577"},{"comment_id":"1013452","content":"N N Y Here's what I'm thinking about the 2nd one:\n\nNetwork Security Groups have default rules that you can't remove: DenyAllOutBound and DenyAllInBound. \"You can't remove the default rules, but you can override them by creating rules with higher priorities.\" https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview#denyallinbound\n\nWhile the rules of NSG1 and NSG2 don't explicitly block traffic from VM1 to VM2, they do not allow it either. They would still have the default deny all rules at the bottom that can't be removed. Correct me if I'm wrong.","comments":[{"content":"For second one:\n\nVM2 has no NSG - so all the traffic inbound and outbound is allowed inside the VNET;\nVM1 inbound traffic is restricted by NSG1 and NSG2. Outbound rules are not specified, so I assume there are the default ones that ALLOW all traffic.\n\nSo for 2nd answer should be YES.\n\nRef. for default rules: https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview","poster":"kl8585","comment_id":"1015757","upvote_count":"3","timestamp":"1695558780.0"}],"poster":"pcfixok","timestamp":"1695340320.0","upvote_count":"3"},{"poster":"sardonique","timestamp":"1695309720.0","upvote_count":"1","content":"reason why box1 is NO: VM1 is hosting SQL; on VM1's NIC there is NSG2; NSG2 is blocking incoming requests on port 1433 from subnet 2. Now both VM2 and VM3 happen to be connected to subnet2. so neither VM2 nor VM3 will be able to reach the SQL server on VM1, even if traffic is allowed at the subnet level. think about the flow: The requests are coming from VM2 and VM3 on subnet2, they will reach subnet1 because both subnets belong to the same vNet, the requests are allowed by NSG1 to reach VM1 and right there they will be blocked at the NIC level by NSG2","comment_id":"1013224"},{"upvote_count":"2","content":"Port 1433 - SQL Port \nVM2 - Default NSG rules apply - Blocks incoming at Port 1433\nVM1 - NSG1 - at Subnet1 - allows incoming on Port 1433 , NSG2- at NIC on VM1 blocks incoming from VM2 to VM1 (125) - so answer is NO\n\non VM2 from VM1 - incoming at Port 1433 (VM2) - Subnet 2 - Default NSG , VM2 (default NSG) - which blocks Port 1433 - ) default Rule 65000 (Port - any , Source : Virtual Network , Destination : Virtual Network , ALLOW) ---- answer is YES\n\nIncoming on VM3 is same as VM2 , on same Subnet 10.10.2.0 - default rules - same as above - YES","comment_id":"978257","poster":"VV11_SS22","timestamp":"1691727600.0"},{"timestamp":"1689926940.0","upvote_count":"1","poster":"Josete1106","comment_id":"958216","content":"N Y Y is correct!"},{"upvote_count":"1","content":"do we compare priority between two NSG ? \nI am confused in this case\nWhat I think is every priority in within same NSG and not between NSGs","poster":"Mustapha_Hadrich","comment_id":"942692","timestamp":"1688470680.0"},{"content":"I'm confused. I thought if there's no NSG applied, default is auto-deny? so why 2 and 3 are Y?","timestamp":"1687802940.0","comments":[{"content":"Inside the same VNET, traffic is allowed","upvote_count":"1","timestamp":"1694793840.0","poster":"rteinformatica","comment_id":"1008575"}],"comment_id":"934706","poster":"lulzsec2019","upvote_count":"3"},{"upvote_count":"1","content":"Looking at the comments and;\n\nhttps://learn.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works#inbound-traffic\n\nAgree with N,Y,Y.\nAs far as I understated the two NSG rules are processed independently.","comment_id":"929664","timestamp":"1687360260.0","poster":"RandomNickname"},{"timestamp":"1682956440.0","poster":"pgazure","content":"Unless you have a specific reason to, we recommend that you associate a network security group to a subnet, or a network interface, but not both. Since rules in a network security group associated to a subnet can conflict with rules in a network security group associated to a network interface, you can have unexpected communication problems that require troubleshooting.","comment_id":"886453","upvote_count":"1"},{"content":"First box is easy to understand why is \"No\". Think about the traffic flow and the direction to where it will go... The traffic reaches NSG1 on the subnet and it says.. \"OK you may go\", then the next step is the VM and it will reaches the VM NIC and have NSG2 attached that says \"No way, this traffic is blocked\".","poster":"RDIO","upvote_count":"2","comment_id":"880086","timestamp":"1682408520.0"},{"comment_id":"861834","upvote_count":"1","timestamp":"1680679380.0","content":"No: NSG2 block\nYes: default rules NSG1 + NSG2\nYes: traffic in subnet","poster":"Goofer"},{"content":"Hopefully to settle an argument, I lab'd this and tested with IP flow verify:\nY\nN\nY\nThere!","timestamp":"1679826720.0","upvote_count":"1","comment_id":"850894","poster":"sjb666"},{"poster":"Doman01","upvote_count":"2","comment_id":"844722","content":"According to this article\nhttps://learn.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works#inbound-traffic\n\nWhen you look at the specific scenario they created there and this line \"To allow port 80 to the virtual machine, both NSG1 and NSG2 must have a rule that allows port 80 from the internet.\" it is clear that both NSGs would have to allow inboud over TCP 1433 to VM1 for first box to be YES","timestamp":"1679306460.0"},{"comment_id":"830446","upvote_count":"2","poster":"ktrfrnd26","timestamp":"1678060800.0","content":"For inbound traffic, Azure processes the rules in a network security group associated to a subnet first, if there is one, and then the rules in a network security group associated to the network interface, if there is one.\n\nFor outbound traffic, Azure processes the rules in a network security group associated to a network interface first, if there is one, and then the rules in a network security group associated to the subnet, if there is one.\nPer below - https://learn.microsoft.com/en-us/answers/questions/44091/which-will-override-the-other-azure-nsg-on-the-sub"},{"poster":"[Removed]","comment_id":"829218","timestamp":"1677951960.0","content":"When a network security group (NSG) is applied to a subnet and to a network interface card (NIC) of a virtual machine (VM), the rules of both NSGs are evaluated in the following order:\n\nInbound traffic from the internet or other subnets is evaluated against the rules of the NSG applied to the subnet.\n\nIf the traffic is allowed by the subnet NSG, the inbound traffic is then evaluated against the rules of the NSG applied to the NIC.\n\nIf the traffic is allowed by both the subnet NSG and the NIC NSG, the traffic is allowed to the virtual machine.\n\nIf the traffic is denied by either the subnet NSG or the NIC NSG, the traffic is blocked and not allowed to the virtual machine.","upvote_count":"2"},{"upvote_count":"2","comment_id":"803794","content":"Y-Y-Y. Regarding the first one, the allow rule takes precedence because subnet NSGs are evaluated before NIC NSGs for inbound traffic (and vice versa). Nothing to do with cross rule priority numbers.","timestamp":"1675986120.0","comments":[{"upvote_count":"4","content":"For statement 1, after NSG2 is evaluated, NSG1 is evaluated which will block the traffic.","comment_id":"804309","timestamp":"1676033460.0","poster":"zellck"}],"poster":"lkjsatlwjwwge"},{"comments":[{"upvote_count":"3","timestamp":"1676479140.0","comment_id":"809745","content":"Got this in Feb 2023 exam.","poster":"zellck"}],"poster":"zellck","content":"NYY is the answer.\n\nhttps://learn.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works#inbound-traffic\nFor inbound traffic, Azure processes the rules in a network security group associated to a subnet first, if there's one, and then the rules in a network security group associated to the network interface, if there's one. This includes intra-subnet traffic as well.","comment_id":"803507","upvote_count":"4","timestamp":"1675962420.0"},{"comment_id":"798698","upvote_count":"1","comments":[{"content":"They are under the same VNET just different subnets.. as long as they are in the same subnet the allow virtual network inbound rule would set on vm2 and vm3 by default on all ports.","comment_id":"830041","upvote_count":"1","poster":"msingh20","timestamp":"1678030740.0"}],"poster":"DeBoer","timestamp":"1675588020.0","content":"2nd one might be \"NO\" since it's between VNets and the question doesn't state that peering is on... but then 1st one would be \"NO\" as well."},{"upvote_count":"2","content":"NO - VM1 is linked to NSG2 that blocks TCP/1433 from 10.10.2.5 (VM2) to 10.10.1.5 (VM1). Subnet 1 allows the communication but it is blocked on VM1 NIC.\n\nNO - VM2 (the target machine) has no NSG neigther on NIC nor on Subnet 2 - all incoming requests are blocked.\n\nNO - VM3 (the target machine) has no NSG neigther on NIC nor on Subnet 2 - all incoming requests are blocked.","comment_id":"790882","poster":"dagomo","comments":[{"upvote_count":"2","poster":"chikorita","timestamp":"1675780560.0","content":"brother, if no NSG is associated then ALL TRAFFIC IS ALLOWED (default config unlike you come from AWS background)\nNSGs are put in place to restrict traffic","comment_id":"801005"}],"timestamp":"1674928020.0"},{"upvote_count":"6","content":"According thie doc.\nhttps://learn.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works\n\nYou can associate zero, or one, network security group to each virtual network subnet and network interface in a virtual machine.\n\nSo in box1, the traffic flow is VM2→NSG1→NSG2→VM1\nNSG2 will deny it.\n\nBox1 : N\n\nTherefore, it is not that NSG1 Priority is greater than NSG2 as others have said.\nThat refers to the order of RULE in NSG. It does not mean that the NSGs in the whole process are mixed together to compare Priority.","timestamp":"1668925020.0","comment_id":"722426","poster":"KingChuang","comments":[{"upvote_count":"1","content":"Completely agree: the link you provide is very clear on that.\n\nFor inbound trafic from VM2 to VM1:\nVM1: The security rules in NSG1 are processed, since it's associated to Subnet1 and VM1 is in Subnet1. \nThe rule created allows port 1433 inbound, so the traffic is allowed by the security rule\nThe traffic is then processed by NSG2 which denied access to the virtual machine VM1 from VM2. \nBoth NSG1 and NSG2 must have a rule that allows port 1433 from the VM2 subnet or VM2 to allow the connection.\n\nBox 1: NO","timestamp":"1673113680.0","comment_id":"768789","poster":"Alex2022_31"}]},{"upvote_count":"1","comment_id":"717516","poster":"YUNITO","content":"for me is: nyy","timestamp":"1668372060.0"},{"timestamp":"1667043600.0","comment_id":"707162","content":"N = VM2 > no NSG | VM1 > NSG2 inbound > block 10.10.2.0 to 10.10.1.0\nY = VM1 > no NSG outbound | VM2 > no NSG > allowed between subnets by default\nY = VM2 > no NSG | VM3 > no NSG > allowed between subnets by default","upvote_count":"5","poster":"klexams"},{"upvote_count":"8","content":"NO - VM1 is linked to NSG2 that blocks TCP/1433 from 10.10.2.5 (VM2) to 10.10.1.5 (VM1). Subnet 1 allows the communication but it is blocked on VM1 NIC.\n\nNO - VM2 (the target machine) has no NSG neigther on NIC nor on Subnet 2 - all incoming requests are blocked.\n\nNO - VM3 (the target machine) has no NSG neigther on NIC nor on Subnet 2 - all incoming requests are blocked.","comment_id":"706681","comments":[{"upvote_count":"1","timestamp":"1668791880.0","poster":"rupayan87","content":"Resources within the virtual network can communicate with each other privately,\nhttps://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-for-azure-service\n\nhere all Vms are in same Vnet so traffic is open by default. Only Vm1 has a deny rule over NSG which is blocking Vm2 to Vm1 TCP connection","comment_id":"721450"}],"timestamp":"1666980300.0","poster":"matejka"},{"comment_id":"671467","content":"VM1 subnet1: 10.10.1.0/24 ip: 10.10.1.5 NSG2 \nVM2 subnet2: 10.10.2.0/24 ip: 10.10.2.5 ---\nVM3 Subnet2: 10.10.2.0/24 ip: 10.10.2.6 ---\n\n \nFirst : VM2 (10.10.2.5) => VM1 (10.10.1.5) NO (NSG2 - Blocked) \nSecond: VM1 (Subnet1 => 10.10.1.0/24) => VM2 (Subnet2 => 10.10.2.0/24) YES (NSG1 - Allow)\nThird : VM2 (10.10.2.5) => VM3 (10.10.2.6) YES (No NSG rule)","poster":"Mev4953","timestamp":"1663414320.0","upvote_count":"1"},{"upvote_count":"7","poster":"EmnCours","comment_id":"649986","content":"Box 1: Yes -\nThe inbound security rule for NSG1 allows TCP port 1433 from 10.10.2.0/24 (or Subnet2 where VM2 and VM3 are located) to 10.10.1.0/24 (or Subnet1 where\nVM1 is located) while the inbound security rule for NSG2 blocks TCP port 1433 from 10.10.2.5 (or VM2) to 10.10.1.5 (or VM1). However, the NSG1 rule has a higher priority (or lower value) than the NSG2 rule.\n\nBox 2: Yes -\nNo rule explicitly blocks communication from VM1. The default rules, which allow communication, are thus applied.\n\nBox 3: Yes -\nNo rule explicitly blocks communication between VM2 and VM3 which are both on Subnet2. The default rules, which allow communication, are thus applied.","timestamp":"1661134200.0"},{"timestamp":"1656508620.0","content":"answer on box1 is correct\nPriority A number between 100 and 4096. Rules are processed in priority order, with lower numbers processed before higher numbers, because lower numbers have higher priority. Once traffic matches a rule, processing stops. As a result, any rules that exist with lower priorities (higher numbers) that have the same attributes as rules with higher priorities aren't processed.","comment_id":"624664","upvote_count":"1","poster":"Dennis_SOn","comments":[{"upvote_count":"3","timestamp":"1657872120.0","poster":"NotMeAnyWay","comment_id":"631651","content":"The scope of the pirority is limited to the NSG. The priorities do not span to other NSGs that would be very complicated and impracticle. The priority stated for this question is just a distraction."}]},{"comment_id":"621999","timestamp":"1656139980.0","content":"came in today's exam 25/6/2022","poster":"minix","upvote_count":"9"},{"comments":[{"comment_id":"619029","comments":[{"poster":"Lazylinux","timestamp":"1655706900.0","upvote_count":"4","content":"Extra note\nInbound traffic\nNSG applied to subnet: If a subnet NSG has a matching rule to deny traffic, the packet is dropped.\nNSG applied to NIC (Resource Manager) or VM (classic): If VM\\NIC NSG has a matching rule that denies traffic, packets are dropped at the VM\\NIC, even if a subnet NSG has a matching rule that allows traffic.\nOutbound traffic\nNSG applied to NIC (Resource Manager) or VM (classic): If a VM\\NIC NSG has a matching rule that denies traffic, packets are dropped.\nNSG applied to subnet: If a subnet NSG has a matching rule that denies traffic, packets are dropped, even if a VM\\NIC NSG has a matching rule that allows traffic.","comment_id":"619032"}],"timestamp":"1655706840.0","upvote_count":"7","content":"Box2: YES - For VM2 there are no NSGs applied at subnet or NIC level hence all traffic is allowed.\nBox3: YES - For VM3 there are no NSGs applied at subnet or NIC level hence all traffic is allowed.\n\nRead both links are very useful\n\nhttp://gowie.eu/index.php/azure/best-practice/23-nsg-best-practice#:~:text=NSGs%20can%20be%20associated%20to,to%20a%20VM%20or%20NIC.\n\nhttps://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works","poster":"Lazylinux"}],"upvote_count":"15","content":"Pretty sure it is NYY\nBox 1: NO - here is why \"Remember this- The rule closest to destination take precedence over other rules\" i.e. if subnet allows for TCP traffic to flow on port 1433 but the\nNSG denies access/blocks access and is applied to Network interface of VM1 and lets say VM2 tries to access VM1 @ port 1433 then NSG1 applied at subnet level will allow traffic to flow but access will Definitely be denied at NIC level and hence VM2 gets blocked. Remember what i said earlier the NSG rule nearest to destination take precedence and Deny takes precedence over allow assuming the NSG rule has Higher priority (meaning will be applied first). Important Note if you have NSG1 rule with priority 100 (allows RDP traffic 3389) and NSG2 rule with priority 110 (Deny RDP traffic 3389) and both are applied at same level i.e. SUBNET or NIC (If applied at NIC level assume subnet level is allow for example sake) then the NSG1 rule will take precedence and traffic is allowed and Rule NSG2 is NEVER checked - basically has no value","comment_id":"619028","poster":"Lazylinux","timestamp":"1655706780.0"},{"comment_id":"618109","poster":"justjeroen","upvote_count":"2","timestamp":"1655533500.0","content":"no,yes,yes. By default traffic within the VNet is allowed. The only block is NSG2. So only traffic is blocked at VM1"},{"comment_id":"613937","content":"all is yes","upvote_count":"2","poster":"manalshowaei","timestamp":"1654772640.0"},{"poster":"Hemang_Vyas","upvote_count":"2","content":"Its No, Yes, Yes \nConfusion is for VM2 to connect to VM1 over the TCP 1433.\nSo, it won't be able to connect.As per the description VM2 has been assign with the 2 NSG, 1 is attached to the Subnet and ther one is directly attached to VM. \n- VM1 has ip 10.10.1.5 and it is a parth of Subnet 1 - 10.10.1.0/24 (attached with NSG1)\n- NSG1 which is attached to the subnet which will allow the connection to the VM1\n- But NSG2 which is connected to the VM1 Directly will block the request.","comment_id":"611734","timestamp":"1654418520.0"},{"content":"No, Yes , Yes. If there is a NSG in the subnet and one in the NIC, it first process the subnet NSG and if the traffic if permitted it will then check NIC NSG, which means that traffic needs to be allowed in both.","timestamp":"1653344100.0","upvote_count":"1","poster":"GraRoSa","comment_id":"606334"},{"timestamp":"1651051380.0","upvote_count":"1","comment_id":"593001","content":"The correct answer is N Y Y. NSG2 blocks traffic on port 1433 to VM1. The other two will work as VM2 has no restrictions on that port and Vm2 and Vm3 are in the same subnet.","poster":"michaelmorar"},{"poster":"sjb666","timestamp":"1650887580.0","content":"No, Yes, Yes. \nFor inbound traffic, Azure processes the rules in a network security group associated to a subnet first, if there is one, and then the rules in a network security group associated to the network interface, if there is one.\nThe local network interface has the port blocked for VM1. VM2 & VM3 have no restictions.","comment_id":"591649","upvote_count":"1"},{"content":"The answer is NYY.\nMany people didn't read the question carefully. There is no NSG associated with Subnet2, which means all traffic to Subnet2 is allowed.\nAs JohnAvlakiotis explained, the priority only applies in one NSG. In this case, the traffic to VM1 is allowed through NSG1 on Subnet1 but blocked by NSG2 on the nic.","upvote_count":"1","poster":"karrigen","timestamp":"1650525840.0","comment_id":"589174"},{"upvote_count":"2","comment_id":"585363","poster":"techie_11","timestamp":"1649872560.0","content":"On exam 4/12/2022"},{"poster":"Jayad","timestamp":"1648846500.0","comment_id":"579645","content":"Two factors to consider here: rules and priority.\nVM1 - Two NSGs applied. For the same rule in two NSGs, the one with the low priority gets applied:\nhttps://docs.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview\nSo the rules of NSG1 are applied to VM1. \nOther VM have the default rule, which means with the VNET, traffic is allowed.\nSo I'll go with the answer Y Y Y","comments":[{"comments":[{"comment_id":"641430","upvote_count":"1","poster":"adamer","timestamp":"1659468360.0","content":"Incorrect. Answer: NYY\n\nFor traffic to reach the VM. Both NSGs have to be evaluated and each NSG should have a rule to allow the traffic. \n\nCheck similar configuration from MS Example: https://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works#inbound-traffic\n\nThe security rules in NSG1 are processed since it's associated to Subnet1 and VM1 is in Subnet1. Unless you've created a rule that allows port 80 inbound, the traffic is denied by the DenyAllInbound default security rule, and never evaluated by NSG2, since NSG2 is associated to the network interface. If NSG1 has a security rule that allows port 80, the traffic is then processed by NSG2. To allow port 80 to the virtual machine, both NSG1 and NSG2 must have a rule that allows port 80 from the internet."}],"upvote_count":"1","poster":"Ignotus","timestamp":"1658119440.0","content":"Priority is key. 101 comes before 125 and has priority, hence 125 never triggers for that connection\nAnswer: Y Y Y","comment_id":"632827"}],"upvote_count":"4"},{"timestamp":"1647098640.0","comment_id":"566223","content":"NYY - For inbound traffic, the subnet NSG is processed first then the NIC NSG is processed. Both NSGs must allow the traffic to be permitted. For outbound traffic, first the NIC NSG is processed then the subnet NSG - again, both must allow the traffic. There are no NSG's attached to subnet 2 or the VM NICS so all traffic is allowed.\n\nhttps://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works","poster":"MAKH83","upvote_count":"2"},{"comment_id":"563313","content":"First nsg1 will be checked and traffic is allowed, however, nsg2 role is to block sql traffic from vm2 to subnet 1. So answer would be N Y Y","poster":"DES123","timestamp":"1646749920.0","upvote_count":"1"},{"timestamp":"1646575800.0","content":"N, Y, Y is correct and things to remember here is that NSG rules applies to subnet first then to VMs via vNic so priority among NSGs doesn't matter here. \nhttps://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works","upvote_count":"1","poster":"itguy2","comment_id":"562056"},{"poster":"sid132","timestamp":"1646456400.0","comment_id":"561207","upvote_count":"1","content":"On the exam today, 4.March.2022"},{"timestamp":"1646407860.0","content":"Y Y Y\nNGS2 is for inbound traffic and is applied to VM2. Therefore it does not block the outbound traffic at VM2 nor the inbound traffic at VM1","upvote_count":"3","comment_id":"560864","poster":"josevirtual"},{"upvote_count":"3","content":"I vote YES for 1st box \nSince the NSG2 policy applied for inbound traffic. which means if this security rule was/is applied on Outbound security rule on NSG2 then the answer will definitely be - NO\nInbound rule - incoming traffic\nOutbound rule - outgoing traffic","poster":"EleChie","comment_id":"539206","timestamp":"1643836800.0"},{"timestamp":"1643731800.0","upvote_count":"2","poster":"nidhogg","comment_id":"538009","content":"On the exam today, 1.feb.2022\nJust 761/1000, but OK! :D\nThanks to ExamTopics and to you all!"},{"timestamp":"1642683720.0","poster":"Gadzee","upvote_count":"1","content":"Answer is Y, Y, Y\nhttps://www.ccna7.com/you-have-a-virtual-network-named-vnet1-that-contains-the-subnets-shown-in-the-following-table/","comment_id":"528410"},{"timestamp":"1642081500.0","poster":"FabioVi","comment_id":"522863","upvote_count":"2","comments":[{"comment_id":"522923","poster":"FabioVi","timestamp":"1642089000.0","upvote_count":"2","content":"Sorry, my comment was for the previous question: Question #3 Topic 5... :-("}],"content":"The answer should be NO for the 3 options. \n\nNSG1 (that denies by default) is at the Subnet level but NSG2 (that allows) is in the NIC of VM2, so all 3389 incoming traffic would be denied by the default rule in NSG1, because NSG rules at subnet level are processed before NSG rules at NIC level. \n\nSame for Intra-Subnet traffic, because: \"It's important to note that security rules in an NSG associated to a subnet can affect connectivity between VM's within it\"... \nas stated in: https://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works#intra-subnet-traffic"},{"comment_id":"520329","timestamp":"1641745860.0","upvote_count":"1","content":"VM1 example(picture included): https://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works#inbound-traffic","poster":"_punky_"},{"poster":"joergsi","comment_id":"515140","content":"No, and No=> (VM1/2) dedicated block by 125\nYes => (VM2/3) Same Subnet","timestamp":"1641148860.0","upvote_count":"1"},{"content":"No, Yes, Yes.","upvote_count":"2","poster":"JIGT","comment_id":"512062","timestamp":"1640774100.0"},{"poster":"hanyahmed","content":"correct answer \nNo Yes Yes","comment_id":"511212","timestamp":"1640703000.0","upvote_count":"2"},{"content":"Tested (Revision to my previous comment)\nAzure routes traffic between all subnets within a virtual network, by default.\nThe answer is No, Yes, Yes.\nbox1: vm2 cannot connect to vm1 because blocked by nsg2\nbox2: vm1 can connect to vm2 because vm2 doesn't have any nsg attached.\nbox3: vm2 can connect to vm3 because vm3 doesn't have any nsg attached.\n\nhttps://docs.microsoft.com/en-us/azure/virtual-network/tutorial-create-route-table-portal","timestamp":"1638600120.0","upvote_count":"2","comment_id":"493539","poster":"ShanYuen"},{"comments":[{"upvote_count":"3","comment_id":"510635","content":"Within Vnet, subnets are routed by system route\nhttps://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview","timestamp":"1640643600.0","poster":"Snownoodles"}],"comment_id":"493495","content":"Forget about all of firewall rules, vm1 and vm2 is on different subnet and in different address range (/24) how can they connect?\nThere's no additional information about routing here.\nFor statement 3 will be Yes because nsg1 and nsg2 doesn't have rule how they connect when in the same subnet, so AllowVnetInBound will be applied.\nSo think the answer is No, No, Yes.","timestamp":"1638592140.0","poster":"ShanYuen","upvote_count":"2"},{"comment_id":"475490","content":"No,No,Yes\n\nRDP traffic from Internet to VM\nInternet->subnet inbound NSG->VM inbound NSG->VM\n\nRDP traffic between VMs\nVM1->VM1 outbound NSG->VM2 inbound NSG->VM2\n\nNo - traffic is blocked on VM1 inbound NSG\nNo - traffic is blocked on subnet inbound NSG\nYes - traffic is allowed from both VM1 outbound NSG and VM2 inbound NSG","comments":[{"upvote_count":"1","timestamp":"1637873520.0","content":"The subnet inbound rule has an \"ALLOW\" policy","poster":"techni","comment_id":"486933"}],"timestamp":"1636552920.0","upvote_count":"2","poster":"walkwolf3"},{"upvote_count":"3","timestamp":"1635912780.0","comment_id":"471908","content":"Box 1: No -\n\nNSG2 for VM1 on the NIC card blocks anything from 10.10.2.5 which is the address for VM2. Although NSG1 on Subnet1 has an allow action for anything coming from 10.10.2.0/24 when you have an allow and a deny... the deny will always trump allow. Denied.\n\nBox 2: Yes -\nVM2 is on Subnet2. VM2 NIC and Subnet2 have no rules for incoming traffic so the connection is allowed.\n\nBox 3: Yes -\n\nVM3 is on Subnet2 and has no NSG attached. And there are no NSGs on the NIC card either. Therefore, the traffic is allowed.\n\nNote: Traffic is allowed by default when creating subnets.\n\nhttps://docs.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview","poster":"Timock"},{"poster":"Mukesh_Aggarwal_07","comment_id":"451471","content":"No, Yes, Yes.","upvote_count":"1","timestamp":"1632580380.0"},{"timestamp":"1632254880.0","content":"Answer is incorrect.\n\n\n- 101: denies VM2 from connecting to VM1. Outbound traffic. Answer is: NO\n- 125: Although VM2 can't connect to VM1 because of NSG2 rule 125, there is no rule that stops VM1 from connecting to VM2(Inbound vs Outbound rules). The answer is: Yes\n- VM2 & VM3 are on the same subnet and there are no rules that specifically restrict this connection. Answer is Yes.\nNo, Yes, Yes","poster":"AubinBakana","comment_id":"449154","upvote_count":"1"},{"timestamp":"1630243860.0","content":"No, Yes, Yes. Reason : VM2 is not allowed to communicate to VM1 because there is a NSG2 that blocks that specific traffic.","upvote_count":"1","comment_id":"434624","poster":"mwhooo"},{"upvote_count":"1","comments":[{"timestamp":"1632254580.0","content":"Answer is *NOT correct.","comments":[{"comment_id":"465659","timestamp":"1634810220.0","comments":[{"poster":"Holasyaa","timestamp":"1635238380.0","comment_id":"467934","content":"So true\nJust to confuse others\nDelete them or better don't write \nAnyways your answers are wrong","upvote_count":"2"}],"poster":"matapolillas","upvote_count":"3","content":"you always do the same, you first give an answer, then you reply to yourself denying your first answer and saying otherwise.. stop trying to confuse people!"}],"comment_id":"449150","upvote_count":"1","poster":"AubinBakana"}],"content":"Answer is correct.\n\n\n - 101 denies VM2 from connecting to VM1. Outbound traffic. Answer is: NO\n-125: Although VM2 can't connect to VM1 because of NSG2 rule 125, there is no rule that stops VM1 from connecting to VM2(Inbound vs Outbound rules). The answer is: Yes\n- VM2 & VM3 are on the same subnet and there are no rules that specifically restrict this connection. Answer is Yes.\nNo, Yes, Yes","timestamp":"1630072260.0","poster":"AubinBakana","comment_id":"433135"},{"content":"Priority A number between 100 and 4096. Rules are processed in priority order, with lower numbers processed before higher numbers, because lower numbers have higher priority. Once traffic matches a rule, processing stops. As a result, any rules that exist with lower priorities (higher numbers) that have the same attributes as rules with higher priorities are not processed.\nhttps://docs.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview#security-rules","timestamp":"1628880480.0","upvote_count":"3","comment_id":"424506","poster":"thuylevn"},{"content":"Y, Y ,Y \nNSG1 rule has a higher priority (or lower value) than the NSG2 rule","poster":"thuylevn","timestamp":"1628880300.0","comment_id":"424504","upvote_count":"4"},{"upvote_count":"3","poster":"s1inkan","comment_id":"415787","timestamp":"1627430280.0","content":"The NGS2 rule doesn't make sense. It's an inbound rule but the destination is a different subnet. It's not Vnet to Vnet so no peering, it's not going through anything. It's a bad rule. If it is actually meant to be inbound and not outbound (typo). VM2 can connect to TCP/1433 VM1 and it's a tricky question. Because VM2 denies only 'inbound' requests from it's own subnet to VM1 subnet.\nIf the NSG2 was outbound request it would deny the connection.\n\nThe only way this inbound block would work is if someone on 10.10.1.0 was spoofing an IP address... I think"},{"content":"This question was on Jul 23, 2021 - passed the exam. Answers given by mlantonis are correct.","poster":"Jotess","timestamp":"1627130580.0","comment_id":"413187","upvote_count":"3"},{"content":"Answer: NYY\n\nFrom the explanation \"However, the NSG1 rule has a higher priority (or lower value) than the NSG2 rule.\" <<< This is wrong since the priority it's in a different NSG, the filter for NSG2 it's applied at a nic level hence it pass though the rules again.","poster":"SpicyMonkey","comment_id":"408417","timestamp":"1626523560.0","upvote_count":"1"},{"poster":"Sulary","timestamp":"1625208420.0","upvote_count":"3","comment_id":"396645","content":"NO YES YES 100%\nIt's clearly saying in NSG2,\n 10.10.2.5(VM-2) is blocked for the destination 10.10.1.5(VM!)"},{"content":"All three subnets are in the same VNET so they can all RDP, with the exception of the two NSGs which both apply to IB connectsions to VM1. NYY.","comment_id":"388022","timestamp":"1624369140.0","upvote_count":"1","poster":"ScreamingHand"},{"timestamp":"1622731560.0","content":"Does NSG1 and NSG1 has outbound rule ?\nwhy does everyone say VM1-> VM2 is allowed?","upvote_count":"2","poster":"Lkk51","comments":[{"poster":"JayBee65","timestamp":"1623906960.0","content":"Do not think oubound, think source and destination.\nThe rules apply to the source of VM2 (SG2) or SN2 (NSG1), the destination VM1 or SN1","upvote_count":"1","comment_id":"383925"}],"comment_id":"373668"},{"content":"Correct Answer:\n\nBox 1: No\nVM1 has the NSG1 on Subnet1, which allows traffic over port 1433 between Subnet2 and Subnet1. But NSG2 also applied on NIC level for VM1 blocks the traffic on port 1433. Hence, no traffic is allowed. There is no priority bypass between NSGs. Traffic is filtered independently between NSGs.\n\nBox 2: Yes \nFor VM2 there are no NSGs applied neither on Subnet or NIC level, hence all traffic is allowed. Also, VM1 and VM2 are inside the same VNET1.\n\nBox 3: Yes\nFor VM3 there are no NSGs applied neither on subnet or NIC level, hence all traffic is allowed. Also, VM2 and VM3 are inside the same Subnet2 and VNET1.","upvote_count":"90","comment_id":"360442","poster":"mlantonis","timestamp":"1621338840.0"},{"timestamp":"1620709920.0","upvote_count":"3","content":"Answer should be N-Y-Y \nExplanation: \nVM1: The security rules in NSG1 are processed, since it is associated to Subnet1 and VM1 is in Subnet1. Unless you've created a rule that allows port 80 inbound, the traffic is denied by the DenyAllInbound default security rule, and never evaluated by NSG2, since NSG2 is associated to the network interface. If NSG1 has a security rule that allows port 80, the traffic is then processed by NSG2. To allow port 80 to the virtual machine, both NSG1 and NSG2 must have a rule that allows port 80 from the internet.\nhttps://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works","comment_id":"354325","poster":"KenDo"},{"comment_id":"352740","comments":[{"upvote_count":"1","poster":"EdwardWhiteMist","content":"NSG2 doesn't apply to Subnet1 though, it applies to the NIC of VM1, so the priority of the first doesn't affect the second as the two security groups don't conflict/apply at the same time. That's why the first answer in box 1 is N.","comment_id":"373106","timestamp":"1622677620.0"}],"poster":"KenDo","upvote_count":"1","timestamp":"1620522540.0","content":"Y-Y-Y\nBoth NSGs are applied to Subnet 1. No NSGs applied to Subnet 2. Lower priority value 101 overrides the NSG 2 rule."},{"comments":[{"timestamp":"1623907080.0","poster":"JayBee65","upvote_count":"2","content":"Your understanding is not correct","comment_id":"383928"}],"upvote_count":"2","poster":"Crhistian","content":"Its simple in my view...\nA NSG rule its applied in VNET and Other in NIC so, pass trought one but not to other.","comment_id":"342738","timestamp":"1619370660.0"},{"comment_id":"336435","content":"Inbound traffic\n\nNSG applied to subnet: If a subnet NSG has a matching rule to deny traffic, the packet is dropped.\n\nNSG applied to NIC (Resource Manager) or VM (classic): If VM\\NIC NSG has a matching rule that denies traffic, packets are dropped at the VM\\NIC, even if a subnet NSG has a matching rule that allows traffic.\n\nOutbound traffic\n\nNSG applied to NIC (Resource Manager) or VM (classic): If a VM\\NIC NSG has a matching rule that denies traffic, packets are dropped.\n\nNSG applied to subnet: If a subnet NSG has a matching rule that denies traffic, packets are dropped, even if a VM\\NIC NSG has a matching rule that allows traffic.","timestamp":"1618504260.0","poster":"Amalia0608","upvote_count":"2"},{"comment_id":"322318","timestamp":"1616898660.0","content":"NSGs are evaluated independently, and an “allow” rule must exist at both NSGs otherwise traffic will not be allowed.For incoming traffic, the NSG set at the subnet level is evaluated first, then the NSG set at the NIC level is evaluated. For outgoing traffic, it is the reverse.\n\nIf you have several NSGs and are not sure which security rules are being applied, you can use the Effective security rules link. For example, you could verify the security rules being applied to a network interface.\n\nThis is a tricky question testing if you know NSG rules. N-Y-Y","poster":"ddb116","upvote_count":"1"},{"content":"No one makes a reference to the source IP on NSG 2 inbound rule. It says inbound rule from its own subnet so VM1 will get to it as it comes from a different subnet address space","poster":"Techseeker","upvote_count":"2","comment_id":"320076","timestamp":"1616668920.0"},{"timestamp":"1616515020.0","poster":"raulgar","upvote_count":"2","comment_id":"318217","content":"No - First the traffic pass throught nsg1 (firewall subnet) that allows traffic, later pass througth nsg2 (firewall vm) that denny traffic\nYes - there is not firewall to block\nYes - there is not firewall to block"},{"upvote_count":"1","timestamp":"1616404740.0","content":"No, Yes, Yes","comment_id":"317005","poster":"ms70743"},{"poster":"ZetaZeti","upvote_count":"1","comment_id":"315116","timestamp":"1616183640.0","content":"I believe the first should be No. Priorities should be compared in the SAME NSG and not among NSGs: the priority 101 rule and the priority 125 rule are not related since they belong to different NSGs. The TCP/1433 packet leaving VM2 encounters first an NSG associated to its NIC (but here there is none), then an NSG associated to its subnet (but here there is none), after an NSG associated to the subnet of the other machine (and here we have NSG1) and finally an NSG associated to the NIC of the other machine (and here we have NSG2). The TCP/1433 packet reaches the VM1's NIC (NSG1 allows the packet) but NSG2 blocks it."},{"content":"I believe the first should be No. We should bear in mind that we should consider priorities in the SAME NSG and we shouldn't cross priorities among NSGs: so the priority 101 rule and the priority 125 rule are not related between them since they belong to different NSGs. Generally speaking, the TCP/1433 packet leaving VM2 encounters first an NSG associated to its NIC (but here there is none), then an NSG associated to its subnet (but here there is none), after an NSG associated to the subnet of the other machine (and here we have NSG1 associated to Subnet1 VM1 belongs to) and finally an NSG associated to the NIC of the other machine (and here we have NSG2 associated to the NIC attached to VM1). The TCP/1433 packet reaches the VM1's NIC (NSG1 allows the packet) but NSG2 blocks it.","comment_id":"315100","upvote_count":"1","poster":"ZetaZeti","timestamp":"1616181720.0"},{"poster":"allray15","content":"NO - (NSG2 on VM1) is clear , the inbound coming from source IP 10.10.2.5 (VM2) is blocked. both the VM's have different NSGs , so the priority of other NSGs cannot reflect to other NSGs.\nYES - no NSG rule\nYES - no NSG rule","comment_id":"313129","timestamp":"1615975920.0","upvote_count":"3"},{"upvote_count":"2","content":"As for question 1. Please note that the NSG1 applies on the subnet1 and NSG2 applies on NIC which means that you should add them. \nFirst, the network flow reaches the subnet1 it will be allowed by NGS1. Then when it arrives at the VM (NIC) it will be blocked by the NGS2","poster":"batchi_dz","comment_id":"306583","timestamp":"1615312200.0"},{"timestamp":"1615203960.0","poster":"ZUMY","upvote_count":"6","content":"1.Priority doesn't work between 2 nsg. Priority works on same nsg.","comment_id":"305683"},{"upvote_count":"6","comment_id":"303110","content":"Answer is N-Y-Y","timestamp":"1614835380.0","poster":"ZUMY"},{"timestamp":"1614422040.0","content":"Any one have the reset of the questions , I'm not able to access all . please help I have the exam next week","poster":"Alaaaa21","upvote_count":"2","comment_id":"300194"},{"comments":[{"poster":"StixxNSnares","content":"You understood the priority incorrectly .The priority listed is per NSG.","upvote_count":"4","comment_id":"300390","timestamp":"1614448020.0"}],"poster":"I","upvote_count":"1","comment_id":"297043","timestamp":"1614040440.0","content":"Given answer 'Yes, Yes, Yes' is correct. We can see NSG1's priority is higher than NSG2'S, and it's allowed the conection between Subnet1 and Subnet2 (10.10.2.0/24 - 10.10.1.0/24). In Subnet1, 10.10.1.0/24 means the IP space from 10.10.1.0 to 10.10.1.255 including VM1 of which IP address is 10.10.1.5. In Subnet2, IP space is from 10.10.2.0 to 10.10.2.255 of which if including VM2 (IP address is 10.10.2.5) and VM3 (10.10.2.6). So only by NSG1 all the VMs are connecting by eachother."},{"upvote_count":"1","comment_id":"295691","timestamp":"1613903940.0","poster":"Mahadane6791","content":"No.Yes.Yes"},{"poster":"toniiv","upvote_count":"4","comment_id":"294871","timestamp":"1613811960.0","content":"First answer should be NO as stated in many comments: Priority do not play a role between two different NSG. Priority only matters within the same NSG. NSG2 will block inbound traffic when packet reaches the VM"},{"content":"Answer is NO, NO, YES.","timestamp":"1613284440.0","poster":"kashi1983","upvote_count":"1","comment_id":"290060","comments":[{"poster":"kashi1983","content":"I made a mistake. The answer is NO, Yes, Yes.","upvote_count":"2","timestamp":"1613284500.0","comment_id":"290061"}]},{"upvote_count":"2","poster":"davegsanchez","timestamp":"1612352520.0","comment_id":"282674","content":"no yes yes"},{"upvote_count":"2","content":"I am going with Yes, Yes Yes... I agree with the explanation provided.","comment_id":"280701","poster":"macross","timestamp":"1612112940.0"},{"content":"The correct answer should be No, Yes, Yes\nhttps://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works","comment_id":"276908","timestamp":"1611664440.0","poster":"Laurent_Byanjira","upvote_count":"2"},{"comment_id":"275651","timestamp":"1611544200.0","upvote_count":"2","content":"No rule explicitly blocks communication, in the same vnet...","poster":"waterzhong"},{"poster":"ivantchev","comment_id":"274828","upvote_count":"2","content":"Priority only works within the specific NSG. so it should be N, Y,Y","timestamp":"1611430980.0"},{"upvote_count":"1","timestamp":"1610398500.0","content":"Answer is correct. \"If an NSG is applied to a subnet and another one to a network interface, then both NSGs are processed. Subnet NSG is processed first. If a packet hits deny rule, including the default “Deny Any” rule, then the packet is dropped straight away. If the packet is allowed by subnet NSG, then the network interface’s NSG is evaluated.\"\nhttps://fastreroute.com/azure-network-security-groups-explained/","comment_id":"265053","comments":[{"timestamp":"1610398860.0","upvote_count":"2","poster":"Ozguraydin","comment_id":"265061","content":"Sorry, I made a mistake. I agree the above answers. No, Yes, Yes."}],"poster":"Ozguraydin"},{"poster":"gekkehenkie84","comment_id":"258381","timestamp":"1609669920.0","content":"should be no, yes, yes, as both NSG's applied should allow traffic\nwhen part of the same assignment, the priority statement matters, now they do not","upvote_count":"2"},{"comment_id":"254639","content":"It's shoulb be No _ Yes _ Yes.","upvote_count":"2","poster":"vandergun","timestamp":"1609231800.0"},{"comments":[{"timestamp":"1609256160.0","upvote_count":"1","poster":"RogerDingo","content":"thank you.. very helpful.\nVM1 explanation confirms this question.","comment_id":"254845"},{"upvote_count":"2","content":"Thank you for confirming, I was looking for the information such a link.","comments":[{"content":"Yes, fedztedz' link covers the VM with NSG traffic filtering with a good breakdown","comment_id":"316503","timestamp":"1616346240.0","poster":"[Removed]","upvote_count":"1"}],"timestamp":"1612087920.0","comment_id":"280478","poster":"vikki"},{"content":"According to the document: \"Unless you've created a rule that allows port 80 inbound, the traffic is denied by the DenyAllInbound default security rule, and never evaluated by NSG2, since NSG2 is associated to the network interface.\"\nAnd I did not see allow inbound rule for port 80 in the table, thus only NSG1 will be evaluated to VM1 in subnet1.","poster":"vikki","comment_id":"280502","timestamp":"1612091940.0","upvote_count":"2"}],"timestamp":"1608906240.0","poster":"fedztedz","comment_id":"252120","upvote_count":"13","content":"Answer is not correct. The Correct answer is No, Yes, Yes\nfor more details check https://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works#inbound-traffic"},{"poster":"ydnah2","upvote_count":"4","timestamp":"1608348120.0","content":"Agreed with the above. The first should be No. NSG1 at subnet level allows traffic then blocks at NSG2 (at VM level). Priority matters only within same NSG. You cannot have same priority with 2 rules. \"For inbound traffic, Azure processes the rules in a network security group associated to a subnet first, if there is one, and then the rules in a network security group associated to the network interface, if there is one.\" \nhttps://docs.microsoft.com/en-us/answers/questions/44091/which-will-override-the-otherazure-nsg-on-the-subn.html","comments":[{"comments":[{"content":"Sorry, I have to corrected. \nThe MVP actually did not answer to the question \"which will override the other, Azure NSG on the subnet or NSG on the VM?\" and remain the same answer as NSG inbound traffic rule from the document here: https://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works#inbound-traffic","poster":"vikki","timestamp":"1612091400.0","upvote_count":"2","comment_id":"280496"}],"content":"Very helpful, thank you!","upvote_count":"2","poster":"vikki","comment_id":"280481","timestamp":"1612088340.0"}],"comment_id":"247702"},{"upvote_count":"4","comment_id":"244694","timestamp":"1608045480.0","poster":"Libi","content":"It would be No, Yes, Yes"},{"upvote_count":"3","comments":[{"timestamp":"1608102480.0","poster":"pieronegri","upvote_count":"4","comment_id":"245266","content":"it seems to me that by default the traffic between subnet should be open"},{"timestamp":"1608889680.0","upvote_count":"3","content":"You are worng.\nthe default NSG rule as the AllowVnetInBound – This rule permits all the hosts inside the virtual network (including subnets) to communicate between them without any blocks.","comment_id":"251968","poster":"janshal"}],"poster":"Diego19","timestamp":"1607862120.0","comment_id":"242549","content":"No, No, Yes \n1. NSG1 associated with Subnet1 and NSG2 associated with NIV of the VM1 which means that will affect only inbound & outbound traffic of VM1. VM2 cannot connect to VM1 as NSG2 will block the connection on the NIC interface. \nSource: For inbound traffic, Azure processes the rules in a network security group associated to a subnet first, if there is one, and then the rules in a network security group associated to the network interface, if there is one.\nhttps://docs.microsoft.com/en-us/azure/virtual-network/network-security-group-how-it-works#inbound-traffic\n2. There is no explicit allow for outbound traffic in the NSG1 and NSG2. Therefore VM1 won't be able to connect to VM2. \n3. Since there is no NSG associated with Subnet2, VM2, and VM3 they can connect to each other without any problem."},{"upvote_count":"4","content":"It would be No, Yes, Yes\nAs their a rule to block VM2 to VM1.","timestamp":"1607680980.0","comments":[{"upvote_count":"2","poster":"AbuAWS","timestamp":"1608654780.0","content":"for first one, Allow rule has lower number and therefore will be processed first and the traffic will be allowed, so it should be YES","comment_id":"250274"}],"poster":"FarazGhani","comment_id":"240811"},{"content":"I think it should No, Yes, Yes as well. The NSG's are applied to 2 different things. First you see if the rules in NSG1 block traffic, and if it doesn't then you see if NSG2 blocks traffic. It's like a cascading effect as you're heading inwards to the vm. However if the rules with different priorities were applied to the same NSG, then the priorities would matter.","comment_id":"240637","upvote_count":"2","timestamp":"1607658780.0","poster":"BreakTheChains12"},{"content":"Agree on the comments below, it should be No, yes, yes. Priority do not play a role between two different NSG. Priority only matters within the same NSG.","timestamp":"1607331600.0","comment_id":"237137","upvote_count":"3","poster":"waterzhong","comments":[{"timestamp":"1612090440.0","poster":"vikki","content":"Could you please feedback some information about \"Priority only matters within the same NSG.\" ? Since I can only see statements like: Rules are processed in priority order. As a result, any rules that exist with lower priorities (higher numbers) that have the same attributes as rules with higher priorities are not processed. \nFrom here: https://docs.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview#security-rules","upvote_count":"1","comment_id":"280488"}]},{"upvote_count":"11","poster":"ihavespoken","comment_id":"235455","timestamp":"1607149560.0","content":"Agree on the comments below, it should be No, yes, yes. Priority do not play a role between two different NSG. Priority only matters within the same NSG."}],"unix_timestamp":1606908540,"question_text":"HOTSPOT -\nYou have a virtual network named VNET1 that contains the subnets shown in the following table:\n//IMG//\n\nYou have Azure virtual machines that have the network configurations shown in the following table:\n//IMG//\n\nFor NSG1, you create the inbound security rule shown in the following table:\n//IMG//\n\nFor NSG2, you create the inbound security rule shown in the following table:\n//IMG//\n\nFor each of the following statements, select Yes if the statement is true. Otherwise, select No.\nNOTE: Each correct selection is worth one point.\nHot Area:\n//IMG//","exam_id":44,"answer_ET":"","isMC":false},{"id":"3MCUqAVvhtPlwBbZHCrB","timestamp":"2022-04-22 15:38:00","discussion":[{"comment_id":"707164","content":"Y = RT is not applied to VM3. VM3 will have the default route between subnets in a vnet.\nN = VM2 > Subnet2 has RT applied to it. VM3 is the next hop which is turned off. \nY = VM3 has has IP forwarding enabled which can fwd traffic from VM1 to VM2.","poster":"klexams","timestamp":"1667043960.0","upvote_count":"61"},{"timestamp":"1651125900.0","comments":[{"poster":"Mev4953","upvote_count":"3","comment_id":"671473","timestamp":"1663414620.0","content":"Agree."},{"timestamp":"1691437740.0","comment_id":"974945","upvote_count":"3","content":"This is the comment that I was looking for","poster":"ExamKiller020"}],"poster":"sjb666","comment_id":"593571","upvote_count":"23","content":"I believe this is correct. Ordinarily all three should be able to speak to each other as they're all subnets within the same VNet. However, the route table directs them to the machine that is switched off, thus breaking contact. Answer is correct"},{"upvote_count":"1","poster":"adham15","timestamp":"1730762340.0","content":"arent they all in same VNET so its by default connection is allowed??","comment_id":"1307143"},{"comment_id":"1290027","content":"CORRECT","poster":"[Removed]","timestamp":"1727440560.0","upvote_count":"4"},{"comment_id":"1204599","timestamp":"1714485060.0","content":"Answers are correct, for the second one:\n\n\"When you create a route table and associate it to a subnet, the table's routes are combined with the subnet's default routes. If there are conflicting route assignments, user-defined routes override the default routes.\"\n\nhttps://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview","upvote_count":"1","poster":"mkhlszf"},{"poster":"tashakori","timestamp":"1710927660.0","comment_id":"1178115","upvote_count":"1","content":"Correct"},{"poster":"zellck","timestamp":"1675962000.0","upvote_count":"8","comment_id":"803503","content":"YNY is the answer.\n\nhttps://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-network-interface?tabs=network-interface-portal#enable-or-disable-ip-forwarding"},{"poster":"martin_k1","content":"Y N Y\n\nif UDR was not set, connectivity between three VMs would work by default. \n1) With UDR, it still works, but return traffic from VM1 and VM2 to VM3 goes straight to VM3 instead of subnet gateway (which is one of reserverd subnet IPs)\n\n2) and 3) are clear.","comment_id":"681347","timestamp":"1664331360.0","upvote_count":"14"},{"comment_id":"596882","timestamp":"1651674780.0","poster":"mbaybarsk","content":"N/N/Y\n\nVM3 subnet does not have a route for VM1 subnet. The default route drops packets that belong to 10.0.0.0/8 -> No\n\nhttps://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview\n\nVM2 cannot connect to VM1 because the router (VM3) is offline -> No\n\nVM1 can connect to VM2 as there's a routing table -> Yes","upvote_count":"4","comments":[{"upvote_count":"17","content":"Y/N/Y - VM3 is on the same VNET as VM2 and VM1, therefore, no routes are needed","poster":"pythonier","timestamp":"1661914080.0","comment_id":"654642"},{"timestamp":"1667415780.0","comment_id":"710007","poster":"Babushka","content":"What pythonier said, because UDR is only applied to subnet 1 & 2.","upvote_count":"1"}]},{"upvote_count":"6","poster":"WindowAFX","comment_id":"590025","content":"Correct\nI believe this to be correct","timestamp":"1650634680.0"}],"topic":"5","unix_timestamp":1650634680,"answer_description":"IP forwarding enables the virtual machine a network interface is attached to:\n✑ Receive network traffic not destined for one of the IP addresses assigned to any of the IP configurations assigned to the network interface.\nSend network traffic with a different source IP address than the one assigned to one of a network interface's IP configurations.\n\nThe setting must be enabled for every network interface that is attached to the virtual machine that receives traffic that the virtual machine needs to forward. A virtual machine can forward traffic whether it has multiple network interfaces or a single network interface attached to it.\n\nBox 1: Yes -\nThe routing table allows connections from VM3 to VM1 and VM2. And as IP forwarding is enabled on VM3, VM3 can connect to VM1.\n\nBox 2: No -\nVM3, which has IP forwarding, must be turned on, in order for VM2 to connect to VM1.\n\nBox 3: Yes -\nThe routing table allows connections from VM1 and VM2 to VM3. IP forwarding on VM3 allows VM1 to connect to VM2 via VM3.\nReference:\nhttps://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview https://www.quora.com/What-is-IP-forwarding","answers_community":[],"question_text":"HOTSPOT -\nYou have an Azure subscription named Subscription1.\nSubscription1 contains the virtual machines in the following table:\n//IMG//\n\nSubscription1 contains a virtual network named VNet1 that has the subnets in the following table:\n//IMG//\n\nVM3 has multiple network adapters, including a network adapter named NIC3. IP forwarding is enabled on NIC3. Routing is enabled on VM3.\nYou create a route table named RT1 that contains the routes in the following table:\n//IMG//\n\nYou apply RT1 to Subnet1 and Subnet2.\nFor each of the following statements, select Yes if the statement is true. Otherwise, select No.\nNOTE: Each correct selection is worth one point.\nHot Area:\n//IMG//","question_id":537,"answer_images":["https://www.examtopics.com/assets/media/exam-media/04223/0050200002.jpg","https://www.examtopics.com/assets/media/exam-media/04223/0050200004.png"],"exam_id":44,"answer_ET":"","answer":"","question_images":["https://www.examtopics.com/assets/media/exam-media/04223/0050100001.png","https://www.examtopics.com/assets/media/exam-media/04223/0050100002.png","https://www.examtopics.com/assets/media/exam-media/04223/0050100003.png","https://www.examtopics.com/assets/media/exam-media/04223/0050200001.jpg"],"url":"https://www.examtopics.com/discussions/microsoft/view/74142-exam-az-104-topic-5-question-97-discussion/","isMC":false},{"id":"SdcNjjahuZBDOHvmuMlo","exam_id":44,"topic":"5","answer_images":[],"question_id":538,"answer_description":"","unix_timestamp":1595735700,"discussion":[{"upvote_count":"116","content":"Correct Answer: C\n\nA Site-to-Site VPN gateway connection can be used to connect your on-premises network to an Azure virtual network over an IPsec/IKE (IKEv1 or IKEv2) VPN tunnel. This type of connection requires a VPN device, a VPN gateway, located on-premises that has an externally facing public IP address assigned to it.\n\nA: Application Gateway is for http, https and Websocket - Not SMB\nB: Application Proxy is also for accessing web applications on-prem - Not SMB. Application Proxy is a feature of Azure AD that enables users to access on-premises web applications from a remote client.\n\nReference:\nhttps://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal","poster":"mlantonis","timestamp":"1621339440.0","comments":[{"poster":"SumanSaurabh","timestamp":"1670556300.0","content":"you were missed until now , welcome back","upvote_count":"14","comment_id":"739708"},{"poster":"AzureG0d","content":"welcome back lol","timestamp":"1667355720.0","upvote_count":"4","comment_id":"709568"},{"poster":"KingChuang","upvote_count":"1","comment_id":"722433","content":"Better Ref:\nhttps://learn.microsoft.com/en-us/azure/storage/files/storage-files-configure-s2s-vpn","timestamp":"1668926280.0"}],"comment_id":"360451"},{"poster":"Wizard69","content":"With the answers that we have:\nApplication Gateway is for http, https and Websocket - Not SMB\nApplication Proxy is also for accessing web applications on-prem - Not SMB\nSo the only answer can be VPN Gateway","upvote_count":"39","comment_id":"305948","timestamp":"1615235280.0"},{"comment_id":"1418044","content":"Selected Answer: C\nSMB (Server Message Block) specifies the protocol used for accessing network file shares. SMB is commonly used for file sharing in Windows environments, and it operates over specific ports (TCP 445 and others) that need to be accessible for the connection to work. When you set up a VPN between your Azure virtual network and your on-premises network, it allows webapp1 to communicate with on-premises resources, including SMB shares. However, accessing SMB shares from an Azure Web App can be tricky because Azure Web Apps typically block SMB ports for security reasons.To work around this, you might need to use a different approach, such as Using Azure Virtual Machines: Deploy a VM in your Azure VNet that can access the SMB share and act as an intermediary. Or Azure File Sync - Sync your on-premises file shares with Azure Files, which can then be accessed by your web app.","timestamp":"1743515880.0","poster":"8ac3742","upvote_count":"1"},{"poster":"[Removed]","content":"Selected Answer: C\nC is correct","upvote_count":"1","timestamp":"1727440800.0","comment_id":"1290030"},{"content":"C is right","upvote_count":"1","comment_id":"1173746","poster":"tashakori","timestamp":"1710450840.0"},{"poster":"zellck","content":"Selected Answer: C\nC is the answer.\n\nhttps://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpngateways\nAzure VPN Gateway is a service that uses a specific type of virtual network gateway to send encrypted traffic between an Azure virtual network and on-premises locations over the public Internet. You can also use VPN Gateway to send encrypted traffic between Azure virtual networks over the Microsoft network. Multiple connections can be created to the same VPN gateway. When you create multiple connections, all VPN tunnels share the available gateway bandwidth.","upvote_count":"5","timestamp":"1675961760.0","comment_id":"803496"},{"upvote_count":"1","comment_id":"786817","poster":"moshos","content":"Selected Answer: C\nCorrect answer: C","timestamp":"1674586020.0"},{"timestamp":"1672954320.0","poster":"[Removed]","content":"This was on the test","upvote_count":"2","comment_id":"767059"},{"timestamp":"1667312520.0","content":"This question appeared today in my exam. I answered C. Passed with 810 :-)\n60/70% of questions are from here. Thanks guys!!!\nKeep up the good work","upvote_count":"6","comment_id":"709210","poster":"rocroberto"},{"upvote_count":"1","poster":"EmnCours","comment_id":"649989","timestamp":"1661134740.0","content":"Selected Answer: C\nCorrect Answer: C"},{"content":"Selected Answer: C\nGiven answer is correct..comments as per others","upvote_count":"1","comment_id":"619052","timestamp":"1655708640.0","poster":"Lazylinux"},{"upvote_count":"3","poster":"benvdw","comment_id":"566999","timestamp":"1647187200.0","content":"C - on exam 13/3/2022"},{"content":"Selected Answer: C\nC is correct.\nTo achieve the goal, the web app needs to integrate with Vnet so that web app can get an IP from vnet.\nhttps://docs.microsoft.com/en-us/azure/app-service/overview-vnet-integration","upvote_count":"1","comment_id":"510637","poster":"Snownoodles","timestamp":"1640644080.0"},{"content":"This question was asked on exam taken on 8/22/2021","upvote_count":"5","poster":"Kamex009","timestamp":"1629729900.0","comment_id":"430089"},{"comment_id":"393348","timestamp":"1624925160.0","poster":"lucky_18","content":"came in exam on June 28 2021","upvote_count":"5"},{"comment_id":"303175","poster":"ZUMY","timestamp":"1614840360.0","content":"C is correct","upvote_count":"3"},{"upvote_count":"4","timestamp":"1614192420.0","comment_id":"298480","content":"Keyword is \"On-Premise\" so the answer is C. VNG. Isn't it amazing? ^_^","poster":"PektoTheGreat"},{"comment_id":"294877","timestamp":"1613812620.0","upvote_count":"4","content":"Answer C. is correct, you need a Virtual Network Gateway to create a site-to-site VPN connection to on-prem","poster":"toniiv"},{"comment_id":"252148","upvote_count":"13","poster":"fedztedz","content":"Answer is correct. \"C\" Virtual Network Gateway\"","timestamp":"1608910680.0"},{"timestamp":"1602809220.0","comment_id":"200812","comments":[{"timestamp":"1603078140.0","content":"Answer is C Virtual Network gateway","upvote_count":"11","poster":"kvnpri","comment_id":"202359"},{"comment_id":"261439","poster":"finolweb","timestamp":"1609986420.0","content":"Azure Application Gateway gives you application-level routing and load balancing services that let you build a scalable and highly-available web front end in Azure.","upvote_count":"2"}],"content":"sorry did't understand well, answer is C or A??","upvote_count":"2","poster":"Lbaz"},{"timestamp":"1602579840.0","poster":"KarthikExams","upvote_count":"6","comment_id":"199069","content":"YES - VNG"},{"content":"A bit partial explanation in my opinion since in order to make this work you would also need to create a local network gateway for the site-to-site VPN.","timestamp":"1596624840.0","poster":"B1T3X","comment_id":"151121","upvote_count":"10"},{"poster":"dan7777","content":"The explanation just confuse me, this is a point-to-site conection right?","timestamp":"1595735700.0","upvote_count":"4","comment_id":"143801","comments":[{"content":"site-to-site","comment_id":"144807","timestamp":"1595843160.0","poster":"JasonYang696","upvote_count":"10"}]}],"url":"https://www.examtopics.com/discussions/microsoft/view/26670-exam-az-104-topic-5-question-98-discussion/","choices":{"A":"an Azure Application Gateway","C":"an Azure Virtual Network Gateway","B":"an Azure Active Directory (Azure AD) Application Proxy"},"question_images":[],"isMC":true,"answer_ET":"C","question_text":"Your on-premises network contains an SMB share named Share1.\nYou have an Azure subscription that contains the following resources:\n✑ A web app named webapp1\n✑ A virtual network named VNET1\nYou need to ensure that webapp1 can connect to Share1.\nWhat should you deploy?","timestamp":"2020-07-26 05:55:00","answer":"C","answers_community":["C (100%)"]},{"id":"1YfkzWGXxmNYgaS3nJBz","answers_community":["BC (90%)","10%"],"question_images":["https://img.examtopics.com/az-104/image853.png"],"url":"https://www.examtopics.com/discussions/microsoft/view/146246-exam-az-104-topic-5-question-99-discussion/","answer_images":[],"discussion":[{"poster":"RVivek","timestamp":"1732274520.0","upvote_count":"2","comment_id":"1316251","content":"Selected Answer: BC\nhttps://learn.microsoft.com/en-us/azure/virtual-network/ip-services/configure-public-ip-vpn-gateway"},{"poster":"Josh219","comment_id":"1315337","upvote_count":"4","content":"Selected Answer: BC\nA public IP address can be associated with resources that require direct internet access, such as virtual machines (via NICs) and load balancers. However, a VPN gateway typically uses its own dedicated public IP address for establishing secure connections between on-premises networks and Azure.\nVPN1: Uses its own public IP address for secure connections and does not typically share or use a public IP address assigned to other resources.\nTherefore, the correct resources to associate with IP1 are LB1 and NIC1.","timestamp":"1732116060.0"},{"comment_id":"1297891","upvote_count":"3","poster":"Dankho","timestamp":"1728953820.0","content":"Selected Answer: BC\nwhy not D?\n\nWhen you create a VPN gateway, you need to associate a public IP address with it. This is done during the configuration of the gateway itself, typically as part of the gateway creation process.\n\nThe public IP is not managed as a standalone public IP resource after it is associated; it's an integral part of the VPN gateway configuration and is not directly visible as an independent resource in the same way you would see a public IP associated with a NIC or Load Balancer."},{"timestamp":"1727944800.0","poster":"CK_Fred","comment_id":"1292714","content":"Selected Answer: BD\nThe correct answer should be B & D. \nReason behind: LB1 & VPN1 required a public IP address during the creation of resouces.\nFor NIC1, the creation of NIC, don't offer an option to create public IP instead it is asking for private ip with manual / automatic assignment.\nThe public IP association with NIC, only have happen when you have attached the NIC to VM","upvote_count":"2"},{"comment_id":"1290031","content":"Selected Answer: BC\nB & C are correct","upvote_count":"3","timestamp":"1727440980.0","poster":"[Removed]"},{"content":"should be BCD\nhttps://learn.microsoft.com/en-us/azure/virtual-network/ip-services/configure-public-ip-vpn-gateway","comment_id":"1282447","timestamp":"1726116180.0","poster":"chucklu","comments":[{"poster":"chucklu","comment_id":"1282449","timestamp":"1726116480.0","upvote_count":"2","content":"GPT says \nVirtual network gateways typically use a public IP address to enable communication with external networks (for VPN connections, for instance). However, VPN gateways automatically create their public IP when deployed, and you don't manually associate public IPs with VPN gateways."}],"upvote_count":"1"},{"timestamp":"1725181440.0","content":"VOTE BC","upvote_count":"3","poster":"DJHASH786","comment_id":"1275949"},{"upvote_count":"2","timestamp":"1725176280.0","poster":"6c05b3d","comment_id":"1275927","content":"Selected Answer: BC\nAnswer given is correct."},{"timestamp":"1724734860.0","content":"Selected Answer: BC\nVOTE BC","comment_id":"1273152","upvote_count":"4","poster":"siheom"},{"comment_id":"1270055","upvote_count":"4","timestamp":"1724239860.0","poster":"Henrytml","content":"LB and NIC are correct"}],"answer_ET":"BC","choices":{"E":"VNet1","B":"LB1","C":"NIC1","A":"VM1","D":"VPN1"},"answer":"BC","question_text":"You have an Azure subscription that contains the resources shown in the following table.\n\n//IMG//\n\n\nYou create a public IP address named IP1.\n\nWhich two resources can you associate to IP1? Each correct answer presents a complete solution.\n\nNOTE: Each correct selection is worth one point.","topic":"5","isMC":true,"answer_description":"","question_id":539,"exam_id":44,"unix_timestamp":1724239860,"timestamp":"2024-08-21 13:31:00"},{"id":"BMXit8MPHiqVYE8sIooD","answers_community":["B (100%)"],"question_images":["https://www.examtopics.com/assets/media/exam-media/04223/0052600001.png"],"url":"https://www.examtopics.com/discussions/microsoft/view/39044-exam-az-104-topic-6-question-1-discussion/","answer_images":[],"answer_ET":"B","discussion":[{"upvote_count":"154","timestamp":"1621359360.0","poster":"mlantonis","comment_id":"360733","comments":[{"upvote_count":"35","timestamp":"1668013320.0","poster":"laszeklsz","comment_id":"714748","content":"good to see you, old friend"}],"content":"Correct Answer: B\n\nAzure Backup supports backup of 64-bit Windows server operating system from Windows Server 2008.\nAzure Backup supports backup of 64-bit Windows 10 operating system.\nAzure Backup supports backup of 64-bit Ubuntu Server operating system from Ubuntu 12.04.\nAzure Backup supports backup of VM that are shutdown or offline.\n\nThe Backup service installs the backup extension whether or not the VM is running."},{"comment_id":"255463","content":"Answer is Correct. \"B\". Backup is supported for the whole VM for all the OS types mentioned. Also, backup operation can be done while VM is offline or shutdown","poster":"fedztedz","upvote_count":"69","timestamp":"1609318500.0"},{"poster":"[Removed]","timestamp":"1728051600.0","upvote_count":"1","comment_id":"1293141","content":"Selected Answer: B\nB is correct"},{"upvote_count":"1","content":"Majority of people give reason for answer B by specifying which OSs are supported by Azure Backup. This is partly correct. But I think the essence of this particular question is knowing answer to the question - Does Azure Backup run on a shutdown VM? This is where this trick of this question sits. And the answer is Yes - Azure Backup runs even on a shutdown VM. Therefore the correct answer is indeed B.","poster":"87dffd4","timestamp":"1721553120.0","comment_id":"1252340"},{"poster":"23169fd","comment_id":"1225702","timestamp":"1717697100.0","upvote_count":"2","content":"Selected Answer: B\nAzure Backup can be used to back up all these OS. The auto-shutdown setting does not affect the ability to backup the VMs."},{"content":"B is right","comment_id":"1173741","poster":"tashakori","upvote_count":"1","timestamp":"1710450720.0"},{"upvote_count":"1","poster":"Madbo","content":"Azure Backup can back up the following operating systems:\n\n Windows Server\n Windows client operating systems (Windows 7 and later)\n Linux\n\nBased on this, you can back up VM1, VM2, and VM4 using Azure Backup, as they are running Windows Server 2012 R2, Windows Server 2016, and Windows 10 (a Windows client operating system) respectively. VM3 cannot be backed up using Azure Backup as it is running Ubuntu Server.\n\nTherefore, the answer is B. VM1, VM2, VM4, and VM3.","timestamp":"1681330080.0","comment_id":"868773"},{"content":"Selected Answer: B\nAccording to Microsoft's official documentation on Azure Backup, the supported operating systems for VM backup using Azure Backup are:\n\nWindows Server 2019, 2016, 2012 R2, and 2012\nWindows Server Essentials\nWindows 10 (64-bit)\nUbuntu 20.04 LTS, 18.04 LTS, and 16.04 LTS\nBased on this information, we can conclude that the answer is B. VM1, VM2, VM3, and VM4 can all be backed up using Azure Backup.","poster":"CyberKelev","timestamp":"1677769860.0","comment_id":"827032","upvote_count":"1"},{"comment_id":"803257","timestamp":"1675948920.0","upvote_count":"1","content":"Selected Answer: B\nB. \nAll OSs are supported.\nShutdown or not, VMs can still be backed up.\n\nYou don’t have to stop your virtual machines (VMs) in order to backup them in Azure. You can backup your VMs while they are running or while they are in a deallocated state.\n\nHowever, No, you cannot delete a virtual machine (VM) while it is being backed up. The backup process requires the virtual machine to be available and running so that the backup data can be captured. If you try to delete a VM while it is being backed up, the deletion process will be blocked until the backup is complete.","poster":"AndreaStack"},{"poster":"er101q","timestamp":"1675234260.0","content":"B. VM1, VM2, VM3, and VM4.\n\nAzure Backup can be used to back up Windows and Linux virtual machines that are running in Azure. All four virtual machines in the table, VM1, VM2, VM3, and VM4, are Azure virtual machines, which means they can be backed up by using Azure Backup. You can schedule backups to occur at a specific time every day, including 23:00, by using the Recovery Services vault, Vault1.","upvote_count":"1","comment_id":"794887"},{"content":"B. VM1, VM2, VM3 and VM4\nAll OSes listed are supported. shutdown or not, VMs can still be backed up.","timestamp":"1667044320.0","poster":"klexams","upvote_count":"2","comment_id":"707168"},{"comment_id":"653063","timestamp":"1661708340.0","poster":"EmnCours","content":"Selected Answer: B\nCorrect B","upvote_count":"1"},{"content":"Selected Answer: B\nI luv Honey Because it is B\nHere is Summary:\n\n**Azure Backup supports backup of 64-bit Windows server operating system from Windows Server 2008. \n\n**Azure Backup supports backup of 64-bit Windows 10 operating system. \n\n**Azure Backup supports backup of 64-bit Debian operating system from Debian 7.9+. \n\n**Azure Backup supports backup of VM that are shutdown or offline or online","upvote_count":"3","poster":"Lazylinux","comment_id":"619702","timestamp":"1655800500.0"},{"poster":"benvdw","content":"on exam 13/3/2022","upvote_count":"3","comment_id":"567016","timestamp":"1647187620.0"},{"content":"Selected Answer: B\nYou can back all types of OSes and even those that are shutdown.","timestamp":"1647080700.0","poster":"stormshaun","upvote_count":"2","comment_id":"566050"},{"timestamp":"1645569300.0","comment_id":"554060","poster":"Fusionaddware","content":"Selected Answer: B\nCorrect B","upvote_count":"1"},{"poster":"Netspud","comment_id":"527217","timestamp":"1642565160.0","upvote_count":"1","content":"Selected Answer: B\nI agree, all of them"},{"content":"Azure Backup supports backup of VM that are shutdown or offline.","upvote_count":"3","comment_id":"417445","timestamp":"1627652460.0","poster":"hosseny"},{"content":"in exam 7/3/2021","comment_id":"397693","timestamp":"1625325180.0","upvote_count":"5","poster":"wsscool"},{"comment_id":"340392","upvote_count":"3","poster":"Devgela","content":"This is a logical problem.","timestamp":"1619016360.0"},{"upvote_count":"4","content":"\"B\". Backup is supported for the whole VM for all the OS types mentioned. Also, backup operation can be done while VM is offline or shutdown","comment_id":"304095","timestamp":"1614936900.0","poster":"ZUMY"},{"poster":"waterzhong","comment_id":"302922","timestamp":"1614814320.0","upvote_count":"3","content":"Azure Backup supports backup of VM that are shutdown or offline."},{"upvote_count":"3","comment_id":"295223","poster":"toniiv","timestamp":"1613839920.0","content":"Answer is correct. All VMs including Powered off ones"},{"poster":"macross","content":"This is such a trick questions - yes you can still back it up even when the vm is turned off.","timestamp":"1612631940.0","upvote_count":"6","comment_id":"284993"},{"content":"Ans B: And I never knew that - it wasn't mentioned in the MS training! Amazing stuff!\nReference: https://docs.microsoft.com/en-us/azure/backup/backup-azure-arm-vms-prepare#apply-a-backup-policy\nAfter enabling backup:\n\nThe Backup service installs the backup extension whether or not the VM is running.\nAn initial backup will run in accordance with your backup schedule.\nWhen backups run, note that:\nA VM that's running has the greatest chance for capturing an application-consistent recovery point.\nHowever, even if the VM is turned off, it's backed up. Such a VM is known as an offline VM. In this case, the recovery point will be crash-consistent.","upvote_count":"11","comment_id":"269309","timestamp":"1610858820.0","poster":"DodgyD"},{"poster":"Hibs2016","comment_id":"236741","upvote_count":"12","timestamp":"1607281680.0","content":"Answer is Correct - B. The Azure Backup supports back up of VMs that are shutdown or offline."}],"answer":"B","choices":{"D":"VM1 only","B":"VM1, VM2, VM3 and VM4","A":"VM1 and VM3 only","C":"VM1 and VM2 only"},"question_text":"You have an Azure subscription that has a Recovery Services vault named Vault1. The subscription contains the virtual machines shown in the following table:\n//IMG//\n\nYou plan to schedule backups to occur every night at 23:00.\nWhich virtual machines can you back up by using Azure Backup?","topic":"6","isMC":true,"answer_description":"","question_id":540,"exam_id":44,"unix_timestamp":1607281680,"timestamp":"2020-12-06 20:08:00"}],"exam":{"provider":"Microsoft","id":44,"lastUpdated":"12 Apr 2025","isImplemented":true,"isBeta":false,"name":"AZ-104","numberOfQuestions":606,"isMCOnly":false},"currentPage":108},"__N_SSP":true}