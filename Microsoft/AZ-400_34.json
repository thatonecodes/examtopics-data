{"pageProps":{"questions":[{"id":"lTB5NdvZB4TAYcyhuWIM","url":"https://www.examtopics.com/discussions/microsoft/view/48958-exam-az-400-topic-4-question-32-discussion/","discussion":[{"content":"From the Azure portal, open your server or managed instance.\nUnder the Security heading, select Security Center.\nSelect Enable Azure Defender for SQL.\nhttps://docs.microsoft.com/en-us/azure/azure-sql/database/azure-defender-for-sql#enable-azure-defender-for-azure-sql-database-at-the-resource-level","comments":[{"poster":"waqas","comment_id":"583277","upvote_count":"7","timestamp":"1665311580.0","content":"From the Azure portal, open your server or managed instance.\nUnder the Security heading, select Defender for Cloud.\nSelect Enable Microsoft Defender for SQL."},{"timestamp":"1664610420.0","upvote_count":"1","comment_id":"579378","poster":"rdemontis","content":"correct"},{"comment_id":"418655","timestamp":"1643806500.0","poster":"kumud","upvote_count":"1","content":"correct"}],"poster":"meinekarte","comment_id":"327479","upvote_count":"24","timestamp":"1633276920.0"},{"comments":[{"content":"https://docs.microsoft.com/en-us/azure/defender-for-cloud/defender-for-sql-introduction?wt.mc_id=defenderforcloud_inproduct_portal_recoremediation&WT.mc_id=Portal-Microsoft_Azure_Security","upvote_count":"2","comment_id":"534983","timestamp":"1659040200.0","poster":"PlumpyTumbler"}],"comment_id":"531616","content":"The Azure Portal interface is changing all the time. The given answer and all comments so far are obsolete as of 1/24/22. Because of that, don't expect to see a simulation like this on the exam. However, if you want to follow the trail of breadcrumbs to accomplish this:\n\nUnder security in your Azure SQL DB, click \"Microsoft Defender for Cloud\"\nThe click \"View all recommendations in defender for cloud\"\nExpand \"Enable enhanced security features\"\nClick \"Microsoft Defender for Azure SQL Database servers should be enabled\"\nAt the top of the page click \"Enforce\"\nIn the Scope section: assign the resource group from the question\nTo finish, click select or create or whatever the blue button says at the time you are viewing this and you're done.\n\nKeep in mind, that by 3/1/22 this could be obsolete as well because the portal changes all the time.","poster":"PlumpyTumbler","upvote_count":"17","timestamp":"1658693580.0"},{"upvote_count":"4","content":"From the Azure portal, open your server or managed instance.\nUnder the Security heading, select Defender for Cloud.\nSelect Enable Microsoft Defender for SQL.","comment_id":"1155950","timestamp":"1724277720.0","poster":"ozbonny"},{"content":"You can follow this instructions: https://learn.microsoft.com/en-us/azure/azure-sql/database/threat-detection-configure?view=azuresql\nConfigure Advanced Threat Protection for Azure SQL Database\n\nAdvanced Threat Protection for Azure SQL Database detects anomalous activities indicating unusual and potentially harmful attempts to access or exploit databases. Advanced Threat Protection can identify Potential SQL injection, Access from unusual location or data center, Access from unfamiliar principal or potentially harmful application, and Brute force SQL credentials - see more details in Advanced Threat Protection alerts.\n\nYou can receive notifications about the detected threats via email notifications or Azure portal\n\nAdvanced Threat Protection is part of the Microsoft Defender for SQL offering, which is a unified package for advanced SQL security capabilities. Advanced Threat Protection can be accessed and managed via the central Microsoft Defender for SQL portal.","timestamp":"1709388480.0","comment_id":"996871","poster":"Tyler2023","upvote_count":"1"},{"timestamp":"1707903480.0","poster":"yana_b","comment_id":"980576","content":"Detailed steps for enabling on the defender on both subscription and resource level can be found here:\nhttps://learn.microsoft.com/en-us/azure/azure-sql/database/azure-defender-for-sql?view=azuresql","comments":[{"comment_id":"980582","poster":"yana_b","upvote_count":"1","content":"As per my understanding, the question refers to enabling the defender on resource level and not on subscription level.","timestamp":"1707903960.0"}],"upvote_count":"2"},{"upvote_count":"2","timestamp":"1706185620.0","comment_id":"962584","content":"Solution provided by meinekarte is correct","poster":"yana_b"},{"timestamp":"1674489600.0","content":"Microsoft Defender for Azure SQL","poster":"Govcomm","comment_id":"635584","upvote_count":"1"},{"upvote_count":"1","poster":"Ashutosh_9608","timestamp":"1649217780.0","comment_id":"458021","content":"https://docs.microsoft.com/en-us/azure/azure-sql/database/threat-detection-configure"}],"question_id":166,"answer":"See explanation below.","unix_timestamp":1617465720,"question_images":[],"timestamp":"2021-04-03 18:02:00","isMC":false,"answer_ET":"See explanation below.","answer_description":"Set up Advanced Threat Protection in the Azure portal\n1. Sign into the Azure portal.\n2. Navigate to the configuration page of the server you want to protect. In the security settings, select Advanced Data Security.\n3. On the Advanced Data Security configuration page:\n\n4. Enable Advanced Data Security on the server.\nNote: Advanced Threat Protection for Azure SQL Database detects anomalous activities indicating unusual and potentially harmful attempts to access or exploit databases. Advanced Threat Protection can identify Potential SQL injection, Access from unusual location or data center, Access from unfamiliar principal or potentially harmful application, and Brute force SQL credentials\nReference:\nhttps://docs.microsoft.com/en-us/azure/storage/common/storage-account-create https://docs.microsoft.com/en-us/azure/azure-sql/database/threat-detection-configure","topic":"4","question_text":"SIMULATION -\nYou manage a website that uses an Azure SQL Database named db1 in a resource group named RG1lod11566895.\nYou need to modify the SQL database to protect against SQL injection.\nTo complete this task, sign in to the Microsoft Azure portal.","answer_images":["https://www.examtopics.com/assets/media/exam-media/04257/0017100001.png"],"exam_id":55,"answers_community":[]},{"id":"09z76FX8vQX8VkoGkFz8","question_id":167,"answer_description":"Box 1: \" Microsoft.Resources/subscriptions/resourceGroups\"\nBox 2: \"Deny\",\nSample - Enforce tag and its value on resource groups\n},\n\"policyRule\": {\n\"if\": {\n\"allOf\": [\n{\n\"field\": \"type\",\n\"equals\": \"Microsoft.Resources/subscriptions/resourceGroups\"\n},\n{\n\"not\": {\n\"field\": \"[concat('tags[',parameters('tagName'), ']')]\",\n\"equals\": \"[parameters('tagValue')]\"\n}\n}\n]\n},\n\"then\": {\n\"effect\": \"deny\"\n}\n}\n}\n}\nReference:\nhttps://docs.microsoft.com/en-us/azure/governance/policy/samples/enforce-tag-on-resource-groups","unix_timestamp":1584693000,"url":"https://www.examtopics.com/discussions/microsoft/view/17037-exam-az-400-topic-4-question-33-discussion/","discussion":[{"upvote_count":"134","comment_id":"66223","poster":"TosO","timestamp":"1584693000.0","content":"\"The company requires that all resource groups in the subscription have a tag named organization set to a value of Contoso.\" - This means also the existing resource groups need to have a tag.\nFor that reason:\n1. Microsoft.Resources/subscriptions/resourceGroups\n2. Append\n\nThere is a pre-built policy in Azure for this, called: Append a tag and its value to resource groups","comments":[{"poster":"MP270915","upvote_count":"3","content":"Yes, it is Append, also because i wouldn't have that \"details\" propery below. That is used for Append, not for Deny.\nhttps://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects#append","comments":[{"upvote_count":"8","comments":[{"content":"If this resource groups hasn't a organization tag, we should append this tag onto this resource groups. So it should be append","comments":[{"comments":[{"poster":"yemma","content":"Deny doesn't have any property, so the answer is Append and as Tos0 explained we have to correct the existing RG by appending the tag:\nhttps://docs.microsoft.com/fr-fr/azure/governance/policy/concepts/effects#deny","timestamp":"1591474800.0","comment_id":"104087","upvote_count":"2"},{"timestamp":"1590829260.0","content":"if it's deny, it makes no sense to have those field settings underneath \nhttps://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects","upvote_count":"4","comment_id":"98739","poster":"xm3000"}],"timestamp":"1590351060.0","poster":"luango","comment_id":"95080","upvote_count":"2","content":"But append is intended for use with non-tag properties. So i think deny is the correct answer in this case."},{"poster":"[Removed]","content":"Yes, it would be append since it is having the details parameter as value contos...which means if does not exist then it will create the tag. In case of Deny there will be no Details section in the template of the policy","upvote_count":"5","comment_id":"72986","timestamp":"1586530440.0"}],"poster":"hubeau","timestamp":"1586323200.0","upvote_count":"2","comment_id":"72309"}],"content":"No it is deny...because it is showing if Not contoso then deny the deployment....There is a not condition....if it was assignment then it would have been append","poster":"[Removed]","comment_id":"69179","timestamp":"1585471140.0"}],"timestamp":"1585179480.0","comment_id":"68229"},{"upvote_count":"4","content":"Appends the specified tag with its value from the resource group when any resource which is missing this tag is created or updated. Does not modify the tags of resources created before this policy was applied until those resources are changed. New 'modify' effect policies are available that support remediation of tags on existing resources (see https://aka.ms/modifydoc\n\nAppend Does not modify the tags of resources created before this policy was applied until those resources are changed. New 'modify' effect policies are available that support remediation of tags on existing resources (see","timestamp":"1592907780.0","poster":"Morettimaxi","comment_id":"117323"},{"upvote_count":"1","timestamp":"1658347200.0","comment_id":"634233","content":"There is also a pre built policy named \"Require a tag and its value on resource groups\" It uses \"Deny\"","poster":"akp1000"},{"comments":[{"comment_id":"575616","poster":"prashantjoge","content":"For a Resource Manager mode, the deny effect doesn't have any additional properties for use in the then condition of the policy definition. Since additional properties are mentions, it has to be append","timestamp":"1648307820.0","upvote_count":"2"}],"upvote_count":"1","content":"When a policy definition using the append effect is run as part of an evaluation cycle, it doesn't make changes to resources that already exist. Instead, it marks any resource that meets the if condition as non-compliant.\n\nhttps://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects#append-evaluation","poster":"prashantjoge","comment_id":"575598","timestamp":"1648305780.0"},{"comment_id":"89875","poster":"Yogothegreat","content":"Right Answer : Append \nThe first instinct is deny, but after reading this ..it should be Append so that it adds tag to the RG, though Append is not recommended choice, Modify should be preferred over Append per documentation \nhttps://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects#append","upvote_count":"4","timestamp":"1589624880.0"},{"comment_id":"449952","timestamp":"1632378300.0","upvote_count":"17","content":"in code provided we see\n if NOT ''organization' = 'Contoso'\n then...our question code\nso with Append result will be reversed to what need to be,\ni.e.''organization' = 'something but not Contoso'\nand 2. must be Deny","comments":[{"content":"EXACTLY! There is a NOT before the condition so deny is the correct answer. Also the other two are not applicable to tags\nhttps://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects","upvote_count":"3","timestamp":"1647622860.0","comments":[{"comment_id":"580169","upvote_count":"2","comments":[{"poster":"rdemontis","content":"Append properties\nAn append effect only has a details array, which is required. As details is an array, it can take either a single field/value pair or multiples. Refer to definition structure for the list of acceptable fields.\n\nAppend is intended for use with non-tag properties. While Append can add tags to a resource during a create or update request, it's recommended to use the Modify effect for tags instead.\n\nhttps://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects#append","comment_id":"580170","timestamp":"1648975800.0","upvote_count":"2","comments":[{"poster":"kennynelcon","content":"You justified your claims below. \nCorrect pesin","upvote_count":"1","comment_id":"636639","timestamp":"1658745540.0"},{"upvote_count":"2","timestamp":"1648975800.0","poster":"rdemontis","comment_id":"580171","content":"You use Azure Policy to enforce tagging rules and conventions. By creating a policy, you avoid the scenario of resources being deployed to your subscription that don't have the expected tags for your organization. Instead of manually applying tags or searching for resources that aren't compliant, you create a policy that automatically applies the needed tags during deployment. Tags can also now be applied to existing resources with the new Modify effect and a remediation task. The following section shows example policy definitions for tags.\n\nName: Append a tag and its value to resource groups. \nDescription: Appends the specified tag and value when any resource group which is missing this tag is created or updated. Does not modify the tags of resource groups created before this policy was applied until those resource groups are changed. New 'modify' effect policies are available that support remediation of tags on existing resources (see https://aka.ms/modifydoc). \nEffect(s): append\nVersion (github): 1.0.0\n\nhttps://docs.microsoft.com/en-us/azure/azure-resource-manager/management/tag-policies"}]}],"content":"I've changed my opion. I think the correct answer for box 2 is Append. Here are the reasons:\n\nDeny evaluation\nDuring evaluation of existing resources, resources that match a deny policy definition are marked as non-compliant.\n\nDeny properties\nFor a Resource Manager mode, the deny effect doesn't have any additional properties for use in the then condition of the policy definition.\n\nhttps://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects#deny\n\nDeployIfNotExists\nSimilar to AuditIfNotExists, a DeployIfNotExists policy definition executes a template deployment when the condition is met. Policy assignments with effect set as DeployIfNotExists require a managed identity to do remediation.\n\nDeployIfNotExists properties\nThe details property of the DeployIfNotExists effect has all the subproperties that define the related resources to match and the template deployment to execute.\n\nType (required)\n\nhttps://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects#deployifnotexists","timestamp":"1648975740.0","poster":"rdemontis"}],"comment_id":"570659","poster":"rdemontis"}],"poster":"d0bermannn"},{"poster":"Morettimaxi","upvote_count":"9","content":"https://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects#append\n\nAppend is intended for use with non-tag properties. While Append can add tags to a resource during a create or update request, it's recommended to use the Modify effect for tags instead.\n\nThe answer is deny. Append is not for tags","comment_id":"117321","timestamp":"1592907600.0","comments":[{"timestamp":"1625378280.0","comments":[{"upvote_count":"5","comments":[{"upvote_count":"2","comment_id":"602961","content":"Is the question not an update request? i.e, if the tag is not there, update the RG with a tag!","timestamp":"1652798160.0","poster":"Chiboy"}],"poster":"nickc1","content":"Because it literally says in the documentation: \"Append is intended for use with non-tag properties. While Append can add tags to a resource during a create or update request, it's recommended to use the Modify effect for tags instead.\"","comment_id":"408731","timestamp":"1626587580.0"}],"upvote_count":"1","comment_id":"398050","poster":"KhabibcandefeatGSP","content":"@Moretti - \"Append is not for tags\", why would you say such a thing?"}]}]},{"upvote_count":"9","comment_id":"104027","poster":"Root_Access","timestamp":"1591467120.0","content":"take my word back, if you are denying you dont need to specify tag name and value, but it is defined in the question, so it should be append. my bad.","comments":[{"timestamp":"1652798220.0","poster":"Chiboy","upvote_count":"1","comment_id":"602962","content":"Yes. If you review the resource Group and the Tag is not there, update the RG with the specified tag."}]},{"timestamp":"1718263440.0","comment_id":"1229681","poster":"e0da014","content":"Final correct answer, verified\n1. Microsoft.Resources/subscriptions/resourceGroups\n2. Append","upvote_count":"2"},{"timestamp":"1712824980.0","upvote_count":"1","poster":"chloaus","content":"2 is append.\nhttps://learn.microsoft.com/en-us/azure/governance/policy/concepts/effect-append","comment_id":"1193607"},{"poster":"zapi","upvote_count":"1","content":"Microsoft.Resources/subscriptions/resourceGroups\nDeployIfNotExists\nThat ensures that all resource groups are tagged","comment_id":"1192190","timestamp":"1712655720.0"},{"comment_id":"1044715","timestamp":"1697438460.0","content":"For a deny policy the field and value properies wouldn't be neccessary and append is not for Tag as mentioned in other commends. Therefore I would go for \"DeployIfNotExists\". Any thoughts on this?","poster":"hydrillo","upvote_count":"1"},{"content":"I think it's Append, because in the template, the effect is followed by the tag details, so that makes sense only if it's going to do an Append operation. If it's a deny, then what is the point of providing the tag details?","comment_id":"1017191","timestamp":"1695673740.0","poster":"gabo","upvote_count":"1"},{"timestamp":"1692207600.0","comment_id":"982823","content":"looks correct, many suggest append or deployIfnotExist. but that should not work since there is no configuration in the example that points to an managed identity or service principal with permission to do this action","upvote_count":"2","poster":"Misterit"},{"poster":"Pukun","content":"{\n\"name\": \"Tagging policy\",\n\"description\": \"Policy to require all resource groups to have a tag named organization set to a value of Contoso.\",\n\"scope\": {\n\"type\": \"Subscription\"\n},\n\"policyRule\": {\n\"ruleType\": \"Tag\",\n\"resourceType\": \"Microsoft.Resources/resourceGroups\",\n\"tagSpecs\": [\n{\n\"tagName\": \"organization\",\n\"tagValue\": \"Contoso\"\n}\n],\n\"effect\": \"Deny\"\n}\n}","upvote_count":"1","timestamp":"1685335620.0","comment_id":"909045"},{"comment_id":"901108","upvote_count":"1","timestamp":"1684408380.0","content":"GPT4\nThis policy will deny any resource group creation or update that does not include a tag named 'organization' with a value 'Contoso'.","poster":"DGladiator"},{"content":"In the policy definition, the \"then\" block defines the action that will be taken when the conditions specified in the \"if\" block are met. In this case, the action is \"effect\": \"deny\".\n\nThe \"deny\" effect means that if the conditions in the \"if\" block are met (i.e., the resource group does not have the required tag or the tag value is not \"Contoso\"), the policy will deny the creation or update of the resource group. As a result, the user attempting the action will receive an error message indicating that the operation is not allowed due to the policy.\n\nIn summary, the \"then\" block with the \"effect\": \"deny\" is used to enforce the policy by disallowing the creation or update of resource groups that do not meet the specified tagging requirements.","comment_id":"855113","upvote_count":"1","timestamp":"1680136260.0","poster":"col2511kol"},{"upvote_count":"1","content":"You can create and assign a custom Azure Policy to enforce the required tagging for all resource groups in the subscription. Here's an example of the policy definition: \n{\n \"properties\": {\n \"displayName\": \"Require organization tag\",\n \"policyType\": \"Custom\",\n \"mode\": \"Indexed\",\n \"description\": \"Enforces the existence of the 'organization' tag with the value 'Contoso' on resource groups.\",\n \"metadata\": {\n \"version\": \"1.0.0\",\n \"category\": \"Tags\"\n },\n \"parameters\": {},\n \"policyRule\": {\n \"if\": {\n \"allof\": [\n {\n \"field\": \"type\",\n \"equals\": \"Microsoft.Resources/subscriptions/resourceGroups\"\n },\n {\n \"not\": {\n \"field\": \"tags['organization']\",\n \"equals\": \"Contoso\"\n }\n }\n ]\n },\n \"then\": {\n \"effect\": \"deny\"\n }\n }\n }\n}","poster":"col2511kol","timestamp":"1680136020.0","comment_id":"855112"},{"timestamp":"1672410000.0","content":"The answer is append here is the reference:\n\nhttps://portal.azure.com/#view/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2Fproviders%2FMicrosoft.Authorization%2FpolicyDefinitions%2F49c88fc8-6fd1-46fd-a676-f12d1d3a4c71","poster":"georgedevops_111","upvote_count":"4","comment_id":"762024"},{"content":"The given answer is correct. The question clearly states that the resourcegroups must have tags as a requirement. If they do not have tags it doesn't say that tags should be automatically added. It is thus logical that the resourcegroup creation should be denied.","comment_id":"734460","poster":"Oluseun","upvote_count":"1","timestamp":"1670072700.0"},{"content":"If you were going to use a deny policy then you wouldn't need the details.\nIt should be append.","upvote_count":"2","comment_id":"668715","timestamp":"1663140480.0","poster":"Atos"},{"timestamp":"1661004480.0","comment_id":"649458","poster":"pdk88","upvote_count":"4","content":"I think the given answer is correct. \n\n1. Microsoft.Resources/subscriptions/resourceGroups\n2. Deny\n\nAccording to this link (https://docs.microsoft.com/en-us/azure/governance/policy/samples/built-in-policies#tags.) there are eight options with regards to assigning tags to resource groups. This particular case states the tag VALUE 'Contoso' is REQUIRED, hence we are looking for \"Require a tag and its value on resource groups\". When opening the link belonging to this tag, the policy says: \n\n \"displayName\": \"Require a tag and its value on resource groups\",\n \"policyType\": \"BuiltIn\",\n \"mode\": \"All\",\n \"description\": \"Enforces a required tag and its value on resource groups.\"\n \n [...]\n\n \"then\": {\n \"effect\": \"deny\""},{"content":"Answer is append. Keyword is \"requires.\" Append will set the value of what is specified in the details. I've done this before with hybrid benefit options on vm builds using a policy in the past.","upvote_count":"1","comment_id":"647276","poster":"Darkeh","timestamp":"1660580160.0"},{"comment_id":"644294","timestamp":"1660008480.0","poster":"syu31svc","content":"The key word is require\n\nhttps://docs.microsoft.com/en-us/azure/azure-resource-manager/management/tag-policies\n\n\"Require a tag and its value on resource groups Enforces a required tag and its value on resource groups. deny\"\n\nAnswer is correct","upvote_count":"3"},{"upvote_count":"3","content":"Resource Group --> Append","poster":"Govcomm","comment_id":"635586","timestamp":"1658584860.0"},{"comment_id":"573002","poster":"Whirly","timestamp":"1647959520.0","upvote_count":"1","content":"Given Answer is correct, refer to Azure Built-in Policy \n\neffect\": \"deny\""},{"upvote_count":"1","poster":"Pankaj78","content":"Required a tag on resourceGroups \n\"policyRule\": {\n \"if\": {\n \"not\": {\n \"field\": \"[concat('tags[', parameters('tagName'), ']')]\",\n \"equals\": \"[parameters('tagValue')]\"\n }\n },\n \"then\": {\n \"effect\": \"deny\"\n }\n }","timestamp":"1639880700.0","comment_id":"504588"},{"upvote_count":"2","comment_id":"479259","content":"why not DeployIfNotExist ?","comments":[{"poster":"omw2wealth","content":"cause this is not AZ-500 xD","comment_id":"497075","timestamp":"1638988620.0","upvote_count":"8"}],"timestamp":"1637053080.0","poster":"cdsa"},{"poster":"GigaCaster","comment_id":"478679","content":"As the question states \"You need to implement a policy to meet the tagging requirement\" thus it will be deny as they don't ask us to tag the resource groups themselves.","timestamp":"1636982040.0","upvote_count":"2"},{"comment_id":"465953","content":"Based on https://docs.microsoft.com/en-us/azure/governance/policy/samples/built-in-policies\nIf you go down to Require a tag and its value on resource groups and click it, it will literally show you the code, it is 100.00% correct, click the link will actually give you the complete code which is what is presented.","timestamp":"1634869680.0","poster":"khengoolman","upvote_count":"8","comments":[{"poster":"Chiboy","upvote_count":"1","content":"You're right. The answer is \"Deny\". I stand corrected.","comment_id":"602964","timestamp":"1652799120.0"},{"comment_id":"533684","upvote_count":"1","poster":"samyderlachs","content":"I Like Sherlock!","timestamp":"1643282160.0"}]},{"timestamp":"1634742000.0","comment_id":"465230","poster":"deny619","upvote_count":"2","content":"The answer is Append. If it was Deny, you wouldn't need to specify tag and its value after \"effect\" = Deny. \nThe policy definition structure is meant for Append."},{"comment_id":"449247","poster":"Kode","content":"Append is incorrect. If you read here (https://docs.microsoft.com/en-us/azure/governance/policy/samples/built-in-policies#tags) it clearly indicates that Append will not take effect until resources are modified, which does not necessarily meet the requirement of ensuring all resource groups have the tag.\n\nThe correct answer is 'Deny' as you can see here: https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2Fproviders%2FMicrosoft.Authorization%2FpolicyDefinitions%2F8ce3da23-7156-49e4-b145-24f95f9dcb46\nThis is a built in policy definition called 'Require a tag and its value on resource groups' which has an effect of 'Deny'","timestamp":"1632277800.0","upvote_count":"2"},{"comment_id":"441950","upvote_count":"2","content":"Before commenting on its append or deny look at the code provided. As the code shows all code that doesn't have Contoso in it will be targeted.","timestamp":"1631188440.0","poster":"GigaCaster"},{"upvote_count":"1","content":"the correct answer is append, hence why there is a details after effect","poster":"Tshepuna","timestamp":"1630478520.0","comment_id":"436898"},{"timestamp":"1628398920.0","content":"Ans: Deny is correct. \nIf append is used, and if the tag exists, append causes denying of the deployment, eventhough the tag exists.\nhttps://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects#:~:text=Append%20examples,from%20the%20conflict.","upvote_count":"2","poster":"weasel97","comment_id":"421485"},{"comment_id":"418056","upvote_count":"1","poster":"goatlord","content":"Given answer is correct.","timestamp":"1627778280.0"},{"upvote_count":"4","comment_id":"399208","poster":"jperona","timestamp":"1625491920.0","content":"In Azure Policies effect website, in an \"Important Box\" you can read: \"Append is intended for use with non-tag properties....\". So you can't use \"Append\". The correct answer is \"Deny\"\n\nhttps://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects"},{"comment_id":"389002","content":"Here since we need to ensure the tags are applied on the resource groups, we need to apply the policy\ndefinition rule to the type of \"MicrosoftResources/subscriptions/resourceGroups\"","timestamp":"1624470180.0","poster":"erico","upvote_count":"1"},{"poster":"fflyin2k","content":"1. Microsoft.Resources/subscriptions/resourceGroups\n2. Deny\n\nBe careful friends. the script in the question is saying:\nNOT : {tags['organization'] equals 'Contoso'}\n\nSo, the it intends to say \"reject (deny) resources groups without Contoso tag\".","comment_id":"358232","upvote_count":"3","timestamp":"1621122360.0"},{"comment_id":"306627","upvote_count":"4","timestamp":"1615317240.0","content":"Yes, 'Append' is the right one as the requirement is to make sure resource has tag name is as organisation name. There is no point to deny.","poster":"Thiru204"},{"content":"The Answer should be 'Deny' \nb/c the effect 'append' Appends the specified tag with its value from the resource group when any resource which is missing this tag is created or updated. It does not modify the tags of resources created before this policy was applied until those resources are changed. Assuming the RG already has resources provisioned, this policy may fails or not work when applied.\nSo it should be 'deny' so it will enforces a required tag and its value on resource groups","poster":"skySand","upvote_count":"1","timestamp":"1613624280.0","comment_id":"293097"},{"upvote_count":"5","poster":"Ahmed0","content":"the correct Answer is append as he is giving a details section with the tag name and value to append. \nwe don't need this details section incase we gonna deny.","timestamp":"1609164120.0","comment_id":"254089"},{"poster":"bensagar10","comment_id":"252193","upvote_count":"2","content":"Area 1 - MicrosoftResources/subscriptions/resourceGroups - Explanation - Here since we need to ensure the tags are applied on the resource groups, we need to apply the policy definition rule to the type of \"MicrosoftResources/subscriptions/resourceGroups\n\nArea 2 - Deny - Here we have to ensure to deny the creation of resource groups if they don’t abide by the policy definition.","timestamp":"1608916680.0"},{"poster":"moilogin","comment_id":"246689","content":"Answer is correct.\nRequire a tag and its value on resource groups\nhttps://docs.microsoft.com/en-us/azure/azure-resource-manager/management/tag-policies","timestamp":"1608224640.0","upvote_count":"2"},{"comments":[{"poster":"HS007","timestamp":"1605802980.0","upvote_count":"2","comment_id":"222925","content":"I meant to say, deny effect doesn't have any additional properties for use in the then condition of the policy definition.\nhttps://docs.microsoft.com/en-us/azure/governance/policy/concepts/effects#append"}],"comment_id":"222923","poster":"HS007","timestamp":"1605802740.0","upvote_count":"1","content":"Answer should be Microsoft.Resources/subscriptions/resourceGroups and Append, because the requirement is that thru policy the resources should have a tag of contoso if not present. On deny, you dont need effect."},{"timestamp":"1604255640.0","upvote_count":"3","poster":"Hooters","comment_id":"210652","content":"Part one is correct, however for part 2 i think deny is correct. The intention in the exam is not to trick the exam taker, so i read it as -- the customer is ONLY having a subscription, before they deploy any RG's, they would like to have a policy in place since foundation as a best practice.Deny matches perfectly in that case."},{"content":"I think it will be Append because it needs to be implemented for all resource groups.\nDeny : Will only affect new RG creation. Exisiting resource groups will not be affected\nDeployifnotexist : Is used generally for creating of a new azure resource","upvote_count":"2","timestamp":"1600255620.0","poster":"Cloudcrawler","comment_id":"180306"},{"comment_id":"165780","content":"If you would apply a deny policy to an existing environment, nothing is being resolved in sense of compliance. The only thing that will happen is that the environment breaks.\n\nWith the use of an Append policy, existing RG will be updated when triggered, and the tag will be created. \n\nIn this way you can create a compliant environment where tagging is always applied as required by the company policy","poster":"examkid","timestamp":"1598340900.0","upvote_count":"1"},{"comment_id":"165706","timestamp":"1598332080.0","poster":"CristianN","upvote_count":"2","content":"If we follow the parameters defined in the second section, append would be the right choice\nhttps://endjin.com/blog/2019/04/enforce-resource-tagging-with-azure-policy"},{"poster":"zalyoung","upvote_count":"2","timestamp":"1592891220.0","content":"It should be \"Deny\", the question is \"The company **requires** that all resource groups in the subscription have a tag named organization set to a value of Contoso.\"\n\nRequire a tag and its value on resource groups --> Deny\nAppend a tag and its value to resource groups --> Append\n\nhttps://docs.microsoft.com/en-us/azure/azure-resource-manager/management/tag-policies","comment_id":"117085","comments":[{"timestamp":"1592891460.0","poster":"zalyoung","upvote_count":"12","comment_id":"117093","content":"Sorry, it should use \"Append\" , because append needs the detailed value, deny doesn't need\n\n \"then\": {\n \"effect\": \"append\",\n \"details\": [\n {\n \"field\": \"[concat('tags[', parameters('tagName'), ']')]\",\n \"value\": \"[parameters('tagValue')]\"\n }\n ]\n }\n\n\n \"then\": {\n \"effect\": \"deny\"\n }"}]},{"poster":"Root_Access","timestamp":"1591467000.0","content":"The answer is correct, if you set a policy like this, no one can create a resource group with that specific tag, so you will meet the requirements. The answer comes directly from here:\nhttps://github.com/Azure/azure-policy/blob/master/samples/ResourceGroup/enforce-resourceGroup-tags/azurepolicy.json\nhowever if you think the question is asking you to create policy to add/append the tag you can find some samples here:\nhttps://docs.microsoft.com/en-us/azure/azure-resource-manager/management/tag-policies","comment_id":"104024","upvote_count":"4"}],"answer_images":["https://www.examtopics.com/assets/media/exam-media/04257/0017400001.png"],"question_text":"HOTSPOT -\nYour company has an Azure subscription.\nThe company requires that all resource groups in the subscription have a tag named organization set to a value of Contoso.\nYou need to implement a policy to meet the tagging requirement.\nHow should you complete the policy? To answer, select the appropriate options in the answer area.\nNOTE: Each correct selection is worth one point.\nHot Area:\n//IMG//","exam_id":55,"question_images":["https://www.examtopics.com/assets/media/exam-media/04257/0017300001.png"],"isMC":false,"topic":"4","timestamp":"2020-03-20 09:30:00","answer":"","answers_community":[],"answer_ET":""},{"id":"q3M2pg3HHtfXEmbjMkTZ","answers_community":["B (100%)"],"answer_ET":"B","topic":"4","exam_id":55,"answer":"B","answer_images":[],"discussion":[{"poster":"qrkon","content":"Given answer is correct.\nAzure AD Enterprise Apps Market Place: Azure Active Directory> Enterprise Applications> New Application> Search and use Github","upvote_count":"20","timestamp":"1620588120.0","comment_id":"216223"},{"timestamp":"1640800560.0","comments":[{"content":"You got alot wrong.","timestamp":"1643138580.0","comment_id":"414132","upvote_count":"2","poster":"Saintu"},{"timestamp":"1642492440.0","upvote_count":"2","comment_id":"408734","content":"So you got some wrong?","poster":"nickc1"}],"content":"got this in 30 Jun 2021 exams. scored 800+ marks. B is correct","poster":"Dalias","upvote_count":"5","comment_id":"393969"},{"comment_id":"1155951","upvote_count":"1","timestamp":"1724278320.0","content":"Selected Answer: B\nCorrect B","poster":"ozbonny"},{"content":"Selected Answer: B\nB is correct\n\nFrom link given, you have to register for your credentials","timestamp":"1674562080.0","comment_id":"635962","poster":"syu31svc","upvote_count":"1"},{"comment_id":"635588","content":"App registration so register GitHub App is the correct answer.","poster":"Govcomm","upvote_count":"1","timestamp":"1674489660.0"},{"comment_id":"603736","content":"Selected Answer: B\nB is correct answer.","poster":"Eltooth","timestamp":"1668855960.0","upvote_count":"1"},{"poster":"UnknowMan","upvote_count":"1","timestamp":"1667856600.0","comment_id":"598277","content":"Correct"},{"poster":"rdemontis","upvote_count":"1","content":"Selected Answer: B\ncorrect answer","timestamp":"1664611080.0","comment_id":"579380"},{"comment_id":"565931","upvote_count":"1","content":"Selected Answer: B\nLooks B to me\n\nhttps://docs.github.com/en/github-ae@latest/admin/identity-and-access-management/configuring-authentication-and-provisioning-with-your-identity-provider/configuring-authentication-and-provisioning-for-your-enterprise-using-azure-ad","poster":"LieJ0n","timestamp":"1662954180.0"},{"upvote_count":"1","comment_id":"525915","poster":"Sumit4666","timestamp":"1658065860.0","content":"B is correct.\nhttps://docs.microsoft.com/en-us/azure/active-directory/saas-apps/github-enterprise-cloud-enterprise-account-tutorial"},{"poster":"malikimran21","timestamp":"1655147520.0","content":"this came in today exam Az-400 (Dec 2021)","upvote_count":"1","comment_id":"500905"},{"comment_id":"223715","timestamp":"1621516320.0","poster":"kumardeb","content":"B. Register GitHub in Azure AD.","upvote_count":"5"}],"question_id":168,"answer_description":"","unix_timestamp":1604956920,"url":"https://www.examtopics.com/discussions/microsoft/view/36610-exam-az-400-topic-4-question-34-discussion/","question_text":"You need to configure GitHub to use Azure Active Directory (Azure AD) for authentication.\nWhat should you do first?","timestamp":"2020-11-09 22:22:00","choices":{"B":"Register GitHub in Azure AD.","D":"Modify the Security settings of the GitHub organization.","A":"Create a conditional access policy in Azure AD.","C":"Create an Azure Active Directory B2C (Azure AD B2C) tenant."},"isMC":true,"question_images":[]},{"id":"hlaR3kj6zqVRgvedi5MQ","choices":{"A":"Add a deployment gate.","C":"Configure a deployment trigger.","B":"Modify the Deployment queue settings.","D":"Create a pipeline variable."},"unix_timestamp":1612675200,"isMC":true,"discussion":[{"content":"Deployment gate is correct","upvote_count":"17","comment_id":"285298","poster":"077dammy","timestamp":"1628306400.0"},{"timestamp":"1718660160.0","poster":"vsvaid","content":"Selected Answer: A\nAgree with A","upvote_count":"1","comment_id":"1099323"},{"timestamp":"1707213480.0","comment_id":"973628","upvote_count":"1","content":"A. Add a deployment gate is correct.\nGates >> Check Azure Policy compliance","poster":"GirishGururani"},{"content":"Selected Answer: A\nIf you want to prevent a (release) from being deployed within Azure DevOps, following Azure Policies rules, it is necessary that within the pre-deployment conditions, in the option of GATEs enabled, “Check Policy Compliance” is added.","upvote_count":"1","comment_id":"970112","timestamp":"1706881680.0","poster":"flafernan"},{"upvote_count":"2","poster":"zellck","content":"Selected Answer: A\nA is the answer.\n\nhttps://learn.microsoft.com/en-us/azure/governance/policy/tutorials/policy-devops-pipelines","timestamp":"1701536400.0","comment_id":"912897"},{"upvote_count":"4","comment_id":"808119","content":"Selected Answer: A\nThis question came today (2023-02-14)","poster":"surensaluka","timestamp":"1691984880.0"},{"timestamp":"1678968360.0","comment_id":"670680","poster":"Jhest","content":"I always think of Rocky Lee when I see this question.","upvote_count":"2"},{"timestamp":"1674562440.0","comment_id":"635965","poster":"syu31svc","upvote_count":"2","content":"Selected Answer: A\nA is supported by given link and explanation"},{"timestamp":"1674489720.0","content":"Add a deployment gate with the condition to control the quality.","comment_id":"635589","upvote_count":"1","poster":"Govcomm"},{"upvote_count":"2","content":"Selected Answer: A\nA is correct answer.","poster":"Eltooth","comment_id":"606114","timestamp":"1669217040.0"},{"comment_id":"598279","upvote_count":"1","content":"Correct","timestamp":"1667856660.0","poster":"UnknowMan"},{"timestamp":"1665499620.0","upvote_count":"1","comment_id":"584263","content":"Selected Answer: A\nCorrect","poster":"AhmedHamdo"},{"content":"Selected Answer: A\nCorrect","timestamp":"1663513980.0","upvote_count":"1","comment_id":"570665","poster":"rdemontis"},{"upvote_count":"2","comment_id":"459154","timestamp":"1649411820.0","content":"Still relevant, got it today on the exam.","poster":"Kolego"},{"comment_id":"286433","timestamp":"1628446680.0","poster":"SriLen","content":"Agree with given Answer , Deployment Gate","upvote_count":"4"}],"question_id":169,"url":"https://www.examtopics.com/discussions/microsoft/view/44153-exam-az-400-topic-4-question-35-discussion/","answer_ET":"A","question_text":"You have an Azure DevOps project named Project1 and an Azure subscription named Sub1.\nYou need to prevent releases from being deployed unless the releases comply with the Azure Policy rules assigned to Sub1.\nWhat should you do in the release pipeline of Project1?","answer_description":"","question_images":[],"timestamp":"2021-02-07 06:20:00","answer":"A","topic":"4","answers_community":["A (100%)"],"exam_id":55,"answer_images":[]},{"id":"2zRdG63jhGP4E8YaNDOP","answer":"","topic":"4","answer_description":"Step 1: Create a YAML file.\nIf your AKS cluster is RBAC-enabled, you must create a service account and role binding for use with Tiller. To create a service account and role binding, create a file named rbac-virtual-kubelet.yaml\nStep 2: Run kubectl apply.\nApply the service account and binding with kubectl apply and specify your rbac-virtual-kubelet.yaml file.\nStep 3: Run helm init.\nConfigure Helm to use the tiller service account:\nhelm init --service-account tiller\nYou can now continue to installing the Virtual Kubelet into your AKS cluster.\nReference:\nhttps://docs.microsoft.com/en-us/azure/aks/virtual-kubelet","unix_timestamp":1583849580,"question_text":"DRAG DROP -\nYou have an Azure Kubernetes Service (AKS) implementation that is RBAC-enabled.\nYou plan to use Azure Container Instances as a hosted development environment to run containers in the AKS implementation.\nYou need to configure Azure Container Instances as a hosted environment for running the containers in AKS.\nWhich three actions should you perform in sequence? To answer, move the appropriate actions from the list of actions to the answer area and arrange them in the correct order.\nSelect and Place:\n//IMG//","answer_images":["https://www.examtopics.com/assets/media/exam-media/04257/0017800001.png"],"question_images":["https://www.examtopics.com/assets/media/exam-media/04257/0017700001.png"],"discussion":[{"upvote_count":"48","content":"With helm v3:\n1. kubectl apply - to create the service principle for Tiller\n2. helm init - to deploy Tiller in the kubernetes cluster\n3. az aks install-connector - to install the connector","timestamp":"1584902640.0","comments":[{"comment_id":"1339798","timestamp":"1736746500.0","content":"Run az aks install-connector is a command that install ACI, with ACI you do not need Run az role assignment create so for me the answer is :\n1 Run az aks install-connector\n2 Create a YAML file\n3 Run kubectl apply","upvote_count":"2","poster":"Christian_garcia_martin"},{"upvote_count":"5","comment_id":"67627","comments":[{"poster":"nasa1515","comments":[{"content":"you need to take into context that this question was probably developed when Helm v2 was the deployment tool","poster":"Saterial","timestamp":"1619839980.0","comment_id":"346547","upvote_count":"3"}],"timestamp":"1610523300.0","content":"Is the answer correct?","upvote_count":"2","comment_id":"266095"}],"timestamp":"1585043340.0","content":"this is for v2, sorry","poster":"TosO"},{"comment_id":"1145549","poster":"djhyfdgjk","timestamp":"1707489060.0","content":"Where does the question ask anything about Helm ??","upvote_count":"2"}],"comment_id":"67061","poster":"TosO"},{"content":"Answer is right. According to documentation, you create a YAML that defines service account and binding, then you apply that configuration and finally \"deploy a basic Tiller into an AKS cluster\". https://docs.microsoft.com/en-us/azure/aks/kubernetes-helm","timestamp":"1586092560.0","comments":[{"comment_id":"74330","upvote_count":"16","timestamp":"1586831040.0","poster":"hubeau","content":"You're right:\n\n1. Create a file named helm-rbac.yaml \n2. kubectl apply -f helm-rbac.yaml\n3. helm init --history-max 200 --service-account tiller...\n4. $ helm install stable/nginx-ingress --set controlle...."}],"poster":"thetrapt","comment_id":"71441","upvote_count":"24"},{"upvote_count":"5","poster":"UrbanRellik","timestamp":"1727900640.0","comment_id":"1292517","content":"Update: 10/2024\n1. Az role assignment create\n2. Create a yaml file (role-dev-namespace.yaml)\n3. Run kubectl apply\n\nhttps://learn.microsoft.com/en-us/azure/aks/azure-ad-rbac"},{"content":"Create a YAML file (rbac-virtual-kubelet.yaml):\n\nDefine a service account for the virtual kubelet.\nSpecify the necessary role bindings to grant the service account required permissions within the AKS cluster.\nRun kubectl apply:\n\nApply the rbac-virtual-kubelet.yaml file using this command.\nThis creates the service account and assigns the role bindings, enabling the virtual kubelet to interact with the cluster resources.\nRun helm init --service-account tiller:\n\nThis step becomes relevant only when using Helm with the virtual kubelet.","upvote_count":"2","timestamp":"1709799720.0","comment_id":"1167784","poster":"FeriAZ"},{"comments":[{"content":"I think, the correct sequence is:\n\n(1) Run az role assignment create\nThis is necessary first because the AKS cluster is RBAC-enabled\nSets up the required permissions for ACI integration\n(2) Create a YAML file\nCreates the configuration file needed to define the ACI integration\nSpecifies the virtual node configuration and container deployment settings\n(3) Run kubectl apply\nApplies the YAML configuration to the cluster\nImplements the ACI integration settings\nThe question specifically mentions RBAC is enabled, making role assignment a necessary first step\nWhile older solutions used Helm/Tiller or the az aks install-connector command, these approaches are outdated\nModern AKS-ACI integration uses virtual nodes, which requires RBAC setup, YAML configuration, and kubectl deployment\nThe az aks install-connector command has been replaced by virtual nodes functionality\n\nNote that while there are comments mentioning Helm and older connector methods, these refer to deprecated approaches that are no longer the recommended way to integrate ACI with AKS.","comment_id":"1341712","timestamp":"1737034140.0","poster":"Freyr","upvote_count":"2"}],"comment_id":"1083141","timestamp":"1701236640.0","upvote_count":"13","content":"Final Answer after going through all the comments\n1) Run az role assignment create\n2) Create a YAML file\n3) Run kubectl apply\n\nThere is no az aks install-connector command\nhelm has nothing to do here","poster":"varinder82"},{"content":"1. run az role assignment create\n2. create a yaml file\n3. run kubectl -apply -f (i.e. file name to be applied) -> The kubectl apply command is a declarative way of deploying resources on a cluster using YAML manifest files\n\nhttps://docs.microsoft.com/en-us/azure/aks/azure-ad-rbac\nhttps://karthi-net.medium.com/kubernetes-tutorial-create-deployments-using-yaml-file-90ea901a2f74\nhttps://www.geeksforgeeks.org/kubernetes-kubectl-create-and-kubectl-apply/","timestamp":"1692003600.0","comment_id":"980629","upvote_count":"9","poster":"yana_b"},{"content":"I think\n1.az aks install-connector\nInstall the Azure Container Instances Connector on your AKS cluster to enables the deployment of containers on Azure Container Instances.\n\n2. Create YAML file\nCalled manifest file, describes the desired state of the pods or containers you want to deploy on Azure Container Instances within your AKS cluster.\n\n3. kubectl apply\nUsed to deploy Kubernetes resources in AKS using an specific manifest file(YML or JSON) \ne.g. \nkubectl apply -f deployment.yaml","poster":"renzoku","comment_id":"954661","upvote_count":"6","timestamp":"1689631680.0"},{"content":"To configure Azure Container Instances as a hosted environment for running containers in AKS, you should perform the following actions in sequence:\n\nRun az aks install-connector: This installs the Azure Monitor for containers connector on the AKS cluster, which enables monitoring of container logs, metrics, and performance data from Azure Container Instances.\n\nCreate a YAML file: This file describes the container deployment and specifies the connection details for the Azure Monitor for containers connector.\n\nRun kubectl apply: This deploys the container to AKS using the YAML file created in step 2.\n\nTherefore, the correct sequence of actions is as follows:\n\nB. Run az aks install-connector\nC. Create a YAML file\nE. Run kubectl apply\n\nNote: Running helm init and az role assignment create are not necessary for configuring Azure Container Instances as a hosted environment for running containers in AKS.","comment_id":"846278","poster":"adityagoel26","timestamp":"1679426640.0","upvote_count":"4","comments":[{"comment_id":"917041","content":"This is from GPT. Can you provide a link instead?","poster":"kay000001","timestamp":"1686129780.0","upvote_count":"3"}]},{"content":"Tiller is no longer used in Helm, so this is probably an outdated question. However, if you want to know more about the integration between AKS and ACI, I suggest you to read this:\n\nhttps://learn.microsoft.com/en-us/azure/architecture/solution-ideas/articles/scale-using-aks-with-aci","comments":[{"poster":"kmaneith","upvote_count":"1","timestamp":"1668704400.0","comment_id":"720673","content":"read this https://learn.microsoft.com/en-us/azure/aks/virtual-nodes-cli"}],"poster":"Yatoom","comment_id":"704935","timestamp":"1666809420.0","upvote_count":"4"},{"timestamp":"1660009740.0","content":"I dont see what has helm got to do with this and there is no az aks install-connector command\n\nhttps://docs.microsoft.com/en-us/azure/aks/azure-ad-rbac\n\n1) Run az role assignment create\n2) Create a YAML file\n3) Run kubectl apply","comment_id":"644302","upvote_count":"19","comments":[{"poster":"Pamban","content":"I think this is the best explanation and the link","upvote_count":"1","comment_id":"914950","timestamp":"1685920020.0"}],"poster":"syu31svc"},{"comment_id":"635591","poster":"Govcomm","content":"It is RBAC enabled. So \"az role assignment\"\nCreate a YAML file\nKublctl apply to apply the YAML file","upvote_count":"6","timestamp":"1658585100.0"},{"upvote_count":"3","timestamp":"1658032140.0","poster":"Dileep75","content":"the answer is \nRun az role assignment\ncreate yaml file\nkubectl apply\npls read the link provided in examtopic answer","comment_id":"632455"},{"poster":"Eltooth","content":"Steps from MS Docs: https://docs.microsoft.com/en-us/azure/aks/azure-ad-rbac\n1. az ad group create \n2. az role assignment create command.\n3. (az ad user create & az ad group member add) - optional\n4. kubectl create\n5. kubectl apply -f *.yaml\n\nSo answer is:\n1. Run az role assignment create\n2. Create YAML file\n3. Run kubectl apply","timestamp":"1653313260.0","upvote_count":"16","comment_id":"606125"},{"comment_id":"581208","timestamp":"1649158380.0","comments":[{"upvote_count":"1","timestamp":"1649158980.0","comment_id":"581214","content":"Sorry this is an old article, the connector works with helm2 . Use enable-addons instead\nhttps://stackoverflow.com/questions/59968396/az-aks-install-connector-fails-name-uknow-parameter","poster":"prashantjoge"}],"content":"Helm init\nRole assignment\ninstall-connector \nhttps://www.danielstechblog.io/deploying-kubernetes-aci-connector-aks-managed-kubernetes-azure/","poster":"prashantjoge","upvote_count":"1"},{"upvote_count":"12","content":"there two concepts for integrating with ACI in aks, virtual nodes vs virtual kubelet\nfor virtual kubelet - az aks install-connect\nfor setting up virtual nodes - I believe this what the question asks about\n1) create service principle, role assignment\n2) edit yaml\n3) kubectl apply -f yaml\n\nit's nothing to do with helm","timestamp":"1641121920.0","poster":"mountainking","comment_id":"514943"},{"comments":[{"upvote_count":"3","poster":"rdemontis","timestamp":"1647626940.0","comment_id":"570693","content":"I think you are right. because we have to interact with a RBAC enabled AKS to use commands against AKS we need to create a role assgnoment\n\nhttps://docs.microsoft.com/en-us/azure/aks/azure-ad-rbac\n\nnow to use ACI as host environment we need to use Virtual Nodes. So we can create the yaml file with the ACI container deployment and apply it.\n\nhttps://docs.microsoft.com/en-us/azure/aks/virtual-nodes-portal"},{"poster":"prashantjoge","comment_id":"579587","timestamp":"1648828680.0","content":"This is the correct answer. has nothing to do with helm","upvote_count":"2"}],"timestamp":"1640175600.0","content":"The question is about AKS with RBAC. So the correct answer is\na) az role assignment create\nb) YAML file\nc) kubectl apply\nReference: https://docs.microsoft.com/en-us/azure/aks/azure-ad-rbac","upvote_count":"13","poster":"ixl2pass","comment_id":"507063"},{"timestamp":"1629697200.0","content":"Based on my research this is correct also some answers point to same.\n1. run az role assignment\n2. Create YAML\n3. Run Kubectl apply\n\nRefer this https://cloud.netapp.com/blog/azure-cvo-blg-azure-kubernetes-service-tutorial-integrate-aks-with-aci","comment_id":"429685","poster":"sdhfhsdorr","comments":[{"timestamp":"1638203820.0","content":"Am not sure about that i will go with role assignment, yaml, kubectl apply.","upvote_count":"3","comment_id":"490032","poster":"[Removed]"}],"upvote_count":"6"},{"comment_id":"389414","content":"First you can use the kubectl create command to create the Kubernetes cluster\nNext you need to use the helm init command to start working with Helm\nNext you can install the chart with the help of helm install command","timestamp":"1624528860.0","poster":"erico","upvote_count":"1"},{"content":"Correct answer :\nRun az aks install-connector \nCreate a YAML file \nRun kubectl apply","comment_id":"309068","upvote_count":"3","poster":"imranblr","timestamp":"1615573680.0"},{"poster":"skySand","timestamp":"1613646420.0","upvote_count":"1","comments":[{"timestamp":"1621319400.0","poster":"Albelev","upvote_count":"3","comment_id":"360155","content":"for me \n1. run az role assignment\n2. Create YAML\n3. Run Kubectl apply"}],"content":"Create YAML\nRun kubectl\naz role assignment \nshould be the sequence..\nthere is nothing to do with the helm\nthere is nothing to do with the install-connector","comment_id":"293292"},{"upvote_count":"7","comment_id":"211981","content":"This question is probably outdated. The current way to connect ACS and AKS is using virtual nodes (https://docs.microsoft.com/en-us/azure/aks/virtual-nodes-cli), so the connector is not installed with \"az aks install-connector\" but with \"az aks enable-addons --addons virtual-node\". Helm/Tiller are not required.","comments":[{"comment_id":"276409","poster":"TateBytes","upvote_count":"4","content":"Agree, this is the most convincing.","timestamp":"1611618060.0"},{"timestamp":"1611909360.0","upvote_count":"11","poster":"boldarev","content":"according this docu the answer should be \n1 role assignment\n2 YAML\n3 apply","comment_id":"279181"}],"poster":"sugarbubbles","timestamp":"1604412240.0"},{"comment_id":"176931","timestamp":"1599717900.0","content":"https://docs.microsoft.com/en-us/azure/aks/windows-container-cli#run-the-application\n\nFirst 2 steps seems to be correct as in answer here. Which one is the third?","poster":"CristianN","upvote_count":"1"},{"comment_id":"173330","timestamp":"1599217680.0","upvote_count":"7","poster":"quokka","content":"There are ways to use helm, but the following MS docs specifically referred to 3 of the actions:\n1. az role assignment create\n2. create a YAML file\n3. kubectl apply\n\nUsing virtual node in AKS to burst scaling with ACI \nhttps://docs.microsoft.com/en-us/azure/aks/concepts-scale#burst-to-azure-container-instances\n\nConfig AKS to use virtual nodes\nhttps://docs.microsoft.com/en-us/azure/aks/virtual-nodes-cli#connect-to-the-cluster"},{"poster":"rrongcheng","upvote_count":"3","comments":[{"upvote_count":"2","timestamp":"1594107720.0","poster":"msalvatori","comment_id":"128715","content":"If you edit the YAML file but don't run the apply command there will be no changes at all..."}],"timestamp":"1594004280.0","comment_id":"127384","content":"By this example: https://docs.microsoft.com/en-us/samples/azure-samples/virtual-kubelet-aci-burst/bursting-from-aks-to-aci-with-the-virtual-kubelet/\nThe answer could be:\n1. helm init - Make sure you have helm installed and initialize this.\n2. Yaml - Edit the values.yaml file and replace all <host name>\n3. az aks install-connector - The connector has been deployed and you can see that the ACI Connector is a new node in your cluster."},{"poster":"goku02","comment_id":"108368","content":"Correct answer is : Create YML , run kubectl apply and run az rolw assignment.\ncheck it here : https://anthonychu.ca/post/windows-containers-aci-connector-kubernetes/","timestamp":"1591937880.0","upvote_count":"4","comments":[{"poster":"boldarev","timestamp":"1611909300.0","content":"role assignment is the first step","comment_id":"279180","comments":[{"comment_id":"280519","timestamp":"1612094760.0","content":"but in fact, this blog was published in 2017, it uses a connector in a container. \nit's possible that az aks install-connector was not available at this time","upvote_count":"1","poster":"boldarev"}],"upvote_count":"2"}]},{"upvote_count":"2","comment_id":"104447","comments":[{"content":"1- helm init\n2- assign role: have to create a dedicated Azure AD service principal for the ACI connector and assign the Contributor role permissions on the resource group of the AKS instance (https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal#create-an-azure-active-directory-application)\n3- az aks install-connector","timestamp":"1592204640.0","upvote_count":"3","poster":"chaudh","comment_id":"110622"}],"timestamp":"1591526220.0","content":"Very good example here: https://docs.microsoft.com/en-us/samples/azure-samples/virtual-kubelet-aci-burst/bursting-from-aks-to-aci-with-the-virtual-kubelet/\nAccording to the example, two fo the steps must be:\n- helm init\n- az aks install-connector\nBut which step is the third one?","poster":"ttm_19"},{"comments":[{"timestamp":"1589427000.0","content":"Reason RBAC enabled","comment_id":"88665","poster":"AS007","upvote_count":"1"}],"comment_id":"88664","content":"YAML File\nKubectl\nassign role","timestamp":"1589426940.0","poster":"AS007","upvote_count":"4"},{"comment_id":"74468","content":"if it was 4 squences, we can just add \"Az akc install-connector\" but since it's 3, \n- kubectl apply \n- helm init \n- az aks install-connector","poster":"silverdeath","upvote_count":"8","timestamp":"1586864520.0"},{"comment_id":"71398","poster":"cavemanc82","timestamp":"1586085720.0","upvote_count":"1","content":"doesn't seem to mention helm on here? https://anthonychu.ca/post/windows-containers-aci-connector-kubernetes .. 1. install connector, 2, create yaml, 3 kubectl create ?"},{"content":"With helm v3:\n1. Install helm\n2. helm install aci-connector https://github.com/virtual-kubelet/virtual-kubelet/raw/master/charts/virtual-kubelet-for-aks-latest.tgz","upvote_count":"4","comment_id":"66272","timestamp":"1584712260.0","poster":"TosO"},{"upvote_count":"1","content":"we need to use install-connector","timestamp":"1583849580.0","poster":"Vkv","comment_id":"61730"}],"timestamp":"2020-03-10 15:13:00","answers_community":[],"isMC":false,"exam_id":55,"question_id":170,"answer_ET":"","url":"https://www.examtopics.com/discussions/microsoft/view/16111-exam-az-400-topic-4-question-36-discussion/"}],"exam":{"isMCOnly":false,"name":"AZ-400","isBeta":false,"id":55,"isImplemented":true,"provider":"Microsoft","numberOfQuestions":558,"lastUpdated":"12 Apr 2025"},"currentPage":34},"__N_SSP":true}