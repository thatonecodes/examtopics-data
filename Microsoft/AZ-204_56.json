{"pageProps":{"questions":[{"id":"2VwV9shYfQUm13sk8evf","question_id":276,"answer":"A","unix_timestamp":1651206360,"choices":{"D":"Service SAS with ad hoc SAS","B":"Account SAS","C":"User Delegation SAS","A":"Service SAS with a stored access policy"},"isMC":true,"answer_ET":"A","timestamp":"2022-04-29 06:26:00","question_text":"You manage a data processing application that receives requests from an Azure Storage queue.\nYou need to manage access to the queue. You have the following requirements:\n✑ Provide other applications access to the Azure queue.\n✑ Ensure that you can revoke access to the queue without having to regenerate the storage account keys.\n✑ Specify access at the queue level and not at the storage account level.\nWhich type of shared access signature (SAS) should you use?","answer_description":"","topic":"4","discussion":[{"comment_id":"594212","timestamp":"1651206360.0","upvote_count":"18","poster":"sghaha","content":"Argee A"},{"poster":"gmishra88","timestamp":"1665057420.0","comment_id":"687742","upvote_count":"16","comments":[{"comment_id":"1306473","timestamp":"1730627580.0","poster":"overhill","upvote_count":"2","content":"LOOOL you are right, that's what we have."}],"content":"User delegation SAS is only for blob storage? These random restrictions that microsoft creates just makes me so happy. It is a maze of that works with this but not if that and only if those cases. Why do they expect human beings to remember these unfortunate mistakes Microsoft makes"},{"timestamp":"1730108520.0","content":"Selected Answer: A\nService SAS with Stored Access Policy: Provides fine-grained control over access to the Azure queue, allows revocation without regenerating storage account keys, and specifies access at the queue level.","comment_id":"1303901","poster":"Vichu_1607","upvote_count":"1"},{"upvote_count":"1","comment_id":"1073441","timestamp":"1700235060.0","content":"Selected Answer: A\nA must be correct","poster":"isabelisabelisabel"},{"comment_id":"764854","upvote_count":"5","poster":"rolling_potato_","timestamp":"1672762200.0","content":"Selected Answer: A\nWas on my exam today (03-01-2023)"},{"comment_id":"763631","comments":[{"upvote_count":"1","timestamp":"1678057260.0","poster":"tzuyichao","comments":[{"timestamp":"1681630260.0","upvote_count":"3","content":"there is not a valid explanation. Question says: Service SAS with ad hoc SAS\nSo it is at service level not account level\nIt is not a valid answer because ad-hoc signature cannot be invalidated. With access policy you can change access policy","comment_id":"871550","poster":"surprise0011"}],"content":"“Specify access at the queue level and not at the storage account level.”","comment_id":"830408"}],"timestamp":"1672653540.0","poster":"rotimislaw","upvote_count":"1","content":"Why D. Service SAS with ad hoc SAS is incorrect?"},{"upvote_count":"2","comment_id":"710528","content":"Selected Answer: A\nA - corrct","poster":"OPT_001122","timestamp":"1667482620.0"},{"timestamp":"1664161440.0","comment_id":"679358","content":"I would go with B. A stored access policy is defined on a resource container.\n\"An account SAS delegates access to resources in one or more of the storage services. All of the operations available via a service or user delegation SAS are also available via an account SAS.\"\n\"Service SAS with stored access policy. A stored access policy is defined on a resource container, which can be a blob container, table, queue, or file share. \"\nfrom: https://learn.microsoft.com/en-us/azure/storage/common/storage-sas-overview","poster":"adrian_g","upvote_count":"1"},{"timestamp":"1663696200.0","poster":"ArturKon","comment_id":"674402","upvote_count":"1","content":"Selected Answer: A\nLooks like queues can only have SAS described in A."}],"url":"https://www.examtopics.com/discussions/microsoft/view/74846-exam-az-204-topic-4-question-44-discussion/","answers_community":["A (100%)"],"answer_images":[],"question_images":[],"exam_id":48},{"id":"ONazcLwUndk5T0cOoy9h","answers_community":[],"topic":"4","answer_images":["https://www.examtopics.com/assets/media/exam-media/04273/0040000001.jpg"],"question_id":277,"answer_description":"Box 1: Shared access signature (SAS) token\nWhen your application design requires shared access signatures for access to Blob storage, use Azure AD credentials to create a user delegation SAS when possible for superior security.\n\nBox 2: Stored access policy -\nStored access policies give you the option to revoke permissions for a service SAS without having to regenerate the storage account keys.\nA shared access signature can take one of the following two forms:\n✑ Service SAS with stored access policy. A stored access policy is defined on a resource container, which can be a blob container, table, queue, or file share.\nThe stored access policy can be used to manage constraints for one or more service shared access signatures. When you associate a service SAS with a stored access policy, the SAS inherits the constraints ג€\" the start time, expiry time, and permissions ג€\" defined for the stored access policy.\n✑ Ad hoc SAS.\nReference:\nhttps://docs.microsoft.com/en-us/azure/storage/common/storage-sas-overview","answer":"","url":"https://www.examtopics.com/discussions/microsoft/view/74816-exam-az-204-topic-4-question-45-discussion/","answer_ET":"","timestamp":"2022-04-29 02:27:00","isMC":false,"question_images":["https://www.examtopics.com/assets/media/exam-media/04273/0039900001.png"],"question_text":"HOTSPOT -\nYou are developing an application to store and retrieve data in Azure Blob storage. The application will be hosted in an on-premises virtual machine (VM). The\nVM is connected to Azure by using a Site-to-Site VPN gateway connection. The application is secured by using Azure Active Directory (Azure AD) credentials.\nThe application must be granted access to the Azure Blob storage account with a start time, expiry time, and read permissions. The Azure Blob storage account access must use the Azure AD credentials of the application to secure data access. Data access must be able to be revoked if the client application security is breached.\nYou need to secure the application access to Azure Blob storage.\nWhich security features should you use? To answer select the appropriate options in the answer area.\nNOTE: Each correct selection is worth one point.\nHot Area:\n//IMG//","exam_id":48,"unix_timestamp":1651192020,"discussion":[{"poster":"coffecold","upvote_count":"29","content":"storage account access keys : similar to a root password for your storage account, not for distrbution\nsystem assigned managed identity : only for use within of services in azure\nSAS token : right answer\n\nStored Access Policy : right answer\nuser assigned managed identity : only for use within of services in azure, this must connect to a server outside\nCORS protectection : Site-to-Site VPN gateway, there is no other domain involved","comment_id":"693854","timestamp":"1665661860.0"},{"content":"The only solution I see is SAS token and User Assigned Managed Identity. \nBecause the application must use AD credentials to access storage, it must use a User Delegation SAS, not a service SAS or account SAS. Therefore it cannot have a stored access policy, those are only for service SAS. So the application must be manually assigned a managed identity, and the SAS must be issued for this identity. This identity can then be revoked later.","timestamp":"1723549680.0","comment_id":"1265132","upvote_count":"1","comments":[{"timestamp":"1735502100.0","poster":"Dan696969","upvote_count":"1","content":"Fed this question to two AI solutions\nBox1: SAS token (one said system assigned identity but majority is saying SAS)\nBox2: Both said stored access policy\n\nif someone has a link i can feed it to my AI.","comment_id":"1333688"}],"poster":"0cc50bf"},{"comment_id":"988374","timestamp":"1692798480.0","upvote_count":"1","comments":[{"poster":"0cc50bf","upvote_count":"1","comment_id":"1265129","content":"No, the VM that hosts the application is on-prem outside of Azure, it cannot have a system managed identity.","timestamp":"1723549320.0"}],"content":"Why not System-Assigned Managed Identity + Stored Access Policy? I think it's also a valid option.","poster":"macobuzi"},{"comment_id":"824389","poster":"vmakharashvili","upvote_count":"2","content":"Correct","timestamp":"1677558960.0"},{"content":"SAS token\nStored Access Policy \n\nThe answer is correct","timestamp":"1671033300.0","comment_id":"745244","poster":"OPT_001122","upvote_count":"1"},{"timestamp":"1662194880.0","upvote_count":"3","content":"The answer is correct since none of the other possible combinations make sense. Even though service level SAS doesnt use Azure AD credentials.","poster":"finnishr","comment_id":"658250","comments":[{"poster":"finnishr","timestamp":"1662460500.0","comment_id":"661097","comments":[{"upvote_count":"2","poster":"ArturKon","content":"\"Data access must be able to be revoked if the client application security is breached.\" - isn't that a clue to use access policy? Typical SAS is not revokable itself.","timestamp":"1663696500.0","comment_id":"674404"}],"upvote_count":"1","content":"Stored Access Policies definitely wont work. I'd pick SAS and CORS."},{"content":"SAS with user-delegation works with AD roles","timestamp":"1665057540.0","comment_id":"687745","poster":"gmishra88","upvote_count":"2"}]},{"content":"in Korean\nhttps://docs.microsoft.com/ko-kr/azure/storage/common/storage-sas-overview","timestamp":"1651206420.0","upvote_count":"1","comment_id":"594213","poster":"sghaha"},{"content":"A user delegation SAS makes sense for the \"Application\" answer, but I don't think any of the provided options for the Azure Storage side work. Stored Access Policies only work with a Service-level SAS, so that wouldn't make sense with a user delegation SAS. Seems like the closest option there would have been something like \"RBAC role assignments\" or \"user delegation keys\", just to spit ball.\nhttps://docs.microsoft.com/en-us/azure/storage/common/storage-sas-overview#user-delegation-sas\nhttps://docs.microsoft.com/en-us/rest/api/storageservices/create-user-delegation-sas#revoke-a-user-delegation-sas","poster":"eazy_breezy_jeezy","upvote_count":"1","timestamp":"1651192020.0","comment_id":"594123"}]},{"id":"S6tDKOS48QhTv4auFjF5","answers_community":["C (100%)"],"question_id":278,"answer_images":[],"answer_description":"","topic":"4","answer":"C","url":"https://www.examtopics.com/discussions/microsoft/view/79724-exam-az-204-topic-4-question-46-discussion/","answer_ET":"C","choices":{"A":"aud","C":"oid","B":"nonce","D":"idp"},"timestamp":"2022-09-03 10:52:00","isMC":true,"question_text":"You are building a web application that uses the Microsoft identity platform for user authentication.\nYou are implementing user identification for the web application.\nYou need to retrieve a claim to uniquely identify a user.\nWhich claim type should you use?","question_images":[],"exam_id":48,"discussion":[{"poster":"serpevi","content":"Got this in 09/22 , went with oid, score 927.","timestamp":"1662877860.0","upvote_count":"12","comment_id":"665869"},{"comment_id":"710533","upvote_count":"7","poster":"OPT_001122","content":"Selected Answer: C\noid - correct","timestamp":"1667483040.0"},{"timestamp":"1730109960.0","content":"Selected Answer: C\noid (Object ID): Provides a unique and immutable identifier for the user within the Azure AD tenant, making it the appropriate claim for user identification.","poster":"Vichu_1607","upvote_count":"1","comment_id":"1303913"},{"comment_id":"1126661","timestamp":"1705667640.0","upvote_count":"1","content":"Selected Answer: C\noid (Object Identifier)\nExplanation: The oid claim is a claim in Microsoft identity platform tokens that represents the immutable, unique identifier of a user or an object in Azure AD. It remains constant across the user’s lifetime in an organization and across all applications.\nhe oid claim is specifically designed to uniquely identify a user and is consistent for a user across different applications and organizations in Azure AD.","poster":"FeriAZ"},{"upvote_count":"1","poster":"Ciupaz","timestamp":"1695712260.0","comment_id":"1017501","content":"The oid claim contains a unique identifier for the user, and it is typically used to uniquely identify users across different sessions and applications"},{"timestamp":"1694778840.0","poster":"unraval","upvote_count":"2","comment_id":"1008424","content":"Determine if the token subject, such as the user (or application itself for an app-only token), is authorized.\nYou can either check for specific sub or oid claims.\n\nhttps://learn.microsoft.com/en-us/azure/active-directory/develop/claims-validation"},{"upvote_count":"4","poster":"devex","content":"Selected Answer: C\nC: oid\n\n\"The immutable identifier for the requestor, which is the verified identity of the user or service principal.\"\n\nReference: https://learn.microsoft.com/en-us/azure/active-directory/develop/access-token-claims-reference#payload-claims","comment_id":"992231","timestamp":"1693229400.0"},{"comment_id":"938105","upvote_count":"1","content":"Got this on 6/28/2023 and passed with 850. Answer is correct.","timestamp":"1688042640.0","poster":"JH81"},{"comment_id":"916053","timestamp":"1686040440.0","poster":"Shashakg","content":"Selected Answer: C\nOid claims will always remain same.","upvote_count":"1"},{"comment_id":"700418","poster":"elequiel","upvote_count":"4","content":"Got it in exam 20/10/2022","timestamp":"1666311720.0"},{"comment_id":"658251","content":"Correct","upvote_count":"4","timestamp":"1662195120.0","poster":"finnishr"}],"unix_timestamp":1662195120},{"id":"HpkMDJV9v8yLP4juZ0Qb","answer_ET":"D","exam_id":48,"question_text":"You are developing an Azure Function that calls external APIs by providing an access token for the API. The access token is stored in a secret named token in an\nAzure Key Vault named mykeyvault.\nYou need to ensure the Azure Function can access to the token. Which value should you store in the Azure Function App configuration?","answers_community":["D (91%)","9%"],"question_images":[],"answer_images":[],"topic":"4","answer":"D","question_id":279,"discussion":[{"timestamp":"1694186400.0","comments":[{"upvote_count":"3","poster":"TonyMel","timestamp":"1711361280.0","comment_id":"849996","content":"correct, in 2023Mar24, score: 904/1000."},{"poster":"KingChuang","upvote_count":"1","timestamp":"1703639520.0","comment_id":"758012","content":"On my exam 2022-12-26.\nChose：Given Answer"}],"content":"Selected Answer: D\nIt's right! D.\nhttps://docs.microsoft.com/en-us/azure/app-service/app-service-key-vault-references?tabs=azure-powershell","poster":"lorenaizzo","comment_id":"663736","upvote_count":"17"},{"comment_id":"944462","poster":"juanckar","upvote_count":"3","timestamp":"1720255620.0","content":"This was on the exam (July 2023). Went with proposed. Scored 917"},{"content":"According to ChatGPT its A:\nOption A is the correct value to store in the Azure Function App configuration.\n\nThe format for referencing a secret stored in an Azure Key Vault is \"KeyVault:{key vault name};Secret:{secret name}\". Therefore, the correct value to store in the Azure Function App configuration to access the token stored in a secret named \"token\" in an Azure Key Vault named \"mykeyvault\" is \"KeyVault:mykeyvault;Secret:token\".\n\nOption B is not a valid format for referencing an Azure Key Vault secret.\n\nOption C is not a valid format for referencing an Azure Key Vault secret. This value appears to be an Azure Key Vault connection string.\n\nOption D is a Key Vault reference expression, which is used in Azure Resource Manager templates to reference a Key Vault secret or certificate. This is not the correct format to store in the Azure Function App configuration.","comment_id":"896357","upvote_count":"2","timestamp":"1715564880.0","comments":[{"comment_id":"1064974","timestamp":"1730995380.0","content":"Also Bard says D as answer.","poster":"Ciupaz","upvote_count":"2"},{"content":"chatgpt changed his mind :), its saying D now","upvote_count":"2","poster":"MikeAWS","timestamp":"1728820560.0","comment_id":"1042631"}],"poster":"DarthVee"},{"poster":"surprise0011","timestamp":"1713253260.0","upvote_count":"2","content":"If you wonder why not A because syntax is incomplete. Should be like: \n@Microsoft.KeyVault(VaultName=myvault;SecretName=mysecret)\nhttps://learn.microsoft.com/en-us/azure/app-service/app-service-key-vault-references?tabs=azure-cli#reference-syntax","comment_id":"871563"},{"poster":"TheExamMaster2020","timestamp":"1700056320.0","content":"Did my exam on 15th November 2022. This question was on it.","upvote_count":"3","comment_id":"718788"},{"comment_id":"710543","timestamp":"1699020480.0","content":"Selected Answer: D\nGiven answer is correct","poster":"OPT_001122","upvote_count":"1"},{"poster":"coffecold","content":"Selected Answer: A\nThe Azure Function must be able to access to the token (inside the code)\nAll it needs is a vaultname and a secret name.\n\nvar secretClient = new SecretClient( new Uri(\"https://<VaultName>.vault.azure.net\"),new DefaultAzureCredential());\nvar secret = await secretClient.GetSecretAsync(\"<SecretName>\");\nthe <SecretName> and the <Vaultname> come from your app settings","timestamp":"1697207880.0","upvote_count":"2","comment_id":"693996"},{"upvote_count":"2","comment_id":"693467","poster":"nvtienanh","timestamp":"1697157000.0","content":"Selected Answer: D\nGiven answer is correct"}],"unix_timestamp":1662650400,"answer_description":"","isMC":true,"timestamp":"2022-09-08 17:20:00","url":"https://www.examtopics.com/discussions/microsoft/view/81239-exam-az-204-topic-4-question-47-discussion/","choices":{"B":"App:Settings:Secret:mykeyvault:token","C":"AZUREKVCONNSTR_ https://mykeyveult.vault.ezure.net/secrets/token/","D":"@Microsoft.KeyVault(SecretUri=https://mykeyvault.vault.azure.net/secrets/token/)","A":"KeyVault:mykeyvault;Secret:token"}},{"id":"e1u9jVKSwYKMM7dKPU8z","url":"https://www.examtopics.com/discussions/microsoft/view/79890-exam-az-204-topic-4-question-48-discussion/","question_text":"A company maintains multiple web and mobile applications. Each application uses custom in-house identity providers as well as social identity providers.\nYou need to implement single sign-on (SSO) for all the applications.\nWhat should you do?","isMC":true,"topic":"4","question_id":280,"answer_images":[],"unix_timestamp":1662230940,"answer_ET":"A","answer_description":"","exam_id":48,"question_images":[],"answers_community":["A (78%)","C (22%)"],"answer":"A","timestamp":"2022-09-03 20:49:00","discussion":[{"content":"The provided answer is wrong!\nBased on this article: https://docs.microsoft.com/en-us/azure/active-directory/external-identities/external-collaboration-settings-configure\nExternal collaboration settings let you specify what roles in your organization can invite external users for B2B collaboration. These settings also include options for allowing or blocking specific domains, and options for restricting what external guest users can see in your Azure AD directory. \nSo, you use B2B external collaboration to invite guests into your Azure AD tenant.\n\nI vote for Custom Policies. Both Custom Policies and User Flows support external identity providers, but because of required custom in-house providers support, I'd choose Custom Policies over the User Flows - see https://docs.microsoft.com/en-us/azure/active-directory-b2c/user-flow-overview#comparing-user-flows-and-custom-policies","timestamp":"1662720060.0","comments":[{"comment_id":"1306477","timestamp":"1730628900.0","upvote_count":"1","poster":"overhill","content":"weird take"},{"poster":"ThierryAhn","comment_id":"1252658","content":"Stop exact copying answers from other platforms","timestamp":"1721588640.0","upvote_count":"2"}],"upvote_count":"16","poster":"tcybu","comment_id":"664426"},{"upvote_count":"5","content":"A\nhttps://docs.microsoft.com/en-us/azure/active-directory-b2c/custom-policy-reference-sso","timestamp":"1662230940.0","comment_id":"658750","poster":"jeanfmc"},{"comment_id":"1165520","content":"Selected Answer: A\nAzure AD B2C is designed specifically for customer-facing applications where you need to support a variety of identity providers, including social identities (like Facebook, Google, etc.) and custom (or in-house) identity providers. Custom policies (also known as Identity Experience Framework policies) in Azure AD B2C allow for deep customization of the authentication experience, enabling complex scenarios including integrating with various identity providers, custom user attributes, and multifactor authentication flows. This option provides the flexibility needed to implement SSO while accommodating the diverse identity requirements described.","timestamp":"1709550060.0","upvote_count":"2","poster":"ShoaibAnwar"},{"poster":"Ciupaz","content":"Selected Answer: A\nThe best solution for implementing SSO for multiple web and mobile applications with a variety of identity providers is to use Azure AD B2C with custom policies.","timestamp":"1699346760.0","upvote_count":"1","comment_id":"1064643"},{"content":"A is correct","upvote_count":"3","timestamp":"1680509340.0","poster":"adilkhan","comment_id":"859668"},{"upvote_count":"3","comment_id":"845769","comments":[{"poster":"0cc50bf","content":"It says in-house. That means it's all in the company. There's no other businesses here.","timestamp":"1723550640.0","comment_id":"1265138","upvote_count":"1"}],"timestamp":"1679393520.0","poster":"JOSEEVILLASMIL","content":"Given answer is correct, remember that the question says \"company maintains many aplications\" and \"those aplication have their own in house login providers\" so there is a bussiness with other bussiness, is B2B, no B2C.\n\nAnd B2B with external colaboration says:\n\"You can also enable self-service sign-up user flows to let external users sign up for apps or resources themselves.\"\n\nhttps://learn.microsoft.com/en-us/azure/active-directory/external-identities/what-is-b2b"},{"timestamp":"1674695520.0","content":"Should be A A company maintains multiple web and mobile applications. Each application uses custom in-house identity providers as well as social identity providers.","poster":"adilkhan","upvote_count":"2","comment_id":"788258"},{"content":"Selected Answer: C\n\"C. Use Azure Active Directory B2C (Azure AD B2C) with user flows.\"\n\nAzure AD B2C is a cloud-based identity management service that enables you to customize and control how users sign up, sign in, and manage their profiles when interacting with your applications. With Azure AD B2C, you can create user flows that define the steps in the authentication and authorization process for your applications, and you can use these user flows to enable SSO across your applications.\n\nUser flows allow you to customize the authentication experience for your users, including specifying the identity providers that you want to use, such as custom in-house identity providers or social identity providers. You can also customize the user interface, branding, and policies that apply to each user flow.\n\nReferences: https://learn.microsoft.com/en-us/azure/active-directory-b2c/user-flow-overview","poster":"mitu7","comment_id":"760900","upvote_count":"4","comments":[{"comment_id":"786281","timestamp":"1674546660.0","poster":"guchao2000","content":"It's A\nThe message is \"... uses custom in-house identity providers\", this requires Azure AD B2C with custom policies.","upvote_count":"2"}],"timestamp":"1672310820.0"},{"poster":"Yumi21","comment_id":"711000","upvote_count":"1","timestamp":"1667551140.0","content":"For Azure AD B2C check this: https://learn.microsoft.com/en-us/azure/active-directory-b2c/overview"},{"timestamp":"1667484540.0","content":"Selected Answer: A\nA - correct answer","comment_id":"710544","upvote_count":"4","poster":"OPT_001122"},{"content":"Selected Answer: A\nA for sure","upvote_count":"4","poster":"RochaG2","timestamp":"1665434640.0","comment_id":"691501"},{"upvote_count":"3","content":"Selected Answer: A\nA is correct 100%","timestamp":"1662495480.0","poster":"finnishr","comment_id":"661627"},{"timestamp":"1662453960.0","upvote_count":"1","poster":"Knightie","content":"The Answer seems Correct. B2C seems for external totally, so no mention of the existing AAD authetication to the app.\nhttps://docs.microsoft.com/en-us/azure/active-directory/external-identities/external-identities-overview?bc=%2Fazure%2Factive-directory-b2c%2Fbread%2Ftoc.json&toc=%2Fazure%2Factive-directory-b2c%2FTOC.json","comment_id":"661014"}],"choices":{"B":"Use Azure Active Directory B2B (Azure AD B2B) and enable external collaboration.","D":"Use Azure Active Directory B2B (Azure AD B2B).","C":"Use Azure Active Directory B2C (Azure AD B2C) with user flows.","A":"Use Azure Active Directory B2C (Azure AD B2C) with custom policies."}}],"exam":{"numberOfQuestions":452,"lastUpdated":"12 Apr 2025","name":"AZ-204","isImplemented":true,"provider":"Microsoft","isBeta":false,"id":48,"isMCOnly":false},"currentPage":56},"__N_SSP":true}