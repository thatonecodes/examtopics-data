{"pageProps":{"questions":[{"id":"HKyvsJjw0WqpbOId9Uf9","question_images":[],"question_id":516,"isMC":true,"topic":"1","unix_timestamp":1673771220,"answers_community":["BC (79%)","AC (21%)"],"answer_ET":"BC","answer_description":"","question_text":"A company has an application that runs on Amazon EC2 instances. A solutions architect is designing VPC infrastructure in an AWS Region where the application needs to access an Amazon Aurora DB Cluster. The EC2 instances are all associated with the same security group. The DB cluster is associated with its own security group.\n\nThe solutions architect needs to add rules to the security groups to provide the application with least privilege access to the DB Cluster.\n\nWhich combination of steps will meet these requirements? (Choose two.)","choices":{"C":"Add an inbound rule to the DB cluster's security group. Specify the EC2 instances' security group as the source over the default Aurora port.","A":"Add an inbound rule to the EC2 instances' security group. Specify the DB cluster's security group as the source over the default Aurora port.","E":"Add an outbound rule to the DB cluster's security group. Specify the EC2 instances' security group as the destination over the ephemeral ports.","D":"Add an outbound rule to the DB cluster's security group. Specify the EC2 instances' security group as the destination over the default Aurora port.","B":"Add an outbound rule to the EC2 instances' security group. Specify the DB cluster's security group as the destination over the default Aurora port."},"answer":"BC","answer_images":[],"discussion":[{"timestamp":"1673771220.0","content":"Selected Answer: BC\nThe correct combination of steps to meet these requirements is B and C.\n\nB. Add an outbound rule to the EC2 instances' security group. Specify the DB cluster's security group as the destination over the default Aurora port. This allows the instances to make outbound connections to the DB cluster on the default Aurora port.\n\nC. Add an inbound rule to the DB cluster's security group. Specify the EC2 instances' security group as the source over the default Aurora port. This allows connections to the DB cluster from the EC2 instances on the default Aurora port.","comments":[{"comment_id":"776267","poster":"masetromain","upvote_count":"3","comments":[{"comment_id":"1011454","upvote_count":"3","poster":"vjp_training","content":"Security group is stateful. So you just need to set up inbound","timestamp":"1695135960.0"}],"timestamp":"1673771220.0","content":"A. Adding an inbound rule to the EC2 instances' security group would allow incoming connections to the instances on the default Aurora port, but it would not allow the instances to connect to the DB cluster.\n\nD. Adding an outbound rule to the DB cluster's security group would allow the DB cluster to make outbound connections to the EC2 instances on the default Aurora port, but it would not allow connections to the DB cluster from the instances.\n\nE. Adding an outbound rule to the DB cluster's security group specifying the EC2 instances' security group as the destination over the ephemeral ports would allow the DB cluster to make outbound connections to the instances on ephemeral ports, but it would not allow connections to the DB cluster from the instances on the default Aurora port."},{"content":"why we should add an outbound rule to the EC2 instances' security group??? it is already allowed by default in the EC2 security group becauce all outbound ports are allowed by default.","comments":[{"poster":"jainparag1","upvote_count":"1","content":"wow..then in that case your EC2 instance can talk to anything. No SG rule is required. You need to establish a connectivity route first.","comment_id":"1079821","timestamp":"1700899260.0"},{"upvote_count":"2","timestamp":"1705507020.0","comment_id":"1125102","poster":"ninomfr64","content":"it is the other way around, all connection are denied and you can only allow connection. You need outbound from EC2 to Aurora to allow the app initiate a connection to the database instance"}],"poster":"HussamShokr","upvote_count":"3","comment_id":"928699","timestamp":"1687286580.0"}],"comment_id":"776264","poster":"masetromain","upvote_count":"32"},{"upvote_count":"12","content":"Selected Answer: AC\nTo provide the application with least privilege access to the Aurora DB cluster, the solutions architect should add inbound rules to both the security groups.\n\nFor the EC2 instances' security group, an inbound rule should be added that allows traffic from the DB cluster's security group over the default Aurora port. This will allow the EC2 instances to communicate with the Aurora DB cluster.\n\nFor the Aurora DB cluster's security group, an inbound rule should be added that allows traffic from the EC2 instances' security group over the default Aurora port. This will allow the Aurora DB cluster to communicate with the EC2 instances.\n\nBy default all outbound rules are open, it's only the ingress that needs to allow traffic.","timestamp":"1676530080.0","comment_id":"810331","poster":"c73bf38","comments":[{"comments":[{"timestamp":"1677110040.0","poster":"c73bf38","comment_id":"818556","upvote_count":"3","content":"To provide the application with least privilege access to the Amazon Aurora DB Cluster, the solutions architect should take the following steps:\n\nAdd an inbound rule to the DB cluster's security group. Specify the EC2 instances' security group as the source over the default Aurora port (port 3306). This will allow the EC2 instances to connect to the Aurora DB Cluster.\n\nAdd an outbound rule to the EC2 instances' security group. Specify the DB cluster's security group as the destination over the default Aurora port (port 3306). This will allow the EC2 instances to send traffic to the Aurora DB Cluster."}],"upvote_count":"7","poster":"c73bf38","comment_id":"817384","content":"B&C after doing a recreate in the AWS Console, stand corrected.","timestamp":"1677032100.0"}]},{"comment_id":"1309299","timestamp":"1731209400.0","poster":"penguins2","content":"BC. The steps are clearly stated here: https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/tutorial-ec2-rds-option3.html#option3-task3-connect-rds-database-to-ec2-instance","upvote_count":"1"},{"upvote_count":"1","timestamp":"1728452280.0","content":"Selected Answer: BC\nNB. The DB cluster doesn't need to initiate connections to the EC2 instances.","poster":"nimbus_00","comment_id":"1294974"},{"poster":"gofavad926","upvote_count":"2","timestamp":"1710681480.0","comment_id":"1175843","content":"Selected Answer: BC\nBC, ec2 -> bd; ec2 outbound rule to allow access to bd; db inbound rule to allow access from ec2"},{"poster":"igor12ghsj577","upvote_count":"3","comment_id":"1139504","content":"Selected Answer: BC\nTricky question. They say with least privileges, so I think they don't want to use default (allow-all) rule, but limit as much as possible and allow only specific traffic to DB)\n\n\"By default, a security group includes an outbound rule that allows all outbound traffic. We recommend that you remove this default rule and add outbound rules that allow specific outbound traffic only.\"\n\nhttps://docs.aws.amazon.com/quicksight/latest/user/vpc-security-groups.html","timestamp":"1706984160.0"},{"timestamp":"1705597920.0","content":"CE\n- A and B are nonsense, since they talk about aurora port on ec2 SGs. In SG you always put rules on the local ports.\n- C obvious\n- E over D, always ephemeral on outbound, but at the condition we replace the existing all open rule","upvote_count":"1","comment_id":"1126072","poster":"cox1960"},{"comment_id":"1112989","upvote_count":"3","timestamp":"1704304080.0","content":"Selected Answer: BC\nI believe that C is enough, we don't need to define the outbound from EC2 to DB, but since we have to choose two, the only other option that is correct is B. And someone say below that have tested this configuration, so I hope he tested defining only what is mentioned in C, to see if it is enough or not. It would be nice.","poster":"jpa8300"},{"comment_id":"1088033","poster":"shaaam80","content":"Selected Answer: BC\nAnswer - B& C\nOutbound rule to the EC2 SG with DB SG as destination \nInbound rule to the DB SG with EC2 SG as source","timestamp":"1701728280.0","upvote_count":"1"},{"comment_id":"1083915","content":"Selected Answer: AC\nSecurity Groups are stateful, that means you don't need to specify an outbound rule if you have an inbound rule that permit access to the resource. https://docs.aws.amazon.com/vpc/latest/userguide/vpc-security-groups.html#security-group-basics \n\nIn other hand, the outbound traffic rules typically don't apply to DB clusters. Outbound traffic rules apply only if the DB cluster acts as a client. https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Overview.RDSSecurityGroups.html#Overview.RDSSecurityGroups.VPCSec.\n\nBecause of that B, D and E are wrong answers","timestamp":"1701309720.0","upvote_count":"1","poster":"eurriola10"},{"timestamp":"1693911420.0","comment_id":"999393","content":"Selected Answer: AC\nBy default, AWS Security Groups allow all outbound traffic. Therefore, in most cases, there's no need to configure outbound rules unless you have specific security requirements.\n\nAdd an inbound rule to the EC2 instance's security group, setting the DB cluster's security group as the source over Aurora's default port. This enables interaction between the DB Cluster and the EC2 instances. Corresponds to Option A.\n\nAdd an inbound rule to the DB Cluster's security group, setting the EC2 instance's security group as the source over Aurora's default port. This allows the EC2 instances to interact with the DB Cluster. Corresponds to Option C.","comments":[{"content":"By the way, the outbound rules are unnecessary in this case because the database cluster does not need to access any data from the application. The database cluster only needs to receive traffic from the application so that the application can read and write to the database.","poster":"uC6rW1aB","upvote_count":"1","timestamp":"1693911960.0","comment_id":"999401"},{"poster":"eurriola10","upvote_count":"1","timestamp":"1701309600.0","comment_id":"1083912","content":"my two cents.\nAgree AC are the correct answer. \nSecurity Groups are stateful, that means you don't need to specify an outbound rule if you have an inbound rule that permit access to the resource. https://docs.aws.amazon.com/vpc/latest/userguide/vpc-security-groups.html#security-group-basics\nIn other hand, the outbound traffic rules typically don't apply to DB clusters. Outbound traffic rules apply only if the DB cluster acts as a client. https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Overview.RDSSecurityGroups.html#Overview.RDSSecurityGroups.VPCSec"}],"poster":"uC6rW1aB","upvote_count":"2"},{"poster":"vjp_training","timestamp":"1692803760.0","content":"Selected Answer: AC\nBy default, all outbound rules are allow","upvote_count":"1","comment_id":"988431","comments":[{"timestamp":"1693534320.0","upvote_count":"1","poster":"vn_thanhtung","comments":[{"timestamp":"1700899560.0","content":"you are providing the wrong answer. The correct answer is AC. Inbound rules are supposed to be added.","comment_id":"1079825","upvote_count":"1","poster":"jainparag1"}],"comment_id":"995598","content":"Don't provide wrong answer. Answer is B,C"},{"poster":"vn_thanhtung","timestamp":"1693534260.0","comment_id":"995597","upvote_count":"1","content":"The solutions architect needs to add rules to the security groups to provide the application with least privilege access to the DB Cluster."}]},{"upvote_count":"2","comment_id":"941231","poster":"NikkyDicky","content":"Selected Answer: BC\nBC of course","comments":[{"poster":"jainparag1","comment_id":"1079826","timestamp":"1700899620.0","content":"AC is correct.","upvote_count":"1"}],"timestamp":"1688331180.0"},{"comment_id":"927438","poster":"bcx","timestamp":"1687176300.0","content":"Selected Answer: BC\nIt is outbound from the clients to the db server listening port. And inbound to the db server listening ports from the clients.","upvote_count":"2"},{"timestamp":"1685536320.0","comment_id":"911240","poster":"Jonalb","content":"Selected Answer: BC\n\"My choice relays on the fact that the security groups are stateful, so we only need to allow the outbound traffic for the ec2 instances to pass and the return will also be allowed. Same for the RDS. This combination is also based on the standard traffic flow initiated from instance to DB\"","upvote_count":"1"},{"comment_id":"881942","poster":"Maria2023","upvote_count":"3","timestamp":"1682534700.0","content":"Selected Answer: BC\nMy choice relays on the fact that the security groups are stateful, so we only need to allow the outbound traffic for the ec2 instances to pass and the return will also be allowed. Same for the RDS. This combination is also based on the standard traffic flow initiated from instance to DB."},{"poster":"mfsec","upvote_count":"2","comment_id":"851002","content":"Selected Answer: BC\nBC gets my vote","timestamp":"1679834160.0"},{"timestamp":"1679106960.0","upvote_count":"3","content":"Selected Answer: BC\nLook at the traffic - from the instances EC2 -> DB Cluster I need to go to it as the destination and port (outbound, nothing more or less); so that DB responses needs to see my Security group (since they are shared) coming inbound on that port; any other port deny. \n\nhttps://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/working-with-security-groups.html","comment_id":"842430","poster":"zejou1"},{"comments":[{"content":"That is a really good point, keep in mind that is when you create a security group using the GUI/Console when you use API the SG outbound does not have that allow-all. But again this is not part of the question. If we add that outbound rule, should we need to add others like DNS???","upvote_count":"1","comment_id":"826221","timestamp":"1677699540.0","poster":"Sarutobi"},{"timestamp":"1679107500.0","comment_id":"842432","upvote_count":"3","content":"\"You can delete these rules...\"\nPractice Security Best Practices - although default why are you leaving all outbound traffic open?\n\nBesides, to go w/ least privilege access would delete the outbound all rule and only allow outbound to DB cluster.","poster":"zejou1"}],"upvote_count":"6","comment_id":"822262","poster":"Gabehcoud","timestamp":"1677408360.0","content":"https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/security-group-rules.html\nBy default, security groups contain outbound rules that allow all outbound traffic. So why do we even need a outbound rule? Guys common. lets not confuse each other."},{"comment_id":"795322","timestamp":"1675270020.0","content":"Selected Answer: BC\nFlow connection: EC2 -> DB\nSo you need to configure Outbound EC2 and Inbound DB","upvote_count":"4","poster":"tatdatpham"},{"upvote_count":"2","comment_id":"793384","timestamp":"1675114620.0","content":"Selected Answer: BC\nseems logic\noutbound EC2 and inbound to DB","poster":"zozza2023"}],"timestamp":"2023-01-15 09:27:00","exam_id":33,"url":"https://www.examtopics.com/discussions/amazon/view/95381-exam-aws-certified-solutions-architect-professional-sap-c02/"},{"id":"qyavI1ZJYmAHKIpTRoqj","question_images":[],"choices":{"A":"Configure AWS Budgets in each account and configure budget alerts that are grouped by application, environment, and owner. Add each business unit to an Amazon SNS topic for each alert. Use Cost Explorer in each account to create monthly reports for each business unit.","C":"Configure AWS Budgets in each account and configure budget alerts that are grouped by application, environment, and owner. Add each business unit to an Amazon SNS topic for each alert. Use the AWS Billing and Cost Management dashboard in each account to create monthly reports for each business unit.","B":"Configure AWS Budgets in the organization's management account and configure budget alerts that are grouped by application, environment, and owner. Add each business unit to an Amazon SNS topic for each alert. Use Cost Explorer in the organization's management account to create monthly reports for each business unit.","D":"Enable AWS Cost and Usage Reports in the organization's management account and configure reports grouped by application, environment. and owner. Create an AWS Lambda function that processes AWS Cost and Usage Reports, sends budget alerts, and sends monthly reports to each business unit's email list."},"answer_ET":"B","question_id":517,"topic":"1","url":"https://www.examtopics.com/discussions/amazon/view/95382-exam-aws-certified-solutions-architect-professional-sap-c02/","unix_timestamp":1673771520,"answer_images":[],"isMC":true,"answer_description":"","timestamp":"2023-01-15 09:32:00","answers_community":["B (100%)"],"exam_id":33,"discussion":[{"timestamp":"1705307520.0","content":"Selected Answer: B\nB. Configure AWS Budgets in the organization's management account and configure budget alerts that are grouped by application, environment, and owner. Add each business unit to an Amazon SNS topic for each alert. Use Cost Explorer in the organization's management account to create monthly reports for each business unit.\n\nThis option is the most cost-effective because it utilizes the organization's management account to set budgets and configure alerts for all accounts in the organization, rather than having to configure budgets and alerts individually in each account. Additionally, using Cost Explorer in the management account allows the cloud governance team to view the consolidated spending for all accounts in the organization and create reports for each business unit. This eliminates the need to access each individual account to view costs and create reports.","comment_id":"776270","poster":"masetromain","comments":[{"poster":"masetromain","upvote_count":"5","comment_id":"776271","content":"Option A is not the most cost-effective solution because it requires configuring budgets and reports in multiple accounts, which increases the complexity and cost of managing the cloud spending for each business unit.\n\nOption C is not the most cost-effective solution because it requires the cloud governance team to access the AWS Billing and Cost Management dashboard in each account to create monthly reports for each business unit, which increases the complexity and cost of managing the cloud spending for each business unit.\n\nOption D is not the most cost-effective solution because it requires creating an AWS Lambda function to process AWS Cost and Usage Reports, which increases the complexity and cost of managing the cloud spending for each business unit.","timestamp":"1705307520.0"}],"upvote_count":"24"},{"poster":"NikkyDicky","content":"Selected Answer: B\nB for sure","upvote_count":"1","timestamp":"1719953700.0","comment_id":"941233"},{"timestamp":"1718971620.0","comment_id":"929455","content":"\"configure budget alerts that are grouped by application, environment, and owner\" - I just literally tried to create a budget alert and I am not able to see any option for grouping by tags. Another nonsense question","upvote_count":"2","comments":[{"upvote_count":"1","timestamp":"1723191540.0","content":"Billing > Budgets > Create budget > Customize (advanced) > Budget scope > Filter specific AWS cost dimensions","comment_id":"976370","poster":"b3llman"}],"poster":"Maria2023"},{"comment_id":"926802","timestamp":"1718728440.0","upvote_count":"1","poster":"SkyZeroZx","content":"Selected Answer: B\nkeyword = AWS Budgets in the organization's management\nother more overhead each by account"},{"content":"B\ncentralized solution = management account\nsend notifications for any cloud spending that exceeds a set threshold = AWS Budgets\nhttps://aws.amazon.com/blogs/mt/manage-cost-overruns-part-1/","poster":"yama234","timestamp":"1713310380.0","upvote_count":"4","comment_id":"872220"},{"content":"Selected Answer: B\nB. Configure AWS Budgets in the organization's management account","comment_id":"851003","poster":"mfsec","timestamp":"1711463940.0","upvote_count":"1"}],"answer":"B","question_text":"A company wants to change its internal cloud billing strategy for each of its business units. Currently, the cloud governance team shares reports for overall cloud spending with the head of each business unit. The company uses AWS Organizations to manage the separate AWS accounts for each business unit. The existing tagging standard in Organizations includes the application, environment, and owner. The cloud governance team wants a centralized solution so each business unit receives monthly reports on its cloud spending. The solution should also send notifications for any cloud spending that exceeds a set threshold.\n\nWhich solution is the MOST cost-effective way to meet these requirements?"},{"id":"F3SKd1cwHon3MtExrIEm","isMC":true,"answer_ET":"A","choices":{"D":"Use AWS Config rules to prevent deleting RDS and EBS resources.","B":"Configure a stack policy that disallows the deletion of RDS and EBS resources.","A":"Modify the CloudFormation templates to add a DeletionPolicy attribute to RDS and EBS resources.","C":"Modify IAM policies lo deny deleting RDS and EBS resources that are tagged with an \"aws:cloudformation:stack-name\" tag."},"unix_timestamp":1673771760,"question_images":[],"timestamp":"2023-01-15 09:36:00","discussion":[{"upvote_count":"17","content":"Selected Answer: A\nhttps://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html\nWith the DeletionPolicy attribute you can preserve, and in some cases, backup a resource when its stack is deleted. You specify a DeletionPolicy attribute for each resource that you want to control. If a resource has no DeletionPolicy attribute, AWS CloudFormation deletes the resource by default.\nRetain\nCloudFormation keeps the resource without deleting the resource or its contents when its stack is deleted. You can add this deletion policy to any resource type. When CloudFormation completes the stack deletion, the stack will be in Delete_Complete state; however, resources that are retained continue to exist and continue to incur applicable charges until you delete those resource","timestamp":"1679108220.0","comment_id":"842435","poster":"zejou1"},{"content":"Selected Answer: A\nBy adding the DeletionPolicy attribute to the CloudFormation template for RDS and EBS resources, you can specify actions to be taken when a stack is deleted. Setting the DeletionPolicy to Retain ensures that the RDS and EBS resources are not deleted when the CloudFormation stack is deleted.","poster":"nimbus_00","timestamp":"1728453540.0","upvote_count":"1","comment_id":"1294986"},{"upvote_count":"1","content":"Selected Answer: A\nOption A is the correct approach because CloudFormation allows you to specify a DeletionPolicy attribute for resources within your templates. This attribute can prevent resources like Amazon RDS databases and Amazon EBS volumes from being deleted when the stack is deleted. You can set the DeletionPolicy to “Retain” for specific resources, ensuring they are not automatically removed alongside the stack.","timestamp":"1707855600.0","comment_id":"1149550","poster":"8608f25"},{"content":"Selected Answer: B\nhttps://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html","upvote_count":"1","timestamp":"1703605920.0","poster":"Maygam","comment_id":"1106161"},{"content":"Selected Answer: A\nA, basic DeletionPolicy use case","upvote_count":"2","comment_id":"941234","comments":[{"timestamp":"1693567860.0","content":"Yes but should be supplemented with deletion protection on the database.","comment_id":"995996","poster":"aviathor","upvote_count":"2"}],"timestamp":"1688331600.0","poster":"NikkyDicky"},{"comment_id":"929465","upvote_count":"2","timestamp":"1687349760.0","content":"Selected Answer: A\nAlthough that I would preferably use both A and B - this is an exam and the truth is in the wording - \"important data stored in Amazon RDS databases or Amazon EBS volumes might also be deleted\" - we don't care if the resources are deleted but the data, which makes me believe they want us to set up a deletion policy at a resource level to \"Retain\"","poster":"Maria2023"},{"comments":[{"timestamp":"1716653520.0","upvote_count":"1","content":"> the DeletionPolicy attribute [...] is not applicable to Amazon RDS instances or Amazon EBS volumes.\nThis statement is false. From https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html\nRetain\n[...] You can add this deletion policy to any resource type.\n\nSnapshot\nResources that support snapshots include:\n[...]\n- AWS::EC2::Volume\n[...]\n- AWS::RDS::DBInstance","poster":"fartosh","comment_id":"1218437"},{"content":"The correct answer is A, not because what you say is wrong, but because the question states that the stacks can be deleted, you cannot prevent the deletion of the stack (as required by the question). So the DeletionPolicy will let you delete the stack and retain or take a snapshot of the Database/BUCKET/... (whichever is applicable). You will not lose any data in that case and the stack would have been succesfully deleted.","poster":"bcx","upvote_count":"3","comment_id":"927440","timestamp":"1687176720.0"}],"poster":"zak340","content":"Selected Answer: B\nExplanation:\nStack policies are a powerful feature of AWS CloudFormation that allows you to control fine-grained permissions for resources within a stack. By configuring a stack policy that disallows the deletion of RDS and EBS resources, you can prevent users from accidentally deleting these critical resources and the associated data.\n\nOption A (Modifying CloudFormation templates with DeletionPolicy attribute) is not the best solution in this case. While the DeletionPolicy attribute can be used to control resource behavior during stack deletion, it is not applicable to Amazon RDS instances or Amazon EBS volumes.","timestamp":"1685895000.0","comment_id":"914800","upvote_count":"2"},{"upvote_count":"3","content":"Selected Answer: A\nCheck the differences and use cases where to use a stack policy or add a deletion policy (retain):\nStack policy and deletion policy are both ways to protect resources created by CloudFormation stacks, but they have different functions.\nStack policy is a feature that allows you to specify a JSON policy document that restricts what actions can be taken on a CloudFormation stack. Stack policies are used to prevent accidental or intentional updates or deletions of critical resources in your stack, by specifying which resources can be modified and by whom. Stack policies can be used to allow specific teams or individuals to modify specific resources in a stack while preventing them from modifying others.","comments":[{"upvote_count":"1","content":"Deletion policy, on the other hand, is a property of certain AWS resources that determines what happens to the resource when the stack is deleted. The deletion policy can be set to one of three values: \"Delete\", \"Retain\", or \"Snapshot\". When the deletion policy is set to \"Delete\", the resource is deleted when the stack is deleted. When the deletion policy is set to \"Retain\", the resource is not deleted when the stack is deleted, but must be deleted manually. When the deletion policy is set to \"Snapshot\", the resource is deleted when the stack is deleted, but a snapshot of the resource is retained.\nIn summary, stack policies are used to control what changes can be made to a stack, while deletion policies are used to determine what happens to resources when a stack is deleted.","comment_id":"892622","poster":"rbm2023","timestamp":"1683598440.0"}],"poster":"rbm2023","timestamp":"1683598380.0","comment_id":"892621"},{"upvote_count":"1","timestamp":"1681799040.0","content":"Selected Answer: B\nption B, which suggests configuring a stack policy that disallows the deletion of RDS and EBS resources, is better in this scenario. While using DeletionPolicy attribute (Option A) can be helpful for preserving and backing up the resource, it does not address the problem of accidental deletion of resources or control access to delete the resource.\n\nOn the other hand, a Stack Policy can be used to prevent accidental deletion of resources by specifying which actions can be performed on the resources within in the stack, thereby adding an essential layer of protection.\n\nBy implementing a Stack Policy, a company can limit updating the resources in the stack, control who can make changes to the stack, and prevent accidental deletion of resources. Therefore, configuring a Stack Policy is necessary and more satisfactory to protect data from accidental deletion while using AWS CloudFormation.","comment_id":"873329","poster":"OCHT","comments":[{"content":"You are correct about the process of the UPDATE stack action. What happens to the resources created by the CloudFormation stack when the stack itself is deleted?","timestamp":"1681920000.0","upvote_count":"1","poster":"Sarutobi","comment_id":"874868"}]},{"comment_id":"851006","content":"Selected Answer: A\nA for sure","upvote_count":"2","poster":"mfsec","timestamp":"1679834400.0"},{"poster":"kiran15789","content":"Selected Answer: B\nA stack policy is a document that defines the update and deletion actions that can be performed on resources in a CloudFormation stack. By default, all resources in a CloudFormation stack can be deleted by users with appropriate permissions. However, you can use a stack policy to restrict the deletion of certain resources, such as Amazon RDS databases or Amazon EBS volumes.\n\nIn this case, the company can create a stack policy that explicitly disallows the deletion of any RDS or EBS resources in the production CloudFormation stack. This will prevent users from accidentally deleting important data stored in these resources.","upvote_count":"1","timestamp":"1678312680.0","comment_id":"833396"},{"comment_id":"829621","poster":"God_Is_Love","upvote_count":"1","timestamp":"1677989820.0","content":"Selected Answer: A\nFor RDS instances, you can set the \"DeletionPolicy\" attribute to \"Retain\". This will ensure that when the stack is deleted, the RDS instance will not be deleted and its data will be retained. \n\nFor EBS volumes, you can use the \"DeletionPolicy\" attribute in combination with the \"SnapshotId\" attribute to create a snapshot of the volume before deleting it. This will allow you to restore the data later if need\n\nYaml examples for RDS and EBS :\n\nResources:\n MyDB:\n Type: AWS::RDS::DBInstance\n Properties:\n # RDS instance properties go here\n DeletionPolicy: Retain\n\nResources:\n MyVolume:\n Type: AWS::EC2::Volume\n Properties:\n # Volume properties go here\n DeletionPolicy: Snapshot\n SnapshotId: my-snapshot-id"},{"comment_id":"811253","poster":"spd","upvote_count":"1","timestamp":"1676594160.0","content":"Selected Answer: A\nClear A"},{"poster":"lunt","timestamp":"1676412240.0","upvote_count":"2","comment_id":"808891","content":"Selected Answer: A\nAC1984 do your homework.\nStack policy can protect against deletion but not against actual entire CFN stack template being deleted. DeletionPolicy = if I was to delete the entire CFN stack, the CFN process will delete all elements and skip over RDS and EBS due to protections. 20 second Google search could of confirmed this."},{"upvote_count":"1","content":"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html","poster":"AC1984","comment_id":"808104","timestamp":"1676353140.0"},{"upvote_count":"1","content":"Selected Answer: B\nB. Configure a stack policy that disallows the deletion of RDS and EBS resources.\nA stack policy is a JSON-based document that defines the actions that can be performed on a CloudFormation stack, and can be used to prevent users from accidentally deleting critical resources. By configuring a stack policy that disallows the deletion of RDS and EBS resources, the company can prevent users from accidentally deleting important data stored in those resources.\n\nOption A (adding a DeletionPolicy attribute) does not prevent users from deleting the resources, but rather determines what happens to the resources when the stack is deleted. Option C (modifying IAM policies) is not sufficient because it only affects the permissions of specific users or groups, and does not prevent accidental deletions. Option D (using AWS Config rules) can help detect deletions of RDS and EBS resources, but it does not prevent them from being deleted.","comment_id":"808102","poster":"AC1984","comments":[{"content":"\"Option A (adding a DeletionPolicy attribute) does not prevent users from deleting the resources, but rather determines what happens to the resources when the stack is deleted.\" This is actually what the question is asking !","upvote_count":"1","poster":"sambb","timestamp":"1677831840.0","comment_id":"827767"}],"timestamp":"1676353020.0"},{"comment_id":"805515","content":"Selected Answer: A\nI go for A because I assume that the CF stack is allowed to be deleted in some deployment scenarios.","upvote_count":"1","timestamp":"1676139960.0","poster":"moota"},{"upvote_count":"1","comment_id":"793388","timestamp":"1675115100.0","content":"Selected Answer: A\nOption A","poster":"zozza2023"},{"timestamp":"1674485460.0","poster":"masssa","content":"Selected Answer: A\n\"DeletionPolicy\" : \"Retain\"　can prevent to delete resource","comment_id":"785490","upvote_count":"4"},{"upvote_count":"4","content":"Selected Answer: A\nI switch to A:\nhttps://www.examtopics.com/discussions/amazon/view/5233-exam-aws-certified-solutions-architect-professional-topic-1/\n\nModifying the CloudFormation templates to add a DeletionPolicy attribute to RDS and EBS resources, is another valid solution to prevent accidental deletion of data in this scenario. By adding a DeletionPolicy attribute of \"Retain\" to RDS and EBS resources in the CloudFormation templates, the company can ensure that these resources and their data are not deleted when the CloudFormation stack is deleted. This is a way to prevent accidental deletion of data by preserving the resources when the stack is deleted.","poster":"masetromain","comment_id":"780227","comments":[{"comment_id":"780228","timestamp":"1674060480.0","upvote_count":"1","poster":"masetromain","content":"Option B, Configuring a stack policy that disallows the deletion of RDS and EBS resources, would also prevent accidental deletion of data by RDS and EBS resources, but it does so by controlling access to the resources rather than preserving the resources as Option A does. Stack policies are a way to set up fine-grained access controls for the CloudFormation stack, so it would prevent users who are not authorized to delete RDS and EBS resources from doing so.\n\nOption C, Modifying IAM policies to deny deleting RDS and EBS resources that are tagged with an \"aws:cloudformation:stack-name\" tag, is not a good solution because it only controls who can delete the resources, not whether they are deleted or retained when the stack is deleted.\n\nOption D, Using AWS Config rules to prevent deleting RDS and EBS resources, is also not a good solution because AWS Config only records and monitors the configuration changes, it does not prevent any action on the resources."}],"timestamp":"1674060480.0"},{"upvote_count":"1","poster":"zhangyu20000","content":"A is correct","comment_id":"777146","timestamp":"1673823060.0"},{"poster":"masetromain","content":"Selected Answer: B\nThe correct answer is B. Configuring a stack policy that disallows the deletion of RDS and EBS resources will prevent users from accidentally deleting data stored in these resources when a production CloudFormation stack is deleted.\n\nA. Modifying the CloudFormation templates to add a DeletionPolicy attribute to RDS and EBS resources may prevent data from being deleted, but it does not prevent the stack deletion itself, which is the main concern.\n\nC. Modifying IAM policies to deny deleting RDS and EBS resources that are tagged with an \"aws:cloudformation:stack-name\" tag, would not help to prevent users from accidentally deleting data stored in these resources when a production CloudFormation stack is deleted.\n\nD. Using AWS Config rules to prevent deleting RDS and EBS resources would prevent users from accidentally deleting data stored in these resources when a production CloudFormation stack is deleted, but it does not prevent the stack deletion itself.","comment_id":"776274","comments":[{"poster":"God_Is_Love","upvote_count":"4","timestamp":"1677990000.0","content":"Bro, Question is not concerned about stack deletion, only RDS/EBS data.","comment_id":"829622"}],"timestamp":"1673771760.0","upvote_count":"1"}],"answer_images":[],"question_id":518,"answers_community":["A (86%)","14%"],"exam_id":33,"answer":"A","question_text":"A company is using AWS CloudFormation to deploy its infrastructure. The company is concerned that, if a production CloudFormation stack is deleted, important data stored in Amazon RDS databases or Amazon EBS volumes might also be deleted.\n\nHow can the company prevent users from accidentally deleting data in this way?","answer_description":"","topic":"1","url":"https://www.examtopics.com/discussions/amazon/view/95383-exam-aws-certified-solutions-architect-professional-sap-c02/"},{"id":"wDij6oJifoMyWIgjGFQt","answers_community":["ADF (98%)","2%"],"discussion":[{"content":"Selected Answer: ADF\nI go with ADF\nhttps://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/AutoFailover.html","comment_id":"741159","poster":"masetromain","upvote_count":"16","comments":[{"upvote_count":"11","timestamp":"1727061600.0","comment_id":"774694","content":"A. Using an Elastic Load Balancer (ELB) to distribute traffic across multiple EC2 instances can help ensure that the application remains available in the event that one of the instances becomes unavailable. By configuring the instances as part of an Auto Scaling group with a minimum capacity of two instances, you can ensure that there is always at least one healthy instance to handle traffic.\n\nD. Modifying the DB instance to create a Multi-AZ deployment that extends across two availability zones can help ensure that the database remains available in the event of a failure. In the event of a failure, traffic will automatically be directed to the secondary availability zone, reducing the amount of downtime.\n\nF. Creating a replication group for the ElastiCache for Redis cluster and enabling Multi-AZ can help ensure that the in-memory data store remains available in the event of a failure. This will allow traffic to be automatically directed to the secondary availability zone, reducing the amount of downtime.","poster":"masetromain"},{"timestamp":"1671616680.0","poster":"spencer_sharp","comment_id":"752113","content":"Why C is wrong?","upvote_count":"3","comments":[{"upvote_count":"1","comment_id":"973822","timestamp":"1691325000.0","content":"let suppose in case one of used AZ is failed?","poster":"Karamen"},{"upvote_count":"1","poster":"masetromain","comment_id":"774695","timestamp":"1673629320.0","content":"Other options like B. and C. does not meet the requirement because the instances are configured in unlimited mode, it will not be possible to ensure that there is always at least one healthy instance to handle traffic if there is a failure.","comments":[{"comment_id":"807107","content":"Issue with C - Read replica in the same AZ does not sound High availability","upvote_count":"6","poster":"God_Is_Love","timestamp":"1676268720.0"}]},{"upvote_count":"1","comment_id":"908465","timestamp":"1685266080.0","poster":"dtha1002","content":"in question \"can automatically recover from failure with the least possible downtime\"\nC is correct but D is least possible downtime"}]}],"timestamp":"1670695020.0"},{"comment_id":"1359617","timestamp":"1740110220.0","upvote_count":"1","poster":"teeee123","content":"Selected Answer: ADF\nADF try it"},{"comment_id":"1304868","poster":"TariqKipkemei","upvote_count":"1","timestamp":"1730266500.0","content":"Selected Answer: ADF\nKey words: each piece of the infrastructure must be healthy and must be in an active state, can automatically recover = Auto Scaling group and Multi-AZ deployment"},{"content":"A, D, E are the correct options to meet the requirements.\n\nOption A is correct because an Auto Scaling group with a minimum capacity of two instances and an Elastic Load Balancer distributing traffic across them can provide high availability and automatic recovery from failure.\n\nOption D is correct because a Multi-AZ deployment for the RDS instance will ensure that there is a synchronized standby copy of the database in a separate Availability Zone that can be used for automatic failover.\n\nOption E is correct because configuring an Auto Scaling group for the ElastiCache for Redis cluster will ensure that there is at least one available node at all times, and automatic recovery can be achieved by launching new instances to replace any failed nodes.","comment_id":"827943","timestamp":"1727061660.0","upvote_count":"1","poster":"higashikumi","comments":[{"timestamp":"1705750920.0","poster":"marszalekm","content":"There isn't such a thing like \"Auto Scaling group for the ElastiCache for Redis\", there is a \"Replication Group\"","comment_id":"1127241","upvote_count":"2"}]},{"timestamp":"1727061660.0","upvote_count":"4","poster":"Maja1","content":"Selected Answer: ADF\nI wasn't sure if E or F was correct until I read this:\n\"This replacement results in some downtime for the cluster, but if Multi-AZ is enabled, the downtime is minimized. The role of primary node will automatically fail over to one of the read replicas. There is no need to create and provision a new primary node, because ElastiCache will handle this transparently. This failover and replica promotion ensure that you can resume writing to the new primary as soon as promotion is complete.\"\nhttps://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/AutoFailover.html","comment_id":"880288"},{"poster":"atirado","timestamp":"1727061660.0","upvote_count":"2","comment_id":"1100189","content":"Selected Answer: ADF\nOption A - Ensures there is always at least a healthy instance responding to requests. Nothing is said about whether the Auto Scaling Group includes multiple AZs (but it must)\n\nOption B - No such thing as EC2 Unlimited Mode\n\nOption C - Does not provide a place to fail over to \n\nOption D - Provides a place to fail over to \n\nOption E - Does not provide a place to fail over to \n\nOption F - Provides a place to fail over to\n\n\nChoose A, D, F"},{"upvote_count":"1","poster":"amministrazione","comment_id":"1275436","content":"A. Use an Elastic Load Balancer to distribute traffic across multiple EC2 instances. Ensure that the EC2 instances are part of an Auto Scaling group that has a minimum capacity of two instances.\nD. Modify the DB instance to create a Multi-AZ deployment that extends across two Availability Zones.\nF. Create a replication group for the ElastiCache for Redis cluster. Enable Multi-AZ on the cluster.","timestamp":"1725090480.0"},{"poster":"[Removed]","content":"ElastiCache for Redis Auto Scaling is limited to the following:\n\n Redis (cluster mode enabled) clusters running Redis engine version 6.0 onwards\nE is out","upvote_count":"1","comment_id":"1209773","timestamp":"1715431860.0"},{"timestamp":"1715127960.0","comment_id":"1208101","poster":"joshnort","upvote_count":"1","content":"Selected Answer: ADF\nSatisfies the High Availability requirement on the EC2 instance, Amazon RDS for MariaDB DB instance, and ElastiCache for Redis cluster"},{"upvote_count":"1","comment_id":"1175077","poster":"gofavad926","content":"Selected Answer: ADF\nADF, as mentioned in the other comments","timestamp":"1710604740.0"},{"content":"\"The infrastructure can automatically recover from failure with the least possible downtime\",\nto me this sounds rather resilient than highly-availible, since it focuses on MITR but not explicitly on up-time.","poster":"DmitriKonnovNN","timestamp":"1706715240.0","comment_id":"1136921","upvote_count":"1"},{"timestamp":"1699700340.0","comment_id":"1067778","upvote_count":"1","poster":"severlight","content":"Selected Answer: ADF\nobvious"},{"poster":"ansgohar","content":"Selected Answer: ADF\nA, D, F","timestamp":"1695893700.0","upvote_count":"1","comment_id":"1019672"},{"content":"Selected Answer: ADF\nit's of course ADF","timestamp":"1687817640.0","upvote_count":"1","poster":"NikkyDicky","comment_id":"934825"},{"poster":"Parimal1983","upvote_count":"1","comment_id":"932666","content":"Selected Answer: ADF\nFor high availability, need to spin up instances in another zone with auto scaling and multi AZ options","timestamp":"1687617600.0"},{"comment_id":"904897","poster":"rtguru","upvote_count":"1","timestamp":"1684845480.0","content":"ADF will meet the described provisions"},{"timestamp":"1683911940.0","upvote_count":"1","poster":"RunkieMax","content":"Selected Answer: ADF\nFit the best the question","comment_id":"896093"},{"poster":"dev112233xx","upvote_count":"1","timestamp":"1680034080.0","comment_id":"853657","content":"Selected Answer: ADF\nADF the correct answers ✅"},{"timestamp":"1679978820.0","content":"Selected Answer: ADF\nADF is the best fit.","comment_id":"852780","upvote_count":"1","poster":"mfsec"},{"upvote_count":"1","content":"Selected Answer: ADF\nI believe, This is correct approach https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/AutoFailover.html","comment_id":"836974","poster":"gameoflove","timestamp":"1678622460.0"},{"poster":"vherman","content":"Selected Answer: ADF\nadf correct","timestamp":"1678293960.0","upvote_count":"1","comment_id":"833173"},{"timestamp":"1677941820.0","content":"Selected Answer: ADE\nSelecting E because - \"Multi-AZ is enabled by default on Redis (cluster mode enabled) clusters\" as per https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/AutoFailover.html","upvote_count":"1","comment_id":"829053","poster":"spd"},{"comments":[{"timestamp":"1680419820.0","upvote_count":"2","poster":"frfavoreto","content":"ElastiCache for Redis does support Multi-AZ:\nhttps://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/AutoFailover.html\n\nOption 'F' is correct.","comment_id":"858590"}],"timestamp":"1677846060.0","poster":"higashikumi","comment_id":"827946","upvote_count":"1","content":"Option B is incorrect because unlimited mode is a configuration option for an Auto Scaling group that is used to handle bursty workloads, and it does not provide any additional availability benefits.\n\nOption C is incorrect because creating a read replica in the same Availability Zone does not provide any additional availability benefits, and it would not be able to take over in the event of a failure of the primary instance.\n\nOption F is incorrect because Multi-AZ is not an option for ElastiCache for Redis clusters."},{"comment_id":"827227","upvote_count":"1","poster":"Ajani","content":"https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/AutoScaling.html","timestamp":"1677781740.0"},{"comment_id":"826525","timestamp":"1677736080.0","poster":"gameoflove","upvote_count":"1","content":"Selected Answer: ADF\nhttps://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/AutoFailover.html"},{"comments":[{"upvote_count":"1","timestamp":"1677941580.0","poster":"spd","comment_id":"829050","content":"This does not answer why not E"}],"content":"Why F and Not E ? ElastiCache for Redis natively supports automatic Multi-AZ failover.","timestamp":"1677021660.0","upvote_count":"2","poster":"spd","comment_id":"817278"},{"poster":"Musk","comment_id":"806111","content":"I don't dislike C","upvote_count":"1","timestamp":"1676190780.0"},{"timestamp":"1672150500.0","comment_id":"758600","content":"Selected Answer: ADF\nNo doubt, ADF.\nOption C is wrong. Creating a read replica 'in the same availability zone' makes no sense.","upvote_count":"2","poster":"Untamables"},{"upvote_count":"2","timestamp":"1672059900.0","comment_id":"757432","content":"ADF all of them high availibility","poster":"aimik"},{"upvote_count":"2","timestamp":"1671775260.0","content":"I go with ADF\nHope we have 74 questions like this =))","comment_id":"753899","poster":"ptpho"},{"timestamp":"1671281940.0","content":"Selected Answer: ADF\nI go for correct answer as : ADF options","comment_id":"748058","upvote_count":"2","poster":"Arun_Bala"}],"question_text":"A company is hosting a critical application on a single Amazon EC2 instance. The application uses an Amazon ElastiCache for Redis single-node cluster for an in-memory data store. The application uses an Amazon RDS for MariaDB DB instance for a relational database. For the application to function, each piece of the infrastructure must be healthy and must be in an active state.\nA solutions architect needs to improve the application's architecture so that the infrastructure can automatically recover from failure with the least possible downtime.\nWhich combination of steps will meet these requirements? (Choose three.)","choices":{"B":"Use an Elastic Load Balancer to distribute traffic across multiple EC2 instances. Ensure that the EC2 instances are configured in unlimited mode.","F":"Create a replication group for the ElastiCache for Redis cluster. Enable Multi-AZ on the cluster.","C":"Modify the DB instance to create a read replica in the same Availability Zone. Promote the read replica to be the primary DB instance in failure scenarios.","E":"Create a replication group for the ElastiCache for Redis cluster. Configure the cluster to use an Auto Scaling group that has a minimum capacity of two instances.","D":"Modify the DB instance to create a Multi-AZ deployment that extends across two Availability Zones.","A":"Use an Elastic Load Balancer to distribute traffic across multiple EC2 instances. Ensure that the EC2 instances are part of an Auto Scaling group that has a minimum capacity of two instances."},"topic":"1","answer_images":[],"question_images":[],"unix_timestamp":1670695020,"exam_id":33,"answer_description":"","timestamp":"2022-12-10 18:57:00","answer_ET":"ADF","question_id":519,"isMC":true,"answer":"ADF","url":"https://www.examtopics.com/discussions/amazon/view/90944-exam-aws-certified-solutions-architect-professional-sap-c02/"},{"id":"qulznVBRiWx9BVRRilSV","answer":"B","discussion":[{"poster":"vsk12","content":"I would go with option B. Source will be public IP like 198.51.100.2.","timestamp":"1674573360.0","comment_id":"786637","upvote_count":"22"},{"timestamp":"1678313460.0","content":"Selected Answer: B\nhttps://aws.amazon.com/premiumsupport/knowledge-center/vpc-analyze-inbound-traffic-nat-gateway/\n\nRefer Reason 1\n\nRun the query below.\nfilter (dstAddr like 'xxx.xxx' and srcAddr like 'public IP')\n| stats sum(bytes) as bytesTransferred by srcAddr, dstAddr\n| limit 10\nNote: You can use just the first two octets in the search filter to analyze all network interfaces in the VPC. In the example above, replace xxx.xxx with the first two octets of your VPC classless inter-domain routing (CIDR). Also, replace public IP with the public IP that you're seeing in the VPC flow log entry.\n\nQuery results show traffic on the NAT gateway private IP from the public IP, but not traffic on other private IPs in the VPC. These results confirm that the incoming traffic was unsolicited. However, if you do see traffic on the private instance's IP, then follow the steps under Reason #2.","comments":[{"content":"To determine whether the traffic represents unsolicited inbound connections from the internet, use the Amazon CloudWatch console. Select the log group that contains the NAT gateway’s elastic network interface and the private instance’s elastic network interface. Run a query to filter with the destination address set as “like 203.0” and the source address set as “like 198.51.100.2”. This approach helps you analyze the VPC flow logs to identify if the inbound traffic to the private EC2 instance is expected return traffic or unsolicited. The stats command can be used to filter the sum of bytes transferred by the source address and the destination address, providing insight into the traffic patterns and ensuring network security.","poster":"sashenka","comment_id":"1309507","upvote_count":"1","timestamp":"1731250200.0"},{"upvote_count":"1","content":"It has to be D as it only includes unsolicited traffic. Option B includes both.","timestamp":"1731250260.0","comment_id":"1309508","poster":"sashenka"},{"upvote_count":"2","timestamp":"1679109060.0","poster":"zejou1","comment_id":"842437","content":"For those that are choosing D - this is why D is incorrect and needs to be B"}],"poster":"kiran15789","comment_id":"833403","upvote_count":"19"},{"comment_id":"1387308","timestamp":"1741675200.0","upvote_count":"1","content":"Selected Answer: D\nThe NAT gateway allows outbound internet traffic from private instances but does not accept unsolicited inbound connections.\nIf 198.51.100.2 is contacting the private instance, we need to determine if this is a response to an existing outbound request from the private instance.","poster":"BennyMao"},{"comment_id":"1387307","poster":"BennyMao","upvote_count":"1","content":"Selected Answer: D\nThe NAT gateway allows outbound internet traffic from private instances but does not accept unsolicited inbound connections.\nIf 198.51.100.2 is contacting the private instance, we need to determine if this is a response to an existing outbound request from the private instance.","timestamp":"1741675140.0"},{"comment_id":"1328113","content":"Selected Answer: D\nwe need to check if the request starts from ec2 instances outbound, not the other way round.","poster":"grumpysloth","timestamp":"1734463860.0","upvote_count":"1"},{"poster":"youonebe","comment_id":"1314159","timestamp":"1731956340.0","upvote_count":"2","content":"Correct answer is D.\n\nThis is for NAT traffic analysis, so the focus is outbound.\n\nVPC Flow Logs are published to CloudWatch Logs, not CloudTrail1. This immediately eliminates options A and C.\n\nTo determine if the traffic is unsolicited inbound connections:\nWe need to check if the private EC2 instance (starting with 203.0) initiated the connection to 198.51.100.2\nIf the source IP is from the VPC (203.0) and the destination is 198.51.100.2, this indicates the connection was initiated from inside the VPC\nThis would mean the ACCEPT traffic is a response to an outbound request, not unsolicited inbound traffic."},{"timestamp":"1731872640.0","content":"Selected Answer: B\nThe answer is B.\nThis is not about an IP but about a port. If the packet from outside to inside has the source port which is well known and the destination port dynamic, it means that the connection was initiated from inside, if the packet from outside to inside has a source port dynamic and destination port well known, it means that the traffic was originated from outside :)","upvote_count":"1","poster":"tural_nasirov","comment_id":"1313715"},{"comment_id":"1309513","upvote_count":"2","timestamp":"1731251220.0","poster":"sashenka","content":"Selected Answer: D\nWhy Option B is Problematic:\n\n// Example CloudWatch Logs Insights Query for Option B\nfields @timestamp, sourceAddress, destinationAddress, action, bytes\n| filter destinationAddress like \"203.0\" \n| filter sourceAddress like \"198.51.100.2\"\n| stats sum(bytes) by sourceAddress, destinationAddress\n\n1. Incorrect Traffic Direction\n- It looks for traffic where source = 198.51.100.2 (internet) and destination = 203.0.x.x (VPC)\nThis only shows successful inbound connections (ACCEPT)\nIt doesn't reveal whether these connections were solicited or unsolicited\n2. Missing Context\n- Doesn't show the initial outbound connection that would indicate a solicited response\n- Cannot differentiate between legitimate responses and actual unsolicited connections\n- Lacks the temporal relationship between outbound and inbound flows","comments":[{"content":"Better Approach (Option D)\nsql\n// Example CloudWatch Logs Insights Query for Option D\nfields @timestamp, sourceAddress, destinationAddress, action, bytes\n| filter sourceAddress like \"203.0\"\n| filter destinationAddress like \"198.51.100.2\"\n| stats sum(bytes) by sourceAddress, destinationAddress\n\nThis query would:\nShow outbound traffic from VPC to the internet\nHelp establish if the private instance initiated communication\nAllow correlation between outbound requests and inbound responses\nKey Concept\nWith NAT gateway connections:\nLegitimate traffic follows a request-response pattern\nOutbound request must exist before inbound response\nLooking only at inbound traffic (Option B) misses this crucial relationship\nTherefore, Option D provides the necessary visibility to determine if the inbound connections were truly unsolicited by examining the outbound traffic first.","comment_id":"1309514","timestamp":"1731251280.0","poster":"sashenka","upvote_count":"1"}]},{"timestamp":"1730640660.0","comment_id":"1306527","upvote_count":"2","content":"D, we need to see if the internal origin was first used","poster":"sammyhaj"},{"poster":"NirvanaSNM","timestamp":"1721416440.0","content":"Selected Answer: B\ndestination address set as \"like 203.0\" and the source address set as \"like 198.51.100.2\"","comment_id":"1251402","upvote_count":"1"},{"timestamp":"1719990060.0","content":"Of course it is D. What useful info will you get from B? You need to check original request which in case of NAT is always EC2, not something in the internet.","upvote_count":"1","poster":"mns0173","comment_id":"1241222"},{"poster":"Helpnosense","upvote_count":"1","comment_id":"1232187","content":"Selected Answer: B\nI vote B. Because the network traffic to check is unsolicited inbound connection. IT is initiated from the internet to internal EC2. The source is public IP address and the target is internal IP.","timestamp":"1718676300.0"},{"poster":"higashikumi","comment_id":"1224309","upvote_count":"1","content":"Selected Answer: B\nTo determine whether the traffic represents unsolicited inbound connections from the internet, use the Amazon CloudWatch console. Select the log group that contains the NAT gateway’s elastic network interface and the private instance’s elastic network interface. Run a query to filter with the destination address set as “like 203.0” and the source address set as “like 198.51.100.2”. This approach helps you analyze the VPC flow logs to identify if the inbound traffic to the private EC2 instance is expected return traffic or unsolicited. The stats command can be used to filter the sum of bytes transferred by the source address and the destination address, providing insight into the traffic patterns and ensuring network security.","timestamp":"1717528080.0"},{"comment_id":"1190828","content":"Selected Answer: D\nthe solution architect want to check if it's unsolicited traffic or not, so we need to check the if the request is sent by us. which means 198.51.100.2 should be the destination.","poster":"Vongolatt","upvote_count":"2","timestamp":"1712474040.0"},{"timestamp":"1710681660.0","poster":"gofavad926","upvote_count":"2","content":"Selected Answer: B\nB, CloudWatch & destination address 203.0","comment_id":"1175844"},{"poster":"ajeeshb","content":"Selected Answer: D\nThe question is \"Solutions architect must determine whether the traffic represents unsolicited inbound connections from the internet\". The NAT gateway does not allow any inbound traffic from an internet other than response to a traffic it sent out to internet which came from a VPC resource (eg, EC2). So to find out if the inbound traffic to NAT Gateway from internet IP 198.51.100.2 is unsolicit or not, check the vpc flowlog to see if there was an original request from source IP 203.0 to destination 198.51.100.2. This is what option D says.","comment_id":"1170963","upvote_count":"3","timestamp":"1710156720.0"},{"comment_id":"1149551","content":"Selected Answer: B\nOption B is correct because VPC flow logs are stored in Amazon CloudWatch Logs. Analyzing these logs in CloudWatch allows you to filter and examine specific traffic patterns, such as traffic coming from a public IP address to a private instance. The query specified in this option correctly aims to identify traffic from the public IP (198.51.100.2) to the private IP range of the VPC (beginning with 203.0), which aligns with the requirement to investigate unsolicited inbound connections.","timestamp":"1707856020.0","upvote_count":"2","poster":"8608f25"},{"timestamp":"1706058540.0","comment_id":"1130128","upvote_count":"3","content":"Selected Answer: D\nAction = ACCEPT for inbound traffic that comes from public IP address 198.51.100.2 --> Destination","poster":"master9"},{"comment_id":"1126502","content":"B is what \"the company is seeing\", so D to see if it was first initiated from EC2.","poster":"cox1960","timestamp":"1705647960.0","upvote_count":"4"},{"upvote_count":"2","comment_id":"1085476","content":"I would say this question is wrong, even we ignore the 203.0 is a public IP.\nBoth B and D can do the job.\nWith B: if the return value is bigger than 0, that means the traffic was initiated from internal so that NAT GW wouldn't drop that traffic. While, if the return is 0, that means the traffic was dropped by NAT after ACCEPTed, which means it was not initiated from internal.\nWith D: if the return value is bigger than 0, obviously the traffic was initiated from internal. If the return value is 0, that means the traffic was initiated from internet.","timestamp":"1701461760.0","comments":[{"timestamp":"1705509000.0","upvote_count":"1","poster":"ninomfr64","comment_id":"1125125","content":"You need first to query traffic from public IP to private IP, check if the NAT Gateway is the only private IP. If not then you query traffic (from private IP to public IP) OR (from public IP to private IP) and this will show bi-directional traffic allowing you to determine whether the private instance or external public IP address is the initiator. Thus B and not D"}],"poster":"bjexamprep"},{"upvote_count":"3","poster":"severlight","comment_id":"1070127","content":"Selected Answer: B\nsee kiran15789's answer","timestamp":"1699947960.0"},{"content":"D\nAt NAT GW VPC flow logs will destination be VPC Private IP or will it be NAT GW IP","poster":"AMohanty","timestamp":"1694276940.0","upvote_count":"1","comment_id":"1003363"},{"comment_id":"973019","timestamp":"1691239260.0","upvote_count":"2","content":"I was inclined towards Reason #2 in https://repost.aws/knowledge-center/vpc-analyze-inbound-traffic-nat-gateway.\n\nHowever, the striking point is the VPC CIDR 203.0.... which is not a private addressing and not sure if we require a NAT gateway here at all for translation & check if the traffic was initiated through NAT gateway. Does the definition of unsolicited connection means any inbound connection other than the traffic initiated from VPC via NAT gateway will not be considered as solicited.\n\nTough one from the unclear definition in the question, it would be Reason 1 (Option B) if the traffic is mentioned as dropped in the question but needs to be analyzed for whether this is unsolicited. \n\nOr if question states inbound traffic is not permitted, but still it is seen and needs to be analyzed then D). Again, point to be noted is why outbound traffic from '203.0...' needs to go via NAT gateway.","poster":"study_aws1"},{"poster":"ggrodskiy","content":"Correct D.\nYou need to open the Amazon CloudWatch console, select the log group that contains the NAT gateway's elastic network interface and the private instance's elastic network interface, run a query to filter with the destination address set as \"like 198.51.100.2\" and the source address set as \"like 203.0\", and run the stats command to filter the sum of bytes transferred by the source address and the destination address.","timestamp":"1690886820.0","upvote_count":"2","comment_id":"968963"},{"content":"Selected Answer: B\nbbbbbbbbbbb","timestamp":"1689171480.0","upvote_count":"2","poster":"Jonalb","comment_id":"949882"},{"poster":"NikkyDicky","comment_id":"941241","timestamp":"1688332380.0","upvote_count":"3","content":"Selected Answer: D\nD. see filter expression in https://repost.aws/knowledge-center/vpc-analyze-inbound-traffic-nat-gateway, reason #2"},{"content":"Selected Answer: B\nB.\nNo clue of why you guys that voted D are convinced. Destination will be your VPC octets, source is the IP that is making the requests.","comments":[{"poster":"swadeey","comment_id":"1087635","upvote_count":"1","content":"But isn't Nat gateway to stop incoming traffic and allow ec2 to reach outside. One was external traffic. So when we filter from AWS prespectivr source is our machine and destination is outside as that is functioning of NAT Gateway","timestamp":"1701693720.0","comments":[{"poster":"hogtrough","content":"NAT Gateway does not stop incoming traffic, it simply allows to reach outside. Regardless, NAT Gateway is irrelevant to the answer of which is the source IP and which is the destination IP. \"Inbound traffic from\" by itself suggests that it's the source IP.","upvote_count":"1","timestamp":"1708104540.0","comments":[{"comment_id":"1152151","upvote_count":"1","timestamp":"1708105500.0","poster":"hogtrough","content":"I should clarify that NAT Gateway is considered egress only so while it technically prevents incoming traffic it's only use is for outbound traffic."}],"comment_id":"1152145"}]}],"comment_id":"940911","poster":"hexie","timestamp":"1688304120.0","upvote_count":"6"},{"timestamp":"1687350600.0","poster":"Maria2023","comment_id":"929485","upvote_count":"5","content":"I have the feeling that this question is missing the \"Choose 2\" option. Ideally, I would run both queries (B and D) to see if the outbound matches the inbound"},{"timestamp":"1686456120.0","comment_id":"920397","content":"Selected Answer: B\nwe wanna check if its unsolicited traffic or not, so we gotta check if its a response for a outbound connection we made","upvote_count":"2","poster":"SkyZeroZx"},{"comment_id":"913849","poster":"ZK000001qws","upvote_count":"3","comments":[{"upvote_count":"1","content":"But how Nat gateway send traffic to ec2 because ec2 will be in private subnet with private ips and Nat gateway just allow Nat translation for ec2 with private ip to reach to Internet via public natted Ip.","poster":"swadeey","timestamp":"1701693900.0","comment_id":"1087639"}],"content":"Selected Answer: B\nThe ask is \"A solutions architect must determine whether the traffic represents unsolicited inbound connections from the internet\".\ninbound connections from the internet - if we are to check the inbound connection, wouldn't the source be internet IP and destination be VPC? Thus I choose B too.\nIf it was outbound, initiated from VPC then it would make sense for D.","timestamp":"1685814180.0"},{"content":"Selected Answer: D\nwe wanna check if its unsolicited traffic or not, so we gotta check if its a response for a outbound connection we made","comment_id":"910410","upvote_count":"3","timestamp":"1685462940.0","poster":"johnballs221"},{"timestamp":"1684819080.0","comment_id":"904575","poster":"andreitugui","upvote_count":"1","content":"Selected Answer: B\nSo simple, CloudWatch logs to filter them(exclude aws cloudtrail), you need to check Inbound traffic to the vpc DESTINATION cidr 203.0 from SOURCE public ip 198.50."},{"comment_id":"892629","upvote_count":"1","comments":[{"upvote_count":"1","comment_id":"892630","content":"Query results show traffic on the NAT gateway private IP from the public IP, but not traffic on other private IPs in the VPC. These results confirm that the incoming traffic was unsolicited. However, if you do see traffic on the private instance's IP, then follow the steps under Reason #2.\nReason 2 - Traffic to the public IP was initiated from a private instance.\nThe question DOES NOT state which reason it would be except for the UNSOLICITED word in question. \nI am choosing B for this one.","timestamp":"1683600480.0","poster":"rbm2023"}],"content":"Selected Answer: B\nThis article \nhttps://repost.aws/knowledge-center/vpc-analyze-inbound-traffic-nat-gateway \nTalks about two reasons why a NAT Gateway would show inbound traffic from Public IP address to a private instance.\nReason 1 - Inbound internet traffic is permitted by your security group or network access control lists (ACL) - Check if the traffic is UNSOLICITED.\nRun query: \nfilter (dstAddr like 'xxx.xxx' and srcAddr like 'public IP') | stats sum(bytes) as bytesTransferred by srcAddr, dstAddr | limit 10","timestamp":"1683600480.0","poster":"rbm2023"},{"timestamp":"1682557500.0","upvote_count":"7","comments":[{"content":"It's the other way around. The traffic would be solicited if it was initiated from the EC2 instance.","comment_id":"939663","upvote_count":"1","poster":"Wobs1","timestamp":"1688193720.0"},{"content":"My thoughts exactly","poster":"johnballs221","comment_id":"910407","timestamp":"1685462760.0","upvote_count":"1"}],"content":"Selected Answer: D\nInitially I went for B but when I saw the answer and read the documentation I am going for D due to the word \"unsolicited\" traffic. That for me means that we need to check if it's a return traffic, requested by a machine in the VPC. So we check whether any instance called that IP. B would more be for the associate exam","comment_id":"882133","poster":"Maria2023"},{"upvote_count":"1","comment_id":"875020","poster":"Sarutobi","timestamp":"1681930080.0","content":"Is this question even correct? It is possible, but what is the point of using a NAT-GW if the two IP addresses are public? Another issue is if you are initiating the traffic from the Internet, you cannot reach an EC2 instance behind a NAT-GW, because that instance has a private address. In other words, traffic is always Ec2->NAT-GW->Internet. Under normal circumstances, traffic through the NAT-GW always has a source address Private and a destination address Public. Obviously, the reply to this packet flips the source and destination."},{"comments":[{"timestamp":"1681156140.0","comment_id":"866595","poster":"Jay_2pt0_1","content":"I'm curious as to why. Wouldn't the source be the public IP (that we want to research) and the destination our VPC?","upvote_count":"1"}],"timestamp":"1680495180.0","content":"Selected Answer: D\nI vote for D","poster":"vandergun","upvote_count":"1","comment_id":"859530"},{"timestamp":"1679834880.0","poster":"mfsec","comment_id":"851014","content":"Selected Answer: B\nOption B is better than option D because it filters the logs based on the source address \"like 198.51.100.2\" (the public IP address) and the destination address \"like 203.0\" (which corresponds to the VPC CIDR block). By analyzing the traffic between these addresses, you can determine whether the traffic represents unsolicited inbound connections from the internet.","upvote_count":"5"},{"poster":"taer","timestamp":"1679137920.0","content":"Selected Answer: B\nB is correct","upvote_count":"2","comment_id":"842690"},{"comment_id":"842436","timestamp":"1679108940.0","upvote_count":"3","poster":"zejou1","content":"Selected Answer: B\nB is the better option -> we need to understand why and which IPs this is hitting. If it is being allowed through, then we can identify the actual Private internal VPC that may have a bad inbound security group allowing connectivity. \n\nOnce that is identified, we could reverse (or add an 'or') to see all inbound and outbound traffic between the two. \n\nIdentify the actual flow first before flipping it hence statement:\nQuery results show traffic on the NAT gateway private IP from the public IP, but not traffic on other private IPs in the VPC. These results confirm that the incoming traffic was unsolicited. However, if you do see traffic on the private instance's IP, then follow the steps under Reason #2.\n\n(this is more security analytics/traffic log review)"},{"upvote_count":"2","timestamp":"1678674600.0","poster":"hobokabobo","content":"Selected Answer: B\nsource is internet address","comment_id":"837556"},{"comment_id":"819324","upvote_count":"2","content":"Selected Answer: B\nfor me correct answer is B","timestamp":"1677164280.0","poster":"saurabh1805"},{"comment_id":"819285","upvote_count":"2","timestamp":"1677162180.0","content":"Selected Answer: B\nB because:\ndestination address set as \"like 203.0\"\nsource address set as \"like 198.51.100.2\"","poster":"monkeyfish"},{"upvote_count":"1","poster":"c73bf38","comment_id":"817391","content":"Selected Answer: D\nOption D is the correct answer because Amazon CloudWatch Logs Insights can be used to filter the sum of bytes transferred by the source address and the destination address. The solution architect should open the CloudWatch console, select the log group that contains the NAT gateway's elastic network interface and the private instance's elastic network interface, and then run a query to filter with the destination address set as \"like 198.51.100.2\" and the source address set as \"like 203.0\". Finally, run the stats command to filter the sum of bytes transferred by the source address and the destination address.","timestamp":"1677032400.0"},{"comment_id":"813287","timestamp":"1676738160.0","comments":[{"poster":"rtgfdv3","content":"Based in this is D. \n\nfilter (dstAddr like 'xxx.xxx' and srcAddr like 'public IP')\n| stats sum(bytes) as bytesTransferred by srcAddr, dstAddr\n| limit 10","timestamp":"1676920080.0","upvote_count":"1","comments":[{"upvote_count":"1","poster":"rtgfdv3","comments":[{"poster":"c73bf38","comment_id":"817396","timestamp":"1677032760.0","content":"VPC cidr is SRC \"203.0\" \nDST = 195.51.100.2 which is public address\n\nkeep in mind you're tracing the route from the VPC SRC (203.0.) to the Public internet DST 195.51.100.2 using cloudwatch.","upvote_count":"1"}],"content":"my bad is B \n\n Note: You can use just the first two octets in the search filter to analyze all network interfaces in the VPC. In the example above, replace xxx.xxx with the first two octets of your VPC classless inter-domain routing (CIDR). Also, replace public IP with the public IP that you're seeing in the VPC flow log entry.","timestamp":"1676920200.0","comment_id":"815707"}],"comment_id":"815702"}],"content":"It is B \nReference:https://aws.amazon.com/premiumsupport/knowledge-center/vpc-analyze-inbound-traffic-nat-gateway/","poster":"getsat0024","upvote_count":"3"},{"comment_id":"811256","upvote_count":"2","timestamp":"1676594340.0","content":"Selected Answer: B\nI think B - SOurce public IP","poster":"spd"},{"content":"Selected Answer: B\nB is correct.","comment_id":"806067","poster":"oatif","timestamp":"1676187180.0","upvote_count":"2"},{"poster":"moota","upvote_count":"3","comments":[{"comment_id":"815700","upvote_count":"1","poster":"rtgfdv3","timestamp":"1676920020.0","content":"https://aws.amazon.com/premiumsupport/knowledge-center/vpc-analyze-inbound-traffic-nat-gateway/\n\nbasically it accepts the traffic, then dopt it.\nthe idea is check if the sum is more than 0 from NAT to Public Destination","comments":[{"timestamp":"1676920320.0","poster":"rtgfdv3","content":"looks like i am wrong should be D\n\nfilter (dstAddr like 'xxx.xxx' and srcAddr like 'public IP')\n| stats sum(bytes) as bytesTransferred by srcAddr, dstAddr\n| limit 10\n\nNote: You can use just the first two octets in the search filter to analyze all network interfaces in the VPC. In the example above, replace xxx.xxx with the first two octets of your VPC classless inter-domain routing (CIDR). Also, replace public IP with the public IP that you're seeing in the VPC flow log entry.","comments":[{"upvote_count":"1","content":"No I think you are right. It talks about *inbound* traffic. Meaning source is the public IP. If this is even possible in reality: don't know. Question does say inbound - so....","comment_id":"837563","poster":"hobokabobo","timestamp":"1678675020.0"}],"comment_id":"815708","upvote_count":"1"}]}],"comment_id":"805529","timestamp":"1676141160.0","content":"Selected Answer: D\nTrick question. A NAT Gateway is not supposed to accept incoming traffic. There might be a security issue here."},{"poster":"Untamables","content":"Selected Answer: D\nThis is a trick question.\n'Action = ACCEPT' response is sent from private EC2 instances (203.0.x.x) to the public IP address (198.51.100.2) via the NAT Gateway. The NAT Gateway can catch only this outbound traffic because the relevant inbound traffic does not pass through the NAT Gateway.","upvote_count":"3","comment_id":"790785","timestamp":"1674922080.0"},{"content":"should be B no? as the source =198.51.100.2. and dest =203.0\nI think D is the inverse","comment_id":"790070","timestamp":"1674862740.0","upvote_count":"2","poster":"zozza2023"},{"comments":[{"comment_id":"776282","content":"The other options are not correct because they are not using the correct service (CloudTrail instead of CloudWatch) or not filtering the logs correctly with the specified IP addresses and the desired information is not available.","poster":"masetromain","upvote_count":"2","timestamp":"1673772240.0"}],"content":"Selected Answer: D\nThe correct answer is D. Open the Amazon CloudWatch console. Select the log group that contains the NAT gateway's elastic network interface and the private instance's elastic network interface. Run a query to filter with the destination address set as \"like 198.51.100.2\" and the source address set as \"like 203.0\". Run the stats command to filter the sum of bytes transferred by the source address and the destination address.\n\nThis set of steps will allow the solutions architect to determine whether the inbound traffic coming from the public IP address 198.51.100.2 is unsolicited, by filtering the VPC flow logs to show the traffic that is going to the private Amazon EC2 instance, and then checking if the traffic is coming from within the VPC CIDR block (203.0) or from outside of it (198.51.100.2). By using Amazon CloudWatch and filtering the logs with the specified IP addresses, the architect can quickly and efficiently identify any unsolicited traffic.","timestamp":"1673772240.0","comment_id":"776281","upvote_count":"4","poster":"masetromain"}],"choices":{"D":"Open the Amazon CloudWatch console. Select the log group that contains the NAT gateway's elastic network interface and the private instance's elastic network interface. Run a query to filter with the destination address set as \"like 198.51.100.2\" and the source address set as \"like 203.0\". Run the stats command to filter the sum of bytes transferred by the source address and the destination address.","A":"Open the AWS CloudTrail console. Select the log group that contains the NAT gateway's elastic network interface and the private instance's elastic network interlace. Run a query to filter with the destination address set as \"like 203.0\" and the source address set as \"like 198.51.100.2\". Run the stats command to filter the sum of bytes transferred by the source address and the destination address.","C":"Open the AWS CloudTrail console. Select the log group that contains the NAT gateway's elastic network interface and the private instance’s elastic network interface. Run a query to filter with the destination address set as \"like 198.51.100.2\" and the source address set as \"like 203.0\". Run the stats command to filter the sum of bytes transferred by the source address and the destination address.","B":"Open the Amazon CloudWatch console. Select the log group that contains the NAT gateway's elastic network interface and the private instance's elastic network interface. Run a query to filter with the destination address set as \"like 203.0\" and the source address set as \"like 198.51.100.2\". Run the stats command to filter the sum of bytes transferred by the source address and the destination address."},"url":"https://www.examtopics.com/discussions/amazon/view/95384-exam-aws-certified-solutions-architect-professional-sap-c02/","exam_id":33,"question_text":"A company has VPC flow logs enabled for Its NAT gateway. The company is seeing Action = ACCEPT for inbound traffic that comes from public IP address 198.51.100.2 destined for a private Amazon EC2 instance.\n\nA solutions architect must determine whether the traffic represents unsolicited inbound connections from the internet. The first two octets of the VPC CIDR block are 203.0.\n\nWhich set of steps should the solutions architect take to meet these requirements?","answers_community":["B (63%)","D (37%)"],"isMC":true,"answer_ET":"B","topic":"1","timestamp":"2023-01-15 09:44:00","question_images":[],"answer_description":"","unix_timestamp":1673772240,"answer_images":[],"question_id":520}],"exam":{"numberOfQuestions":529,"id":33,"isImplemented":true,"name":"AWS Certified Solutions Architect - Professional SAP-C02","provider":"Amazon","isMCOnly":true,"isBeta":false,"lastUpdated":"11 Apr 2025"},"currentPage":104},"__N_SSP":true}